
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Adam Ginsburg's Astro Blog</title>
  <meta name="author" content="Adam Ginsburg">

  
  <meta name="description" content="In the previous post, I came up with a final plot showing the pointing offset was, on average, not significant, even in the ATLASGAL overlap zone.So &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://keflavich.github.com/bgps/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Adam Ginsburg's Astro Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Adam Ginsburg's Astro Blog</a></h1>
  
    <h2>Nicer than keflavich.blogspot.com</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:keflavich.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/bgps/">BGPS</a></li>
  <li><a href="/publications/">Research</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/25/catalog-vs-image-shift-possible/">Catalog vs Image Shift? A Possible Solution to the ATLASGAL Issue</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-25T20:30:00-07:00" pubdate data-updated="true">Dec 25<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">In the <a href="http://bolocam.blogspot.com/2012/12/pointing-cross-correlation-yet-again.html">previous post</a>, I came up with a final plot showing the pointing offset was, on average, not significant, even in the ATLASGAL overlap zone.<br /><br />So why did the ATLASGAL group infer a net pointing offset?<br /><br />The problem is probably one or two fields with a slight pointing offset, but a huge number of source. &nbsp;l=1 has an offset of the right sign and is the single most source-rich degree in the survey, with 368 sources.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-ONF7C_v8rNk/UNpmXIEe6HI/AAAAAAAAHUI/kdf3pmUKyE0/s1600/l001_catalog_image_compare.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="229" src="http://2.bp.blogspot.com/-ONF7C_v8rNk/UNpmXIEe6HI/AAAAAAAAHUI/kdf3pmUKyE0/s320/l001_catalog_image_compare.png" width="320" /></a></div>This figure shows the v1 vs v2 source locations in grey, their average and standard deviation in green, and the cross-correlation offset in red. &nbsp;The plot is somewhat difficult to interpret, but it appears that the v1 point sources are systematically more shifted to negative longitudes than v2, and the point sources more than the maps themselves. &nbsp;There may have been some reason sources were systematically selected at more negative longitudes in the v1 catalog; around Sgr B2 there&#8217;s a lot of structure that had to be decomposed somehow but was not necessarily &#8220;source&#8221;. <br /><br />One thing to note is the reversal in left-right (in pixel space) vs the positive/negativeness in longitude. &nbsp;The above plot is correct (negative longitudes, as shown on the plot, are &#8220;right&#8221; in images), but most of my other plots have the X-axis flipped.<br /><br />In the end, after spending two weeks hammering my head against this, I find no clear evidence for an offset &nbsp;between the BGPS and Herschel or v1/v2 data overall or in the ATLASGAL fields. &nbsp;In any individual field, that statement is not necessarily true.<br /><br />Despite the strong statistical evidence, it is really hard to be really sure about sub-pixel offsets, since the &#8220;model&#8221; image is never perfect. &nbsp;I think we can safely state the ~1/2 pixel offsets (~3&#8221;) but I just don&#8217;t feel confident about numbers below that range for ALL fields.</div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/21/idea-multispectral-eigenimage/">Idea: Multispectral Eigenimage Decomposition&#8230;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-21T19:53:00-07:00" pubdate data-updated="true">Dec 21<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">Can use BGPS + HiGal to look for correlated (thermal) components and decorrelated (free-free) components. &nbsp;Obviously needs to be tried in GC first.<br /><br />Also, need to figure out a method to mitigate negative bowls in unsharp-masking for herschel-bolocam comparison</div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/10/pointing-cross-correlation-yet-again/">Pointing & Cross-Correlation Yet Again</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-10T12:08:00-07:00" pubdate data-updated="true">Dec 10<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on"><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js" type="text/javascript">MathJax.Hub.Config({  extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"],  jax: ["input/TeX", "output/HTML-CSS"],  tex2jax: {      inlineMath: [ ['$','$'], ["\\(","\\)"] ],      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],  },  "HTML-CSS": { availableFonts: ["TeX"] } }); </script>  <br /><div dir="ltr" style="text-align: left;" trbidi="on">Prompted in part by a <a href="http://arxiv.org/abs/1211.0741">recent ATLASGAL paper</a>&nbsp;identifying pointing offsets of about 3&#8221; in the BGPS, we revisit the BGPS pointing.<br /><br />The ATLASGAL team compared the source locations in their catalog to source locations in the Bolocam catalog by doing &#8220;nearest-match&#8221; searches within a 40&#8221; radius (see their Figure 8, reproduced here)<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-UJVCzHbaDCI/UMYpeAoulVI/AAAAAAAAHR4/cy5SIqL_HFQ/s1600/ATLASGALvsBolocam.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="313" src="http://1.bp.blogspot.com/-UJVCzHbaDCI/UMYpeAoulVI/AAAAAAAAHR4/cy5SIqL_HFQ/s320/ATLASGALvsBolocam.png" width="320" /></a></div><span id="goog_773521641"></span><span id="goog_773521642"></span><br />Their comparison was over the range -10 &lt; l &lt; 21, so it only covered a small fraction of the BGPS. &nbsp;It covered 13 fields with independent pointing solutions, so it&#8217;s possible that they have actually discovered an offset only in some of our fields.<br /><br />The catalog comparison, while interesting, is potentially quite flawed. &nbsp;There&#8217;s no guarantee that a source extraction algorithm will measure source centers accurately when a &#8220;source&#8221; is just a local overdensity on a complex background. &nbsp;Using source comparison will also lead to a bias towards the most source-rich fields, e.g. l000 and l001, so an offset in one of those fields would drastically affect the catalog offset.<br /><br />There is a better way to compare pointing between two images that are expected to be (nearly) identical. &nbsp;It is well-known that cross-correlation is an effective technique for determining the offsets between two identical images; I&#8217;ll briefly summarize some of the literature here.<br /><br /><a href="http://adsabs.harvard.edu/abs/2005A%26A...443..357G">Gratadour et al 2005</a>&nbsp;used a maximum likelihood estimator approach to determine the &#8220;best-fit&#8221; offset between two images. &nbsp;This approach is comparable to <a href="http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=5&amp;cad=rja&amp;ved=0CF0QFjAE&amp;url=http%3A%2F%2Fwww.optics.rochester.edu%2Fworkgroups%2Ffienup%2FPUBLICATIONS%2FMGS_OL08_EffRegistration.pdf&amp;ei=rC3GUJC9CcSA2AX3wYCIAg&amp;usg=AFQjCNHdUm0v8qYzNbvrqFRqByR_3svlSA&amp;sig2=GQztgkfvoQzAzQ7kzCJU2w">Guizar et al (2008)</a>, who <a href="http://www.mathworks.com/matlabcentral/fileexchange/18401-efficient-subpixel-image-registration-by-cross-correlation">implemented</a> a fast solution for (highly) sub-pixel image registration in matlab. &nbsp;In order for the image registration to be fast, it must operate in fourier space, but to get sub-pixel registration in fourier space, you need to either pad (which is slow, and increases memory use drastically) or fit some functional form around the peak of the cross-correlation image. &nbsp;The alternative approach implemented by Guizar utilizes the <a href="http://en.wikipedia.org/wiki/Fourier_transform#Basic_properties">Fourier scaling theorem</a>&nbsp;to create a zoomed-in image of the peak pixel, which allows you to get much higher precision for a much lower computational cost.<br /><br />My innovation is to use the minimum $\chi^2$ estimator to determine the goodness of fit and therefore error bars on the best-fit offset. &nbsp;Because the $\chi^2$ value for each offset is simply determined by sums and multiplication ($\chi^2 = \sum \frac{x_i-\mu_x}{\sigma_{x_i}^2}$), we can compute each term that goes in to the $\chi^2$ value independently with fourier transforms, then create goodness-of-fit contours around the $\chi^2$ minimum. &nbsp;The statistical requirement for this approach to make sense is that the errors on the data are gaussian distributed, which is an assumption we inevitably make for astronomical images. &nbsp;I believe there is also a requirement that the errors are independent, which may be more difficult to satisfy, but in the Bolocam images it is satisfied, especially when multiple independent observations are combined.<br /><br />Strictly, this approach can only be used when the model data have the same multiplicative scale as the fitted data. &nbsp;The peak will never be wrong using this method, but the errors could be incorrect if the model and data are multiplicatively offset. &nbsp;In principle, this can be resolved in the future using a <a href="http://en.wikipedia.org/wiki/Mellin_transform">Mellin transform</a>&nbsp;[see <a href="http://ecocodespace.wordpress.com/category/matlab/image-matching/fourier-mellin-transform/">this site</a>&nbsp;or <a href="http://www.mathworks.com/matlabcentral/fileexchange/authors/7667">this</a> for a matlab approach and <a href="http://www.fresnel.fr/perso/derrode/publi/Cviu01.pdf">this</a> for an academic paper on it].<br /><br />This is the approach I have implemented at&nbsp;<a href="http://image-registration.rtfd.org/">image-registration.rtfd.org</a>. &nbsp;I used simulated test cases to demonstrate that it is, indeed, effective and accurate. &nbsp;I used this method to measure the offsets between the v2 data and the v1 data (which should, in principle, be the same as the offsets between ATLASGAL and v1) and the v2 vs Herschel Hi-Gal data (which should be zero). <br /><br />There are actually a few methods implemented in image-registration, and I compared those. &nbsp;There&#8217;s a &#8220;dft&#8221; and a &#8220;$\chi^2$&#8221; approach, which are the same (except $\chi^2$ includes realistic errors), a method where a 2D gaussian is fit to the peak of the cross-correlation image, and a method where a 2nd-order Taylor expansion is performed around the peak of the cross-correlation image. &nbsp;The latter two are <i>biased</i>. &nbsp;An example comparison plot looks like this:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-LtA6owJr_vc/UMZBLK394HI/AAAAAAAAHSI/tR4F0BnFSVs/s1600/l000_catalog_image_compare_chi2contours.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="228" src="http://1.bp.blogspot.com/-LtA6owJr_vc/UMZBLK394HI/AAAAAAAAHSI/tR4F0BnFSVs/s320/l000_catalog_image_compare_chi2contours.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;">The grey dots are catalog centroid positions offsets measured between v1 and v2. &nbsp;The green cross represents the mean and standard deviation of the grey points. &nbsp;The other data points, as labeled, show the offsets between the l000 images in v1 and v2 as measured by the method shown. They all have errorbars plotted, but the errorbars are generally smaller than the points. &nbsp;The dark spot seen behind the purple point shows the $\chi^2$ contours out to 8-$\sigma$: the error in the offset is tiny, sub-arcsecond. &nbsp;In this case, the offsets nearly agree:</div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both;">l000 catalog dx: &nbsp;-0.31 +/- 0.68 &nbsp; dy: 1.48 +/- 0.64</div><div class="separator" style="clear: both;">l000 $\chi^2$ dx: &nbsp; 1.74 +/- 0.03 &nbsp;dy: 1.41 +/- 0.03&nbsp;</div><div class="separator" style="clear: both;"><br /></div><div class="separator" style="clear: both; text-align: left;">This field agreed nicely between v1 and v2.</div><br /><br />The comparison to Hi-Gal is perhaps more important; HiGal&#8217;s pointing is calibrated based on multi-wavelength observations, some of which include actual stars. &nbsp;It&#8217;s a space-based mission, so its pointing is more stable. &nbsp;And finally, being a space mission, there&#8217;s a large dedicated team instead of a single, part-time individual working on the data.<br /><br />Our offsets from Hi-Gal are pretty small in general, though not trivially small.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-JyMtqE536LY/UMaEqOYBRxI/AAAAAAAAHSY/85nEo6rEc9k/s1600/Offsets_XYplot.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="214" src="http://1.bp.blogspot.com/-JyMtqE536LY/UMaEqOYBRxI/AAAAAAAAHSY/85nEo6rEc9k/s320/Offsets_XYplot.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">And it turns out, the region that overlaps with ATLASGAL had more serious pointing errors than the rest of the survey:</div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-iXI7TUl1y9I/UMaHHXwN2oI/AAAAAAAAHSg/z3g51NHD0zk/s1600/Offsets_XYplot_ATLASGALoverlap.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="214" src="http://2.bp.blogspot.com/-iXI7TUl1y9I/UMaHHXwN2oI/AAAAAAAAHSg/z3g51NHD0zk/s320/Offsets_XYplot_ATLASGALoverlap.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">(note: both of the above plots are missing L=359 because I forgot it. &nbsp;Fixing that now&#8230;)</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">The clearest problem field is l=15, with a longitude offset of -6&#8221; between v2 and HiGal&#8230;. that&#8217;s not the question, though. &nbsp;Somehow I&#8217;ve lost the code that did the v1-HiGal offsets; I&#8217;ll have to re-write that tomorrow and let it run&#8230;</div><br />Update 12/13: &nbsp;I&#8217;ve spent the last couple days clearing up some issues with the offsets. &nbsp;The error bars should be MUCH smaller than in the above plots. &nbsp;The means are pretty similar, though. <br /><br />Short story: the offsets between v1 and Hi-Gal are greater in the ATLASGAL overlap regions than elsewhere, and in the right general direction, but not quite as serious as they claimed. &nbsp;In v2, the ATLASGAL overlap fields and the rest of the survey have the same mean offsets, and those offsets are small (-0.5&#8221; in l, -1&#8221; in b).<br /><br />The problem now is the table. &nbsp;If everything made sense, (v1-v2)+(v2-higal)+(higal-v1) = 0. &nbsp;But that clearly isn&#8217;t the case, which implies an error in the method, which sucks since I&#8217;m claiming this method is superior to alternatives. &nbsp;It&#8217;s possible that I&#8217;m actually underestimating the errors against Hi-Gal - that can be fixed relatively easily - but the magnitude of the error won&#8217;t affect the centroid measurements. &nbsp;So I probably need to investigate one case very carefully. &nbsp;l050 is a big problem case, with vector sums &gt;1 pixel in both directions. &nbsp;That will be my next line of investigation.<br /><br />The approach will be:<br />-crop identical fields within l050 from v1, v2, herschel<br />-perform pointing comparison between them<br />-check that vector sum &lt; sum of errors<br /><br />I think - and hope - the trouble is just that I&#8217;m using inconsistent sub-fields to compare Herschel with the two different Bolocam versions, which is possible because of the way I selected these sub-fields. &nbsp;I&#8217;ll do more careful cropping, and probably re-do this analysis degree-by-degree (with $512^2$ fields, in the hope that it speeds up the FTs).<br /><br />Update 12/14:<br />I&#8217;ve now cropped identical sections in each of the survey, 1 square degree (512 pixels) each - which is great for speed. &nbsp;As a sidenote, a little line profiling revealed that the make_cross_plots<br />&nbsp;code was the slow point in the process, and it is dominated by savefig calls, not ffts. <br /><br />I&#8217;ve run a careful examination of self consistency on the l=0 field, with positive results: the offsets agree to well within the errorbars (though there is some residual error at the 0.5&#8221; level).<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/--3Q9h0Q1jA4/UMuUjQ33dCI/AAAAAAAAHS4/zSD3H26r5dA/s1600/circular_selfconsistency.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="214" src="http://1.bp.blogspot.com/--3Q9h0Q1jA4/UMuUjQ33dCI/AAAAAAAAHS4/zSD3H26r5dA/s320/circular_selfconsistency.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">However, a similar inspection of l=50 resulted in a major failure:</div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-wlwvC26eTEk/UMuYZHU179I/AAAAAAAAHTI/Csf3mBSdbGI/s1600/circular_selfconsistency.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="214" src="http://2.bp.blogspot.com/-wlwvC26eTEk/UMuYZHU179I/AAAAAAAAHTI/Csf3mBSdbGI/s320/circular_selfconsistency.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: left;">In this case, the problem is caused by W51 being exactly on the field edge, leading to huge cross-correlation power at dx=0, but spread over a large y range. &nbsp;My first thought is to try to downweight the edges, which can be achieved by &#8220;zero-padding&#8221; the noise image, but with high values instead of zero&#8230; or alternatively, by setting the edge region to zero smoothly.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">OK, first thought: Bad idea. &nbsp;Increasing the noise along the edges drastically increases the small-shift autocorrelation for the noise, which in turn ends up ruling out the small shifts as a fit possibility. &nbsp;I don&#8217;t think this really makes sense mathematically, but each step does. &nbsp;Why would increasing the noise along the edges make the $\chi^2$ fit worse? &nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">This revealed a serious bug in the code that, luckily, only affected non-uniform error maps. &nbsp;Basically, I had decomposed the $\chi^2$ equation wrong (which is as bad as it sounds). &nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">That total mess has been resolved now. &nbsp;The image edges are downweighted with a gaussian of 12 pixels, error=100 outside and weight=0 outside (with weight^2 inside&#8230; best to just view the source if you really want to know the details). &nbsp;The new versions of the above diagrams:</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-mjPyO7LkbGc/UMuxVgSxwZI/AAAAAAAAHTY/ilRnJRaAiOQ/s1600/circular_selfconsistency.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="214" src="http://4.bp.blogspot.com/-mjPyO7LkbGc/UMuxVgSxwZI/AAAAAAAAHTY/ilRnJRaAiOQ/s320/circular_selfconsistency.png" width="320" /></a><a href="http://3.bp.blogspot.com/-rMiHxucSQuo/UMuxZSH63fI/AAAAAAAAHTg/W_IzmhcFCzo/s1600/circular_selfconsistency.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="214" src="http://3.bp.blogspot.com/-rMiHxucSQuo/UMuxZSH63fI/AAAAAAAAHTg/W_IzmhcFCzo/s320/circular_selfconsistency.png" width="320" /></a></div><br /><div></div><div class="separator" stype="clear:both; text-align: left">Less than spectacular for l=50, but acceptable given the errors, which are indeed significantly larger, as you might expect given the lower total signal in l=50.  Now I need to re-run the fits on every field. </div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left">OK, cool, last thing accomplished today (&#8230;by 8pm): offset comparison by square degree for all fields. &nbsp;Again, I don&#8217;t reproduce the magnitude of the ATLASGAL-measured offsets, but the ATLASGAL fields are, on average, more offset in longitude (to the negative) than the overall average.</div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left">Curiously, for both v1 and v2, there appears to be a -1.5 deg shift in latitude from Hi-Gal.</div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left">The vector sums are mostly sub-arcsecond, with most exceptions at l&gt;50. &nbsp;l=59,64, and 65 are particularly bad - but l=50 isn&#8217;t so bad. &nbsp;So I should do the &#8220;deep&#8221; examination of one or two of those fields&#8230; who knows what new errors I&#8217;ll turn up?</div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" stype="clear:both; text-align: left">Here&#8217;s the new v1-ATLASGAL offset plot:</div><div class="separator" stype="clear:both; text-align: left"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-iv_FsACT958/UMvsyr90haI/AAAAAAAAHTw/g56hcK6hMCw/s1600/Offsets_XYplot_v1-Hi-Gal_ATLASGALoverlap.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="214" src="http://3.bp.blogspot.com/-iv_FsACT958/UMvsyr90haI/AAAAAAAAHTw/g56hcK6hMCw/s320/Offsets_XYplot_v1-Hi-Gal_ATLASGALoverlap.png" width="320" /></a></div><div class="separator" stype="clear:both; text-align: left"><br /></div></div></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/09/08/cross-correlation-offsets-revisited/">Cross-Correlation Offsets Revisited</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-08T02:05:00-06:00" pubdate data-updated="true">Sep 8<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">Since last time (<a href="http://bolocam.blogspot.com/2009/03/43-relative-alignment-and-mosaicing.html">Taylor Expansion &amp; Cross Correlation</a><a href="">, </a><a href="http://bolocam.blogspot.com/2012/03/new-coalignment-code.html">Coalignment Code</a>), I have attempted to re-do the cross-correlation with an added component: error estimates.<br /><br />It turns out, there is a better method than the Taylor-expansion around the cross-correlation peak. &nbsp;Fourier upsampling can be used to efficiently determine precise sub-pixel offsets (<a href="http://www.mathworks.com/matlabcentral/fileexchange/18401-efficient-subpixel-image-registration-by-cross-correlation/content/html/efficient_subpixel_registration.html">matlab version</a>, <a href="http://people.web.psi.ch/guizar_m/main/">Manuel Guizar, author</a>, <a href="http://www.opticsinfobase.org/view_article.cfm?gotourl=http%3A%2F%2Fwww%2Eopticsinfobase%2Eorg%2FDirectPDFAccess%2F6C566DF3-B5C5-B342-97F01180999C7632_148843%2Fol-33-2-156%2Epdf%3Fda%3D1%26id%3D148843%26seq%3D0%26mobile%3Dno&amp;org=University%20of%20Colorado%20at%20Boulder%20Library">refereed article</a>).<br /><br />However, in the published methods just cited, there is no way to determine the error - those algorithms are designed to measure offsets between identical images corrupted by noise but still strongly dominated by signal.<br /><br />We&#8217;re more interested in the case where individual pixels may well be noise-dominated, but the overall signal in the map is still large.<br /><br />So, I&#8217;ve developed a python translation of the above codes and then some.<br /><br /><a href="https://github.com/keflavich/image_registration">Image Registration on github</a><br /><br />The docstrings are pretty solid, but there is no overall documentation.<br /><br />However, there&#8217;s a pretty good demo of the simulation AND fitting code here:<br /><a href="https://github.com/keflavich/image_registration/blob/master/doc/CrossCorrelationSimulation.pdf?raw=true">Tests and Examples</a><br /><br />The results for the Bolocam data are here (only applied to v2-Herschel offsets):<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-PMJx-wX23w8/UErt7G3PqfI/AAAAAAAAHOQ/-5xD6ReBRGs/s1600/Offsets_XYplot.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://2.bp.blogspot.com/-PMJx-wX23w8/UErt7G3PqfI/AAAAAAAAHOQ/-5xD6ReBRGs/s320/Offsets_XYplot.png" width="320" /></a></div><br /></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/24/bolocat-v1-vs-v2/">Bolocat V1 vs V2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-24T11:55:00-06:00" pubdate data-updated="true">May 24<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve done some very extensive comparison of v1 and v2.  The plots below are included in the current BGPS draft, but I&#8217;ll go into more excessive detail here.  ALL plots below show Version 1 fluxes versus Version 2 fluxes using Bolocat V1 apertures.  This means there are only two possible effects in play: <br /><br /><ol><li>Different fluxes in the v1 and v2 maps</li><li>Pointing (spatial) offsets between the v1 and v2 maps [see&nbsp;http://bolocam.blogspot.com/2012/05/bgps-v2-pointing.html]</li></ol>Therefore, the plots below are just different ways of visualizing the same information.  This holds true despite the fact that different &#8220;correction factors&#8221; appear in different plots.  <br /><div><br /></div><br /><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-gGL8rEcNr20/T75tzRC4dJI/AAAAAAAAHHM/A8KeWkBtfmc/s1600/total_ratiohistograms.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="214" src="http://3.bp.blogspot.com/-gGL8rEcNr20/T75tzRC4dJI/AAAAAAAAHHM/A8KeWkBtfmc/s320/total_ratiohistograms.png" width="320" /></a></div>Ratios of v2 fluxes to v1 fluxes in the listed apertures.  The curves represent best-fit gaussian distributions to the data after excluding outliers using a <a href="http://scikit-learn.org/dev/modules/generated/sklearn.covariance.MinCovDet.html">minimum covariance determinant</a> method  <br /><table><tbody><tr><td width="400"><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: 1em; text-align: right;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-n_NxdUplC5s/T75t2udmpqI/AAAAAAAAHIQ/yRM1PQjXEV0/s1600/total_v1v2_40arcsec_fit_compare.png" imageanchor="1" style="margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img border="0" height="213" src="http://3.bp.blogspot.com/-n_NxdUplC5s/T75t2udmpqI/AAAAAAAAHIQ/yRM1PQjXEV0/s320/total_v1v2_40arcsec_fit_compare.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">v1 vs v2 with a background subtracted around the source equal to the source area (this was not reported in Bolocat v1, but is a tool Erik implemented so I used it)</td></tr></tbody></table></td><td width="400"><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-right: 1em; text-align: left;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-EJs6vHAzoM8/T75t2hH3u0I/AAAAAAAAHII/GbdXYj10Z8k/s1600/total_v1v2_40_nobgarcsec_fit_compare.png" imageanchor="1" style="clear: left; margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img border="0" height="213" src="http://3.bp.blogspot.com/-EJs6vHAzoM8/T75t2hH3u0I/AAAAAAAAHII/GbdXYj10Z8k/s320/total_v1v2_40_nobgarcsec_fit_compare.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">v1 vs v2 in 40&#8221; apertures, as stated. &nbsp;There are y=x and y=1.5x lines plotted: these are NOT fits to the data! &nbsp;The green line is a Total Least Squares linear fit to the data weighted by the measured errors. &nbsp;</td></tr></tbody></table></td></tr></tbody></table><br /><br />Source Mask &#8220;aperture&#8221;: <br /><table><tbody><tr><td width="400"><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-YS2Jtvz4Yy0/T75pixKkYsI/AAAAAAAAHFs/iEJHrsKsBk0/s1600/total_v1v2_sourcemask_bg_fit_compare.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="213" src="http://1.bp.blogspot.com/-YS2Jtvz4Yy0/T75pixKkYsI/AAAAAAAAHFs/iEJHrsKsBk0/s320/total_v1v2_sourcemask_bg_fit_compare.png" width="320" /></a></div></td><td width="400"><a href="http://1.bp.blogspot.com/-g-ZbEUUWEpY/T75pjj26FeI/AAAAAAAAHGE/rtdSRgoMQpo/s1600/total_v1v2_sourcemask_fit_compare.png" imageanchor="1" style="clear: left;  margin-bottom: 1em; margin-right: 1em;"><img border="0" height="213" src="http://1.bp.blogspot.com/-g-ZbEUUWEpY/T75pjj26FeI/AAAAAAAAHGE/rtdSRgoMQpo/s320/total_v1v2_sourcemask_fit_compare.png" width="320" /></a></td></tr></tbody></table>Same as above, but the best fit slope is steeper.  The best explanation for the steeper slope (i.e., v2 &gt; 1.5(v1)) is that more extended flux is recovered in v2 around bright sources, therefore in the larger source masks, there is greater flux than would be recovered if a simple 1.5x corrective factor was applied.  <br /><br />80&#8221; apertures<br /><br /><table><tbody><tr><td width="400"><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-WKtlvnFbUF4/T75piyh8tVI/AAAAAAAAHF4/FROq508X6pU/s1600/total_v1v2_80arcsec_fit_compare.png" imageanchor="1" style="margin-bottom: 1em; margin-left: 1em;"><img border="0" height="213" src="http://2.bp.blogspot.com/-WKtlvnFbUF4/T75piyh8tVI/AAAAAAAAHF4/FROq508X6pU/s320/total_v1v2_80arcsec_fit_compare.png" width="320" /></a></div></td><td width="400"><a href="http://1.bp.blogspot.com/-EHGNHIarslc/T75yqG_AmFI/AAAAAAAAHJg/ToAicG9ynmk/s1600/total_v1v2_80_nobgarcsec_fit_compare.png" imageanchor="1" style="clear: left;  margin-bottom: 1em; margin-right: 1em;"><img border="0" height="214" src="http://1.bp.blogspot.com/-EHGNHIarslc/T75yqG_AmFI/AAAAAAAAHJg/ToAicG9ynmk/s320/total_v1v2_80_nobgarcsec_fit_compare.png" width="320" /></a> </td></tr></tbody></table><div class="separator" style="clear: both; text-align: left;">Same for 120&#8221; apertures:</div><table><tbody><tr><td width="400"><a href="http://1.bp.blogspot.com/-ymBFW1Y5OhY/T75piwFYrJI/AAAAAAAAHFw/07ujRFCd_Ts/s1600/total_v1v2_120arcsec_fit_compare.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="213" src="http://1.bp.blogspot.com/-ymBFW1Y5OhY/T75piwFYrJI/AAAAAAAAHFw/07ujRFCd_Ts/s320/total_v1v2_120arcsec_fit_compare.png" width="320" /></a> </td><td width="400"><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-PMkvtoJKNVs/T75yqPe16PI/AAAAAAAAHJk/QF041ok8yQ0/s1600/total_v1v2_120_nobgarcsec_fit_compare.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="214" src="http://3.bp.blogspot.com/-PMkvtoJKNVs/T75yqPe16PI/AAAAAAAAHJk/QF041ok8yQ0/s320/total_v1v2_120_nobgarcsec_fit_compare.png" width="320" /></a></div></td></tr></tbody></table><br />For all 3 of the 40, 80 and 120&#8221; apertures both, the 1.5x correction factor is nearly perfect (agrees to &lt;5%). &nbsp;The background subtraction seems to have different effects depending on aperture size. &nbsp;I welcome Erik to comment on this, but I do not think it is particularly important.<br /><br /><br />The figures below require some explanation. &nbsp;NONE of the circular apertures use background subtraction in this comparison (i.e., compare to the RIGHT column above).<br /><br />These figures are histograms of the flux ratio within a given aperture as a function of flux in the v1 aperture. &nbsp;From bottom to top, the flux in the v1 aperture goes from 0.1 to 10 Jy. &nbsp;The X-axis shows the ratio of the v2 flux to the v1 flux. &nbsp;The black dots with error bars represent the best-fit gaussian distribution to each flux bin. &nbsp;The colorbar shows the log of the number of sources; the most in any bin is about 10<sup>2.5</sup> ~ 300. <br /><br />In short, there is some sign that the ratio of v2/v1 flux varies with v1 flux. &nbsp;This effect could be seen in the figures above since a linear fit is imperfect. &nbsp;The effect is not very strong. &nbsp;Again, I believe the explanation here is the changed spatial transfer function in v2.<br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-bfrjMd2veR0/T75pzxm5_xI/AAAAAAAAHGs/SQ1LDR8_EoM/s1600/ratio_twodhist_40.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="213" src="http://3.bp.blogspot.com/-bfrjMd2veR0/T75pzxm5_xI/AAAAAAAAHGs/SQ1LDR8_EoM/s320/ratio_twodhist_40.png" width="320" /></a></div><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-unXyfhsIL1g/T75pkN6kWkI/AAAAAAAAHGQ/axiiWsEMO0M/s1600/ratio_twodhist_80.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="213" src="http://4.bp.blogspot.com/-unXyfhsIL1g/T75pkN6kWkI/AAAAAAAAHGQ/axiiWsEMO0M/s320/ratio_twodhist_80.png" width="320" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-kJEMLqkaQak/T75pkNu78XI/AAAAAAAAHGM/Dh2T4m0cD-8/s1600/ratio_twodhist_120.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="213" src="http://2.bp.blogspot.com/-kJEMLqkaQak/T75pkNu78XI/AAAAAAAAHGM/Dh2T4m0cD-8/s320/ratio_twodhist_120.png" width="320" /></a><a href="http://4.bp.blogspot.com/-ExDpIxfHO74/T75pkjjeKAI/AAAAAAAAHGk/pU3mE5uzcgM/s1600/ratio_twodhist_sourcemask_nobg.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="213" src="http://4.bp.blogspot.com/-ExDpIxfHO74/T75pkjjeKAI/AAAAAAAAHGk/pU3mE5uzcgM/s320/ratio_twodhist_sourcemask_nobg.png" width="320" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Pru74WRl-Hg/T75pkOL1YWI/AAAAAAAAHGU/qtrMl-w59SA/s1600/ratio_twodhist_sourcemask.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="213" src="http://3.bp.blogspot.com/-Pru74WRl-Hg/T75pkOL1YWI/AAAAAAAAHGU/qtrMl-w59SA/s320/ratio_twodhist_sourcemask.png" width="320" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/23/bgps-v2-pointing/">BGPS V2 Pointing</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-23T17:59:00-06:00" pubdate data-updated="true">May 23<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
BGPS V2.0 pointing offsets relative to V1 and Herschel:   <div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-41YC6GZJR-0/T715bELMplI/AAAAAAAAHE0/Fzk41wW8ysM/s1600/Offsets_CDF.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://4.bp.blogspot.com/-41YC6GZJR-0/T715bELMplI/AAAAAAAAHE0/Fzk41wW8ysM/s320/Offsets_CDF.png" /></a></div>Cumulative Distribution Function of the total offsets.  <div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-9zPWRdGI0jY/T715bmcgVnI/AAAAAAAAHFA/K0XKvlJdO_8/s1600/Offsets_Histogram.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-9zPWRdGI0jY/T715bmcgVnI/AAAAAAAAHFA/K0XKvlJdO_8/s320/Offsets_Histogram.png" /></a></div>Histograms of the total offsets.   <div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-3hkzLY1D4KY/T715b0VfMxI/AAAAAAAAHFM/DDBXKCGu8ng/s1600/Offsets_XYplot.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-3hkzLY1D4KY/T715b0VfMxI/AAAAAAAAHFM/DDBXKCGu8ng/s320/Offsets_XYplot.png" /></a></div>X-offsets vs Y-offsets (X and Y are GLON and GLAT).  The ellipses are centered at the mean of the X/Y offsets and have major and minor axes corresponding to the standard deviations.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/30/getting-rid-of-haloes/">Getting Rid of Haloes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-30T18:28:00-06:00" pubdate data-updated="true">Mar 30<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Haloes are when images look like this: <div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-Hwwiewo9FyU/T3Yhs6TpYcI/AAAAAAAAG0k/uKSTBCn95FY/s1600/Screen%2Bshot%2B2012-03-30%2Bat%2B3.09.54%2BPM.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="132" width="111" src="http://1.bp.blogspot.com/-Hwwiewo9FyU/T3Yhs6TpYcI/AAAAAAAAG0k/uKSTBCn95FY/s320/Screen%2Bshot%2B2012-03-30%2Bat%2B3.09.54%2BPM.png" /></a></div><br />instead of this, as they should:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-t5jVccq9Dtc/T3Yhs-hcY5I/AAAAAAAAG0s/EZ4x0zdSgxw/s1600/Screen%2Bshot%2B2012-03-30%2Bat%2B3.09.58%2BPM.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="141" width="121" src="http://4.bp.blogspot.com/-t5jVccq9Dtc/T3Yhs-hcY5I/AAAAAAAAG0s/EZ4x0zdSgxw/s320/Screen%2Bshot%2B2012-03-30%2Bat%2B3.09.58%2BPM.png" /></a></div><br />Things to try:<br /><ol><li> Pass <code>/return_deconv</code> to deconv_map<br /><li> Pass <code>/linear</code> to deconv_map<br /><li> Disable deconvolve - deconvolve=0<br /></ol>In l123 & l169, at least, <code>/return_deconv</code> worked</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/20/new-coalignment-code/">New Coalignment Code</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-20T09:08:00-06:00" pubdate data-updated="true">Mar 20<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
pixshift has been giving me issues for a long, long time.  It finally came to a head, though, when nothing I did could make l001 &#8220;work&#8221;.  It turns out, when you do cross-correlation analysis, you&#8217;re really only interested in the most correlated pixel, NOT the junk around it - the junk around it only provides a second-order correction.<br /><br />Well, <a href="http://solarmuri.ssl.berkeley.edu/~welsch/public/software/cross_cor_taylor.pro">cross_cor_taylor.pro</a>, a tool from the solar physics community, does exactly that.  And it works far, far better than my hacked-together pixshift code.  A lesson I should always take to heart: don&#8217;t rewrite code if it&#8217;s out there.  Of course, if I&#8217;d known it was out there, I wouldn&#8217;t have rewritten it&#8230;.<br /><br />This is how good it looks now:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/--IDiMhSOWSg/T2idophFD3I/AAAAAAAAGxo/uwPBB9YWwrg/s1600/l029_align_to_reference.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/--IDiMhSOWSg/T2idophFD3I/AAAAAAAAGxo/uwPBB9YWwrg/s320/l029_align_to_reference.png" /></a></div><br /><br /><br />(the circle has radius 6&#8221;, or 1-sigma)</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/30/flow-charts/">Flow Charts</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-30T19:53:00-07:00" pubdate data-updated="true">Dec 30<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Made with <a href="http://code.google.com/p/bgpspipeline/source/browse/bgps_pipeline/documentation/wrap_pipeline_and_log.py"> this code </a> and <a href="www.graphviz.org">graphviz</a>.<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-rbeS36D6fek/Tv55L9HSfVI/AAAAAAAAGrE/VArJAV60nys/s1600/pipeline_v1.0.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="78" width="320" src="http://2.bp.blogspot.com/-rbeS36D6fek/Tv55L9HSfVI/AAAAAAAAGrE/VArJAV60nys/s320/pipeline_v1.0.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-lI_OWOGIVko/Tv55MIfhcdI/AAAAAAAAGrU/MUiQuiBLqrA/s1600/pipeline_v2.0.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="76" width="320" src="http://2.bp.blogspot.com/-lI_OWOGIVko/Tv55MIfhcdI/AAAAAAAAGrU/MUiQuiBLqrA/s320/pipeline_v2.0.png" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/02/calibration-as-good-as-its-gonna-get/">Calibration: As Good as It&#8217;s Gonna Get</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-02T16:14:00-07:00" pubdate data-updated="true">Dec 2<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-JLIm1-8V9pc/TtlaRJP2EoI/AAAAAAAAGoA/-gwCmjybJxs/s1600/newmottecygx2_bgps_iram_comp_linefits_cross.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/-JLIm1-8V9pc/TtlaRJP2EoI/AAAAAAAAGoA/-gwCmjybJxs/s320/newmottecygx2_bgps_iram_comp_linefits_cross.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-FkotaRfI_hk/TtlaR5VW_PI/AAAAAAAAGoM/Hd9yvKq66lU/s1600/newmottecygx2_bgpsv2_iram_comp_linefits_cross.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-FkotaRfI_hk/TtlaR5VW_PI/AAAAAAAAGoM/Hd9yvKq66lU/s320/newmottecygx2_bgpsv2_iram_comp_linefits_cross.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-9xlFisqEq38/TtlaSXvv3ZI/AAAAAAAAGoY/uWvlhTeriuY/s1600/newmottecygx2_bgps_iram_comp_linefits_cross_dr21.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-9xlFisqEq38/TtlaSXvv3ZI/AAAAAAAAGoY/uWvlhTeriuY/s320/newmottecygx2_bgps_iram_comp_linefits_cross_dr21.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-MGx4yVQpxfU/TtlaS9OB3AI/AAAAAAAAGok/aMz1NHI2G9k/s1600/newmottecygx2_bgpsv2_iram_comp_linefits_cross_dr21.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-MGx4yVQpxfU/TtlaS9OB3AI/AAAAAAAAGok/aMz1NHI2G9k/s320/newmottecygx2_bgpsv2_iram_comp_linefits_cross_dr21.png" /></a></div><br />BGPS vs BGPSv2 in Cyg X<br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-JMPVYUkw0nc/Ttla0-Fqn9I/AAAAAAAAGow/9c0IhC4_qlg/s1600/newirdc1_bgps_iram_comp_linefits_cross.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-JMPVYUkw0nc/Ttla0-Fqn9I/AAAAAAAAGow/9c0IhC4_qlg/s320/newirdc1_bgps_iram_comp_linefits_cross.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-knIt9Yw8FJU/Ttla1XeTfmI/AAAAAAAAGo8/d4bNvhfPf6U/s1600/newirdc1_bgpsv2_iram_comp_linefits_cross.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-knIt9Yw8FJU/Ttla1XeTfmI/AAAAAAAAGo8/d4bNvhfPf6U/s320/newirdc1_bgpsv2_iram_comp_linefits_cross.png" /></a></div><br />BGPS vs BGPSv2 in IRDC1 (Rathborne)<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Uw9lPIsA758/TtlbgMzryZI/AAAAAAAAGpI/3OcrHYS-8KA/s1600/testregl44_bgps_s1200_comp_linefits_1.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-Uw9lPIsA758/TtlbgMzryZI/AAAAAAAAGpI/3OcrHYS-8KA/s320/testregl44_bgps_s1200_comp_linefits_1.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-ikkojUChsfY/Ttlbg4BnvJI/AAAAAAAAGpU/-SrRpX1GvMw/s1600/testregl44_bgpsv2_s1200_comp_linefits_1.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/-ikkojUChsfY/Ttlbg4BnvJI/AAAAAAAAGpU/-SrRpX1GvMw/s320/testregl44_bgpsv2_s1200_comp_linefits_1.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-G6PzOBzHmtc/TtlbhbgsEQI/AAAAAAAAGpg/1K630s21FpQ/s1600/testregl44_bgps_s1200_comp_linefits_2.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-G6PzOBzHmtc/TtlbhbgsEQI/AAAAAAAAGpg/1K630s21FpQ/s320/testregl44_bgps_s1200_comp_linefits_2.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-NEnpDAiVatM/Ttlbh7_cTdI/AAAAAAAAGps/FDDMbzdHbBw/s1600/testregl44_bgpsv2_s1200_comp_linefits_2.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-NEnpDAiVatM/Ttlbh7_cTdI/AAAAAAAAGps/FDDMbzdHbBw/s320/testregl44_bgpsv2_s1200_comp_linefits_2.png" /></a></div><br />BGPS vs BGPSv2 in l=44 (comparison is SIMBA, not MAMBO)<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-J27n1Y5t4Ug/TtleWSaYxoI/AAAAAAAAGp4/LuPMX5Iv8E0/s1600/l44_regions.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="98" width="320" src="http://1.bp.blogspot.com/-J27n1Y5t4Ug/TtleWSaYxoI/AAAAAAAAGp4/LuPMX5Iv8E0/s320/l44_regions.png" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/15/calibration-offsets-revisited/">Calibration Offsets Revisited</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-15T17:55:00-07:00" pubdate data-updated="true">Nov 15<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The agreement with Motte et al 2007 is now perfect with a vertical ADDITIVE offset instead of the annoying multiplicative offset. An additive offset can trivially be accounted for by a spatial transfer function. As is evident in the difference images, the MAMBO data appears to sit on a plateau.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-dCeUkoHiAPs/TrwYlSZ2I6I/AAAAAAAAGj8/2FpasBudxPc/s1600/newtestregl44_bgps_s1200_comp_linefits_point.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/-dCeUkoHiAPs/TrwYlSZ2I6I/AAAAAAAAGj8/2FpasBudxPc/s320/newtestregl44_bgps_s1200_comp_linefits_point.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-XWWisYSwoiw/TrwYl-E4uQI/AAAAAAAAGkI/Gu5MxohyxZY/s1600/newtestregl44_bgpsv2_s1200_comp_linefits_point.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/-XWWisYSwoiw/TrwYl-E4uQI/AAAAAAAAGkI/Gu5MxohyxZY/s320/newtestregl44_bgpsv2_s1200_comp_linefits_point.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-flBRCavDJKM/TrwYmZLzifI/AAAAAAAAGkU/D7K7-aG_ZZE/s1600/testregl44_bgps_s1200_comp_origimages_scales1200peak_1.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-flBRCavDJKM/TrwYmZLzifI/AAAAAAAAGkU/D7K7-aG_ZZE/s320/testregl44_bgps_s1200_comp_origimages_scales1200peak_1.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-0i_9U9v37Wc/TrwYm3Ctx4I/AAAAAAAAGkg/xj1xWYI4eLo/s1600/testregl44_bgpsv2_s1200_comp_origimages_scales1200peak_1.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-0i_9U9v37Wc/TrwYm3Ctx4I/AAAAAAAAGkg/xj1xWYI4eLo/s320/testregl44_bgpsv2_s1200_comp_origimages_scales1200peak_1.png" /></a></div><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-Wnys8tmpdnI/TsMFsi04CZI/AAAAAAAAGlc/sXKhoMMDRUM/s1600/newirdc1_bgps_iram_comp_linefits_cross.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-Wnys8tmpdnI/TsMFsi04CZI/AAAAAAAAGlc/sXKhoMMDRUM/s320/newirdc1_bgps_iram_comp_linefits_cross.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-XWRv2iQr_yM/TsMFtHzCWUI/AAAAAAAAGlo/MVvzvsJEv8s/s1600/irdc1_bgps_iram_comp_origimages_scaleirampeak.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-XWRv2iQr_yM/TsMFtHzCWUI/AAAAAAAAGlo/MVvzvsJEv8s/s320/irdc1_bgps_iram_comp_origimages_scaleirampeak.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-2VT-44snbic/TsMFthQNCzI/AAAAAAAAGl0/XJmjYJWlT0A/s1600/newirdc1_bgpsv2_iram_comp_linefits_cross.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-2VT-44snbic/TsMFthQNCzI/AAAAAAAAGl0/XJmjYJWlT0A/s320/newirdc1_bgpsv2_iram_comp_linefits_cross.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-76VOl5ASlas/TsMFuS2tU7I/AAAAAAAAGmA/1GY0DwzsToo/s1600/irdc1_bgpsv2_iram_comp_origimages_scaleirampeak.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-76VOl5ASlas/TsMFuS2tU7I/AAAAAAAAGmA/1GY0DwzsToo/s320/irdc1_bgpsv2_iram_comp_origimages_scaleirampeak.png" /></a></div><br /><br />Cygnus X:<br />BGPSV1:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Ul21t0ucmOs/TsMGdaRI50I/AAAAAAAAGmM/UhJ_mCKRZ4A/s1600/newmottecygx2_bgps_iram_comp_linefits_cross.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-Ul21t0ucmOs/TsMGdaRI50I/AAAAAAAAGmM/UhJ_mCKRZ4A/s320/newmottecygx2_bgps_iram_comp_linefits_cross.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-d_XSGb63vtk/TsMGd7cMs1I/AAAAAAAAGmY/MTL7mFfH9_I/s1600/newmottecygx2_bgps_iram_comp_linefits_cross_2.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-d_XSGb63vtk/TsMGd7cMs1I/AAAAAAAAGmY/MTL7mFfH9_I/s320/newmottecygx2_bgps_iram_comp_linefits_cross_2.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-CKArUxnvfXc/TsMGeY4yP7I/AAAAAAAAGmk/iaRcDy28-8w/s1600/newmottecygx2_bgps_iram_comp_linefits_cross_3.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-CKArUxnvfXc/TsMGeY4yP7I/AAAAAAAAGmk/iaRcDy28-8w/s320/newmottecygx2_bgps_iram_comp_linefits_cross_3.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-cNgOGbIFhzc/TsMGe3d7kZI/AAAAAAAAGmw/kn3Y0M18flM/s1600/newmottecygx2_bgps_iram_comp_linefits_cross_dr21.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-cNgOGbIFhzc/TsMGe3d7kZI/AAAAAAAAGmw/kn3Y0M18flM/s320/newmottecygx2_bgps_iram_comp_linefits_cross_dr21.png" /></a></div><br /><br /><br />BGPSV2:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-cIZHQxLW7t0/TsMGrpLUTcI/AAAAAAAAGm8/PJfhh_Z1Y44/s1600/newmottecygx2_bgpsv2_iram_comp_linefits_cross.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-cIZHQxLW7t0/TsMGrpLUTcI/AAAAAAAAGm8/PJfhh_Z1Y44/s320/newmottecygx2_bgpsv2_iram_comp_linefits_cross.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-55051oTEK34/TsMGrzJL3eI/AAAAAAAAGnI/pd468xeLBxQ/s1600/newmottecygx2_bgpsv2_iram_comp_linefits_cross_2.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-55051oTEK34/TsMGrzJL3eI/AAAAAAAAGnI/pd468xeLBxQ/s320/newmottecygx2_bgpsv2_iram_comp_linefits_cross_2.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-f2BTCfMG5Ao/TsMGsTy98yI/AAAAAAAAGnU/6m30n1cgwgQ/s1600/newmottecygx2_bgpsv2_iram_comp_linefits_cross_3.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-f2BTCfMG5Ao/TsMGsTy98yI/AAAAAAAAGnU/6m30n1cgwgQ/s320/newmottecygx2_bgpsv2_iram_comp_linefits_cross_3.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-ND8KA8OqHpc/TsMGs5pAo0I/AAAAAAAAGng/kkucv9xfINk/s1600/newmottecygx2_bgpsv2_iram_comp_linefits_cross_dr21.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-ND8KA8OqHpc/TsMGs5pAo0I/AAAAAAAAGng/kkucv9xfINk/s320/newmottecygx2_bgpsv2_iram_comp_linefits_cross_dr21.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-8ovlXgU6EIU/TsMMT0wfZ-I/AAAAAAAAGns/dq5Es6kDmE0/s1600/sections.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="259" width="320" src="http://4.bp.blogspot.com/-8ovlXgU6EIU/TsMMT0wfZ-I/AAAAAAAAGns/dq5Es6kDmE0/s320/sections.png" /></a></div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
Check to make sure original fits were/were not forced through 0,0</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/29/bolocat-v1-v2-comparison-with-new/">Bolocat V1-v2 Comparison With New Calibration</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-29T17:41:00-06:00" pubdate data-updated="true">Aug 29<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-c3_0Rlbv2qM/Tl1P5FhWC8I/AAAAAAAAGdc/oiFxmO7vrUU/s1600/total_v1v2_40arcsec_ratio_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-c3_0Rlbv2qM/Tl1P5FhWC8I/AAAAAAAAGdc/oiFxmO7vrUU/s320/total_v1v2_40arcsec_ratio_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-Gk60vlSPkWk/Tl1P5c4THoI/AAAAAAAAGdk/E7zdIwtyD3w/s1600/total_v1v2_40arcsec_fit_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://4.bp.blogspot.com/-Gk60vlSPkWk/Tl1P5c4THoI/AAAAAAAAGdk/E7zdIwtyD3w/s320/total_v1v2_40arcsec_fit_compare.png" /></a></div><br />I re-examined the Bolocat data on l351 after re-running the pipeline with the new calibration curve.  The change wasn&#8217;t all that great.  See <a href="http://bolocam.blogspot.com/2011/08/bolocat-v1-v2-comparison.html"> this post </a> for a brief description of the procedure.<br /><br />In the data below, I&#8217;ve fit the residuals as a function of v1.0.2 flux density in an aperture (source mask) with a line.  The slope of the line should ideally be zero - that would indicate a multiplicative offset is an acceptable correction.  <br /><br />Nicely, in the 40&#8221; aperture case, I see no reason to exclude the m=0 case.  For the most reliable data - the 13pca - the slope is rather small and the &#8220;correction factor&#8221; is disturbingly close to what we recommended (1.5).  We have no right to be that lucky&#8230;<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-W08ZvMS3M90/TlwhPW62NQI/AAAAAAAAGc8/8YRm6iyDPO8/s1600/l351_40arcsec_residualfit.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-W08ZvMS3M90/TlwhPW62NQI/AAAAAAAAGc8/8YRm6iyDPO8/s320/l351_40arcsec_residualfit.png" /></a></div><br /><br />&#8230;and so perhaps wer are not.  The source mask includes more area and therefore is more sensitive to extended flux recovery.  The slopes are not consistent with 0 - just look at the data above and below 2 Jy to see that there is a difference.  The multiplicative correction of 1.5 is decent for a pretty wide range of flux densities, but is inadequate for the brightest sources.  This is somewhat interesting&#8230; it implies that the brightest sources also lie on the highest backgrounds.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-GQBE_MjAxt8/TlwhPveClUI/AAAAAAAAGdE/lohBYlJuHwM/s1600/l351_sourcemask_residualfit.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-GQBE_MjAxt8/TlwhPveClUI/AAAAAAAAGdE/lohBYlJuHwM/s320/l351_sourcemask_residualfit.png" /></a></div><br />You might note that the brightest source has a smaller correction factor in both apertures.  It&#8217;s not clear why that is the case, but I don&#8217;t think it&#8217;s enough to call it a trend yet - wait for the full 8000-source comparison first.<br /><br /><br />Why is there so much scatter?  Not entirely clear, but the scatter is primarily at low S/N.<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-GPKbsfs9Y8k/Tl1OJE43J3I/AAAAAAAAGdM/pVUx9SClgtc/s1600/l351_40arcsec_fit_compare_monochrome.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-GPKbsfs9Y8k/Tl1OJE43J3I/AAAAAAAAGdM/pVUx9SClgtc/s320/l351_40arcsec_fit_compare_monochrome.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-snhh3Bamwc4/Tl1OJXzOYNI/AAAAAAAAGdU/n-rPxs-ZCtI/s1600/l351_40arcsec_ratio_compare_monochrome.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-snhh3Bamwc4/Tl1OJXzOYNI/AAAAAAAAGdU/n-rPxs-ZCtI/s320/l351_40arcsec_ratio_compare_monochrome.png" /></a></div><br />Here are the same for all of the data reduced up to this point:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-oUewyjZc9wU/Tl1QaGPeURI/AAAAAAAAGds/CHx3BtnT9sA/s1600/total_v1v2_sourcemask_fit_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-oUewyjZc9wU/Tl1QaGPeURI/AAAAAAAAGds/CHx3BtnT9sA/s320/total_v1v2_sourcemask_fit_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-n27ucFd82VI/Tl1Qab1kbUI/AAAAAAAAGd0/kwWAceGqo5c/s1600/total_v1v2_sourcemask_ratio_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-n27ucFd82VI/Tl1Qab1kbUI/AAAAAAAAGd0/kwWAceGqo5c/s320/total_v1v2_sourcemask_ratio_compare.png" /></a></div><br /></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/26/final-calibration-curves-yeah-sure/">Final Calibration Curves (Yeah&#8230; Sure)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-26T11:26:00-06:00" pubdate data-updated="true">Aug 26<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve finished rederiving the calibration curves self-consistently.  These will now be applied to the data&#8230;.<br /><br /><br /> <div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-Px-hpKGeiK0/TlfXKrZw3mI/AAAAAAAAGcc/mJH4Yes9K1I/s1600/planet_dcfluxes_05_v2.0_13pca_ds2_defaults_map20.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://4.bp.blogspot.com/-Px-hpKGeiK0/TlfXKrZw3mI/AAAAAAAAGcc/mJH4Yes9K1I/s320/planet_dcfluxes_05_v2.0_13pca_ds2_defaults_map20.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-n2uTCyFEiqQ/TlfXLCd3twI/AAAAAAAAGck/iDls4F3YpKs/s1600/planet_dcfluxes_06_v2.0_13pca_ds2_defaults_map20.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://1.bp.blogspot.com/-n2uTCyFEiqQ/TlfXLCd3twI/AAAAAAAAGck/iDls4F3YpKs/s320/planet_dcfluxes_06_v2.0_13pca_ds2_defaults_map20.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-361ND0Pcic0/TlfXLiczcRI/AAAAAAAAGcs/_RnBjVjrsGY/s1600/planet_dcfluxes_07_v2.0_13pca_ds2_defaults_map20.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://3.bp.blogspot.com/-361ND0Pcic0/TlfXLiczcRI/AAAAAAAAGcs/_RnBjVjrsGY/s320/planet_dcfluxes_07_v2.0_13pca_ds2_defaults_map20.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-Ui00rWxnoiE/TlfXL-jQw_I/AAAAAAAAGc0/9WZG7srlDok/s1600/planet_dcfluxes_09_v2.0_13pca_ds2_defaults_map20.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://1.bp.blogspot.com/-Ui00rWxnoiE/TlfXL-jQw_I/AAAAAAAAGc0/9WZG7srlDok/s320/planet_dcfluxes_09_v2.0_13pca_ds2_defaults_map20.png" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/25/v1-vs-v2-calibration-curves/">V1 vs V2: Calibration Curves</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-25T11:09:00-06:00" pubdate data-updated="true">Aug 25<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Why did we find a factor ~1.8 in <a href="http://bolocam.blogspot.com/2011/08/bolocat-v1-v2-comparison.html">the previous post</a>?  Well, for starters we used a calibration curve that was based off of &#8216;masking&#8217; and other tricky techniques.<br /><br />The calibration curves below are the first ever produced self-consistently, i.e. using the EXACT same pipeline with the EXACT same parameters as the science data.  No hacks were needed to produce these<a href=#asterisk">*</a>.  The recovered Volts/Jy are substantially higher than BGPSv1 and ALSO higher than the curve used about a year ago in an attempt to explain the v1 flux discrepancy.<br /><br />Remember that a higher calibration curve means a LOWER recovered flux.  I haven&#8217;t finished the check, but odds are pretty good that applying these self-consistent cal curves will reduce the v2 data to be about 1.5.<br /><br /> <div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-PRU4LQ5f-C4/TlZ9wpeFBeI/AAAAAAAAGb8/jKdJHtIqV40/s1600/planet_dcfluxes_05_defaults_ds2_v2.0_13pca_map20.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://4.bp.blogspot.com/-PRU4LQ5f-C4/TlZ9wpeFBeI/AAAAAAAAGb8/jKdJHtIqV40/s320/planet_dcfluxes_05_defaults_ds2_v2.0_13pca_map20.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-AIzsETyl69g/TlZ9w50DjBI/AAAAAAAAGcE/h5ggKhH3dO4/s1600/planet_dcfluxes_06_defaults_ds2_v2.0_13pca_map20.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://3.bp.blogspot.com/-AIzsETyl69g/TlZ9w50DjBI/AAAAAAAAGcE/h5ggKhH3dO4/s320/planet_dcfluxes_06_defaults_ds2_v2.0_13pca_map20.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-BNWD4QQ21Ac/TlZ9xZ5eTkI/AAAAAAAAGcM/QOVbum2jXIo/s1600/planet_dcfluxes_07_defaults_ds2_v2.0_13pca_map20.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://4.bp.blogspot.com/-BNWD4QQ21Ac/TlZ9xZ5eTkI/AAAAAAAAGcM/QOVbum2jXIo/s320/planet_dcfluxes_07_defaults_ds2_v2.0_13pca_map20.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-OucWo74b8VY/TlZ9yFIJYQI/AAAAAAAAGcU/IBMs5YLMlYU/s1600/planet_dcfluxes_09_defaults_ds2_v2.0_13pca_map20.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://2.bp.blogspot.com/-OucWo74b8VY/TlZ9yFIJYQI/AAAAAAAAGcU/IBMs5YLMlYU/s320/planet_dcfluxes_09_defaults_ds2_v2.0_13pca_map20.png" /></a></div><br /><div name="asterisk>While no hacks were needed to produce these plots, there were abundant problems.  There are far fewer data points than there should be.  The problems are manifold, but mostly have to do with the PCA scaling (I think).<br /><br />In some cases, the first scan in an observation was wildly variable.  There looked to be an exponential or similar decay (as has been observed in scan turnarounds) at the observation start that took ~3 scans to decay to bring all of the bolometers onto a scaleable curve.  This is a HUGE problem, because the assumption that the dominant signal is atmosphere is badly violated in this situation - the signal becomes electronics-dominated.  The first PCA component is then an ugly step-function.  With these first scans flagged out, the whole problem goes away, but that&#8217;s a painful manual process.  Automating it MAY be possible, but also risky.<br /><br />In other cases, particularly September 4th 2007, the atmosphere appeared to be negligible!  While the atmospheric optical depth probably was not, if it was extraordinarily stable over the course of ~10 minutes, again we experience severe problems.  A stable atmosphere means no atmospheric variation, which means that ACBOLOS is just noise (plus Uranus signal).  Ironically, this is very bad for calibration - it means there is no common signal on which we can calibrate the bolos&#8217; relative sensitivities.  This problem doesn&#8217;t seem to affect science data, probably because there&#8217;s no such thing as 45-minute stable atmosphere (especially when you&#8217;re following rising/setting sources).  If I REALLY need that data, I could snag the relative scalings from a science field and apply them to the cal data&#8230; honestly that&#8217;s not a bad idea in general&#8230; hmm&#8230; Well, we&#8217;ll explore that later if I have time, that will take days to implement.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/22/bolocat-v1-v2-comparison/">Bolocat V1-v2 Comparison</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-22T22:39:00-06:00" pubdate data-updated="true">Aug 22<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
For this experiment, I ran Bolocat on all of the v1 and v2 images using the source masks Erik derived for v1.  I then compared the derived fluxes using both aperture photometry (as defined in bolocat) and the mask sums.<br /><br />First, note that the object_photometry code Erik wrote does NOT do background subtraction - this is important for understanding non-multiplicative offsets between v1 and v2.<br /><br />I fit a 2-parameter model (a line) to the v2 vs v1 plots using two methods.  The simple linear-least-squares method is one we&#8217;re all familiar with, and it gives semi-reasonable results, but is NOT statistically robust when there are errors on both axes.  The other fit method used was Total Least Squares, which is approximately equivalent to Principle Component Analysis with 2 vectors.  It uses components of the singular-value-decomposition to determine the best fit.  The fits returned by TLS should be more robust, though the additive offsets need not be.<br /><br />Conclusion: Our factor of 1.5 looks like it was pretty accurate.  For 40&#8221; apertures, the best fit is ~1.56, which is easily within the error bars.  Luckily, for 40&#8221; apertures, there is no apparent need for an additive offset (I&#8217;m pretty sure the uncertainty on the measured offset is larger than the offset, though statistically that is not the case), which would complicate things.  <br /><br />However, for the source mask, there is a greater scaling factor and a very substantial offset.  This implies that the peaks in v2 are brighter by a large factor, but the backgrounds in v2 are actually lower than in v1 (though please do check my reasoning here).  I&#8217;m really not sure what to make of the difference between source mask and aperture yet, though&#8230; there&#8217;s probably something significant in the source mask being forced to pick positive pixels.  (and peppered pickles)<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-9a-O_TQx3Ek/TlMr1f-nmKI/AAAAAAAAGbs/Tp6UY_vwl_s/s1600/total_v1v2_40arcsec_fit_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-9a-O_TQx3Ek/TlMr1f-nmKI/AAAAAAAAGbs/Tp6UY_vwl_s/s320/total_v1v2_40arcsec_fit_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-zhLxvflZ-30/TlMr1mWy6kI/AAAAAAAAGb0/GH7xSizIjnk/s1600/total_v1v2_sourcemask_fit_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-zhLxvflZ-30/TlMr1mWy6kI/AAAAAAAAGb0/GH7xSizIjnk/s320/total_v1v2_sourcemask_fit_compare.png" /></a></div><br /></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/22/v1-v2-comparison/">V1-v2 Comparison</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-22T22:25:00-06:00" pubdate data-updated="true">Aug 22<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Some positive results.<br /><br />v2 is uniformly higher than v1, but at nearly 1.8, not 1.5.  Some of this could be because of a different calibration curve (which is worth checking on; I&#8217;ll do that later).<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-OJ0dGhlukDI/TkrJp3xJ3CI/AAAAAAAAGaM/2wljUfSwwiM/s1600/v1.0.2_compare_to_v2.0_ds2_deconv_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-OJ0dGhlukDI/TkrJp3xJ3CI/AAAAAAAAGaM/2wljUfSwwiM/s320/v1.0.2_compare_to_v2.0_ds2_deconv_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-JuJNBoV9AFw/TkrJqtQVgYI/AAAAAAAAGaU/SMlGuh16ETs/s1600/v1.0.2_compare_to_v2.0_ds2_deconv_deline_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-JuJNBoV9AFw/TkrJqtQVgYI/AAAAAAAAGaU/SMlGuh16ETs/s320/v1.0.2_compare_to_v2.0_ds2_deconv_deline_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-HIMECvNyofo/TkrJrFOgCeI/AAAAAAAAGac/6T6TTJMx0cM/s1600/v1.0.2_compare_to_v2.0_ds2_deconv_madflag3_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-HIMECvNyofo/TkrJrFOgCeI/AAAAAAAAGac/6T6TTJMx0cM/s320/v1.0.2_compare_to_v2.0_ds2_deconv_madflag3_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-wYf-dSk8NXY/TkrJsINgC7I/AAAAAAAAGak/k6Kn6WbgxWM/s1600/v1.0.2_compare_to_v2.0_ds2_deline_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-wYf-dSk8NXY/TkrJsINgC7I/AAAAAAAAGak/k6Kn6WbgxWM/s320/v1.0.2_compare_to_v2.0_ds2_deline_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-cMEqPyhfKDM/TkrJsmmMEpI/AAAAAAAAGas/ZgwSeLos5QQ/s1600/v1.0.2_compare_to_v2.0_ds2_inversescaleweight_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-cMEqPyhfKDM/TkrJsmmMEpI/AAAAAAAAGas/ZgwSeLos5QQ/s320/v1.0.2_compare_to_v2.0_ds2_inversescaleweight_compare.png" /></a></div><br /><br />While the pixel-to-pixel comparison yields values ~1.75, the aperture photometry is perhaps even more severe:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-2kmy7UjYx-U/TkrX2i9j3KI/AAAAAAAAGbU/WTPdP7p6nHY/s1600/v1.0.2_compare_to_v2.0_ds2_reconv_point.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-2kmy7UjYx-U/TkrX2i9j3KI/AAAAAAAAGbU/WTPdP7p6nHY/s320/v1.0.2_compare_to_v2.0_ds2_reconv_point.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Uhcyj_rCPrY/TkrX2-k72nI/AAAAAAAAGbc/yePgRQO3RCU/s1600/v1.0.2_compare_to_v2.0_ds2_reconv_point2.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-Uhcyj_rCPrY/TkrX2-k72nI/AAAAAAAAGbc/yePgRQO3RCU/s320/v1.0.2_compare_to_v2.0_ds2_reconv_point2.png" /></a></div><br />Those are a difference of a factor of 2.5, which is rather enormous.<br /></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/12/aperture-photometry/">Aperture Photometry</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-12T20:25:00-06:00" pubdate data-updated="true">Aug 12<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>

<br />So the code to add point sources to the maps and perform basic aperture photometry has started working to the point where I can share some results.<div>
<br /></div><div>For maps with no underlying sky structure, only point sources, recovery is very nearly perfect, with PearsonR coefficients essentially equal to 1 until the peak amplitude of the point sources drops below 2.0 (and even then they only drop to ~0.997)</div><div>Below is a sample of the difference residual of output-input flux vs input flux for 40&#8221;, 80&#8221; and 120&#8221; apertures</div><div>
<br /></div><a href="http://2.bp.blogspot.com/-j5k--Oz92T0/TkXiYHLWjQI/AAAAAAAAABc/MnRtjz6hAMo/s1600/exp13_ds2_astrosky_arrang45_srcpeakalpha002.00source_range_00.1_02.0ptsrc_brightness_diffresid.png" onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}"><img src="http://2.bp.blogspot.com/-j5k--Oz92T0/TkXiYHLWjQI/AAAAAAAAABc/MnRtjz6hAMo/s320/exp13_ds2_astrosky_arrang45_srcpeakalpha002.00source_range_00.1_02.0ptsrc_brightness_diffresid.png" border="0" alt="" id="BLOGGER_PHOTO_ID_5640163012222815490" style="display: block; margin-top: 0px; margin-right: auto; margin-bottom: 10px; margin-left: auto; text-align: center; cursor: pointer; width: 320px; height: 320px; " /></a>This may look relatively scattered, but this plot of output flux vs input flux will show just how correlated these are:<div><a href="http://3.bp.blogspot.com/-zL6VyzobtkU/TkXix_KEExI/AAAAAAAAABk/6vYph5jtyM4/s1600/exp13_ds2_astrosky_arrang45_srcpeakalpha002.00source_range_00.1_02.0ptsrc_brightness_lin.png" onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}"><img src="http://3.bp.blogspot.com/-zL6VyzobtkU/TkXix_KEExI/AAAAAAAAABk/6vYph5jtyM4/s320/exp13_ds2_astrosky_arrang45_srcpeakalpha002.00source_range_00.1_02.0ptsrc_brightness_lin.png" border="0" alt="" id="BLOGGER_PHOTO_ID_5640163456746525458" style="cursor: pointer; width: 320px; height: 320px; " /></a>
<br /><div>
<br /></div><div><div>Note that for the blank maps, these are taken from simulations using a power law distribution of point sources from 0.1 to 2.0 Jy in magnitude (if we allow the range to extend above 2.0 Jy, the recoveries become even more closely correlated.</div></div></div><div>
<br /></div><div>As for simulations with background sky structure we see similar patterns for the most part, however a few interesting pieces appear:</div><div>For the 4 different source ranges I ran, the 80&#8221; aperture had the highest pearson r coefficient across all simulations. Generally sitting around 0.95 with the 40&#8221; and 120&#8221; apertures floating from 0.75-0.9. This may be a fluke, however, I need to run more simulations to see if this is reproducible with other seeds.</div><div>
<br /></div><div>Also, in the difference residuals we can clearly see an underrecovery of flux as input flux increases, which we should probably work to quantify, as seen by this example:</div><a href="http://1.bp.blogspot.com/-X4lP1Pl4PLg/TkXka4eio7I/AAAAAAAAABs/RCKTuX14PD8/s1600/exp13_ds2_astrosky_arrang45_atmotest_amp2.0E%252B01_sky00_seed00_peak001.00_smooth_srcpeakalpha002.00source_range_00.1_02.0_wptsrcptsrc_brightness_diffresid.png" onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 320px; height: 320px;" src="http://1.bp.blogspot.com/-X4lP1Pl4PLg/TkXka4eio7I/AAAAAAAAABs/RCKTuX14PD8/s320/exp13_ds2_astrosky_arrang45_atmotest_amp2.0E%252B01_sky00_seed00_peak001.00_smooth_srcpeakalpha002.00source_range_00.1_02.0_wptsrcptsrc_brightness_diffresid.png" border="0" alt="" id="BLOGGER_PHOTO_ID_5640165258839630770" /></a><div>
<br /></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/10/spatial-transfer-function-vs-npca/">Spatial Transfer Function vs. nPCA</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-10T10:29:00-06:00" pubdate data-updated="true">Aug 10<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
A demonstration that the spatial transfer function can be improved to ~80% at ~300 arcseconds by reducing the number of PCA components subtracted.  However, image fidelity and noise backgrounds suffer, so these sorts of maps are probably less ideal for point source extraction.<br /><br />Below:<br /><br> 0 PCA<br /><br> 3 PCA<br /><br> 10 PCA<br /><br> 15 PCA<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-CPZck7lZils/TkKxcMIgsoI/AAAAAAAAGZg/HeZJfzaSewk/s1600/exp15_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_smooth_00pca_median_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-CPZck7lZils/TkKxcMIgsoI/AAAAAAAAGZg/HeZJfzaSewk/s320/exp15_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_smooth_00pca_median_psds.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-ew7CSdNfc3M/TkKxcZb3qDI/AAAAAAAAGZo/_mSPtt6TgG4/s1600/exp15_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_smooth_03pca_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-ew7CSdNfc3M/TkKxcZb3qDI/AAAAAAAAGZo/_mSPtt6TgG4/s320/exp15_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_smooth_03pca_psds.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-NG2yqqzPucM/TkKxcxoM6pI/AAAAAAAAGZw/zocHKlKAO3Q/s1600/exp15_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_smooth_10pca_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://4.bp.blogspot.com/-NG2yqqzPucM/TkKxcxoM6pI/AAAAAAAAGZw/zocHKlKAO3Q/s320/exp15_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_smooth_10pca_psds.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-Y_rIZ33S8QE/TkKxdOlcTAI/AAAAAAAAGZ4/J6kkz5PDasA/s1600/exp15_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_smooth_15pca_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-Y_rIZ33S8QE/TkKxdOlcTAI/AAAAAAAAGZ4/J6kkz5PDasA/s320/exp15_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_smooth_15pca_psds.png" /></a></div><br /></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/05/spatial-transfer-functions-revisit-4/">Spatial Transfer Functions, Revisit 4</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-05T12:56:00-06:00" pubdate data-updated="true">Aug 5<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Last report was a bit of a fiasco.  There were problems all over the place I didn&#8217;t understand.  I still don&#8217;t but I&#8217;ve fixed them.  My best guess at this point is that a pass-by-reference led to an unacceptable modification of an image.  That doesn&#8217;t even make sense - there was no place it could have happened - but, there you have it.<br /><br />So, going through the process step by step.<br /><br />This is the effect of smoothing an image:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-3TabjiWVKm4/Tjs03gqxkxI/AAAAAAAAGXk/BQOH5FvG3CM/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky02_seed00_peak010.00_SMvsNOSM_input_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-3TabjiWVKm4/Tjs03gqxkxI/AAAAAAAAGXk/BQOH5FvG3CM/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky02_seed00_peak010.00_SMvsNOSM_input_psds.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-AWglr2CHB-0/Tjs04fniKDI/AAAAAAAAGXs/MM3RCNu6x10/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky02_seed00_peak010.00_SMvsNOSM_input_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-AWglr2CHB-0/Tjs04fniKDI/AAAAAAAAGXs/MM3RCNu6x10/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky02_seed00_peak010.00_SMvsNOSM_input_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-5yFhvF1iOeY/Tjs1ES7HeuI/AAAAAAAAGX0/T44kJArWn2o/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky02_seed00_peak010.00_SMvsNOSM_input_stf.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/-5yFhvF1iOeY/Tjs1ES7HeuI/AAAAAAAAGX0/T44kJArWn2o/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky02_seed00_peak010.00_SMvsNOSM_input_stf.png" /></a></div><br />Note from the 3rd figure that 100% recovery isn&#8217;t reached until ~700 arcseconds.<br /><br /><br />Next question: What is happening at large spatial scales in the flat-spectrum simulations?<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-Fi2EBFsPFK4/TjtLzkxRxRI/AAAAAAAAGX8/4GoYEwSaaKc/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky07_seed00_peak100.00_smooth_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-Fi2EBFsPFK4/TjtLzkxRxRI/AAAAAAAAGX8/4GoYEwSaaKc/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky07_seed00_peak100.00_smooth_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-P3TEAHevkEY/TjtL0BG8BbI/AAAAAAAAGYE/oC71ZTFTz3k/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky06_seed00_peak100.00_smooth_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/-P3TEAHevkEY/TjtL0BG8BbI/AAAAAAAAGYE/oC71ZTFTz3k/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky06_seed00_peak100.00_smooth_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-g0m5hEHx8QY/TjtL00D3USI/AAAAAAAAGYM/687cgIORovk/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky05_seed00_peak100.00_smooth_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-g0m5hEHx8QY/TjtL00D3USI/AAAAAAAAGYM/687cgIORovk/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky05_seed00_peak100.00_smooth_compare.png" /></a></div><br />No obvious problems there.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-DwXSkiyw2kE/TjtNt7XadiI/AAAAAAAAGYU/trzLma37DgM/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky05_seed00_peak100.00_smooth_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-DwXSkiyw2kE/TjtNt7XadiI/AAAAAAAAGYU/trzLma37DgM/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky05_seed00_peak100.00_smooth_psds.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-Q9ItTP7uQDs/TjtNuILPfLI/AAAAAAAAGYc/w67japCoUpo/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky06_seed00_peak100.00_smooth_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-Q9ItTP7uQDs/TjtNuILPfLI/AAAAAAAAGYc/w67japCoUpo/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky06_seed00_peak100.00_smooth_psds.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-mgWHY8CT3tQ/TjtNuv1jZ-I/AAAAAAAAGYk/Iddg_I2UKjo/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky07_seed00_peak100.00_smooth_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-mgWHY8CT3tQ/TjtNuv1jZ-I/AAAAAAAAGYk/Iddg_I2UKjo/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky07_seed00_peak100.00_smooth_psds.png" /></a></div><br />Hmm, no apparent problem here either, though one might ask why the two curves approach each other in sky05 (alpha=-0.5).<br /><br />So it appears that the reason for the bump up at low frequencies (long wavelengths) must be because of edge effects.  After much hassle, I&#8217;ve addressed that by cropping images.<br /><br />Finally, the averaged results:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-26KmVHKU_QY/Tjw8VVYnkkI/AAAAAAAAGY4/-R-e3mwVwZc/s1600/stfs_bestmodel_fits.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-26KmVHKU_QY/Tjw8VVYnkkI/AAAAAAAAGY4/-R-e3mwVwZc/s320/stfs_bestmodel_fits.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-lPtvV465aLg/Tjw8VhQZXXI/AAAAAAAAGZA/Rib4AX6z75E/s1600/stfs_bestmodels.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-lPtvV465aLg/Tjw8VhQZXXI/AAAAAAAAGZA/Rib4AX6z75E/s320/stfs_bestmodels.png" /></a></div><br /><br /><br />So we&#8217;ve got an Official Spatial Transfer Function.<br /><br />However, of course, we must note that there is a dependence on the atmosphere amplitude to source amplitude ratio: it appears that large-scale structure is *easier* to recover when the atmosphere is at higher amplitude.  This makes sense: it is easier to distinguish faint astrophysical signal from bright atmosphere in this case.  The reason I didn&#8217;t run simulations to test this more is that the S/N ratio on small scales becomes poor for the low astrophysical amplitudes.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/28/stf-measurement-attempts-round-3/">STF Measurement Attempts, Round 3?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-28T23:24:00-06:00" pubdate data-updated="true">Jul 28<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Below are plots of the spatial transfer function for a variety of simulation parameters.  Each line represents the median (i.e., mean of the center 2 of 4) spatial transfer function of 4 realizations of the listed parameters.  <br /><br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-qAq4e3xotf8/TjJCwJb6knI/AAAAAAAAGXA/mv7hs-uKudI/s1600/stfs_atmo01_peak010_smooth.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-qAq4e3xotf8/TjJCwJb6knI/AAAAAAAAGXA/mv7hs-uKudI/s320/stfs_atmo01_peak010_smooth.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-lTKFbV1Zxno/TjJCwluvOXI/AAAAAAAAGXI/fK7qPWDF0Qw/s1600/stfs_atmo10_peak010_smooth.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-lTKFbV1Zxno/TjJCwluvOXI/AAAAAAAAGXI/fK7qPWDF0Qw/s320/stfs_atmo10_peak010_smooth.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-HNLrsuXSrvA/TjJCwx9xEBI/AAAAAAAAGXQ/a0l3Qljyp04/s1600/stfs_atmo10_peak100_smooth.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-HNLrsuXSrvA/TjJCwx9xEBI/AAAAAAAAGXQ/a0l3Qljyp04/s320/stfs_atmo10_peak100_smooth.png" /></a></div><br />A few unfortunate details are apparent:<br /><ol><li> The STF is background dependent, though not strongly<br /><li> The STF appears to never exceed 85%, and be more typically 75%.  If this is not matched by point-source PSDs, an explanation for the flux discrepancy becomes possible<br /><li> The 50% recovery point is much closer in than previously stated, at closer to 150&#8221; than 300&#8221;.  <br /></ol> Note for comparison that the recovery fraction for point sources is much more nearly 1, at least in the calibrator type maps.  We need to wait for Jared&#8217;s simulations with point sources in a full size map to confirm this, but it seems pretty likely that the STF is different for point sources and extended structures.   <div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-n0mH8DTSc80/Tji3c0tOffI/AAAAAAAAGXc/_Xd-AQMo4QU/s1600/psf_ds1_reconv_arrang45_atmotest_noise%252B6.3E-04varyrelscale_amp1.0E%252B00_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-n0mH8DTSc80/Tji3c0tOffI/AAAAAAAAGXc/_Xd-AQMo4QU/s320/psf_ds1_reconv_arrang45_atmotest_noise%252B6.3E-04varyrelscale_amp1.0E%252B00_psds.png" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/27/examining-bolocat/">Examining Bolocat</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-27T16:51:00-06:00" pubdate data-updated="true">Jul 27<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Just in case we were wondering, the V1 bolocat is completely inconsistent with a lognormal distribution, but is perfectly consistent (or&#8230; at least reasonably consistent&#8230;) with a power law distribution.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-kKaOXdf9hW4/TjBRmgiNmqI/AAAAAAAAGUI/4H0KJk70F_o/s1600/bolocat_flux_cdf.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-kKaOXdf9hW4/TjBRmgiNmqI/AAAAAAAAGUI/4H0KJk70F_o/s320/bolocat_flux_cdf.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-3T9mrt5U39E/TjBRm5p7inI/AAAAAAAAGUQ/ARP6EKQDYo0/s1600/bolocat_flux40_cdf.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-3T9mrt5U39E/TjBRm5p7inI/AAAAAAAAGUQ/ARP6EKQDYo0/s320/bolocat_flux40_cdf.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-ytrgQo5XYEg/TjBRndOQqOI/AAAAAAAAGUY/9g--hpa5X0Y/s1600/bolocat_flux80_cdf.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://4.bp.blogspot.com/-ytrgQo5XYEg/TjBRndOQqOI/AAAAAAAAGUY/9g--hpa5X0Y/s320/bolocat_flux80_cdf.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-TqVY1B1uGLw/TjBRnt6uLEI/AAAAAAAAGUg/FhXct0wpEio/s1600/bolocat_flux120_cdf.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-TqVY1B1uGLw/TjBRnt6uLEI/AAAAAAAAGUg/FhXct0wpEio/s320/bolocat_flux120_cdf.png" /></a></div><br />These plots show power-law fits (red) and lognormal fits (blue) to the data (black).  It&#8217;s pretty obvious that the lognormal is a bad fit, but in case you&#8217;re unconvinced, the ks test for the &#8220;source flux&#8221; has a probability 1.6e-7, and it is the highest likelihood by 17 orders of magnitude out of the 4 flux types.<br /><br />By contrast, the simulations are on average (though not uniformly) more consistent with lognormal than powerlaw distributions:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-lpOaHHV3e3Q/TjCTzm9RwFI/AAAAAAAAGWI/o57oH5SfdqE/s1600/simulations_ksvalues_lognormvspowerlaw.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-lpOaHHV3e3Q/TjCTzm9RwFI/AAAAAAAAGWI/o57oH5SfdqE/s320/simulations_ksvalues_lognormvspowerlaw.png" /></a></div><br /><br /><br />Even in those examples where the KS test is slightly more favorable for the powerlaw distribution, the lognormal is a pretty good fit, and the failure points for the two distributions are in about the same place.  The smoothness of the lognormal distribution is required to reproduce the observed distribution.<br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-8_WCGM_8AjM/TjB2tW_JZeI/AAAAAAAAGU4/SDR1guNcNq0/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky07_seed00_peak100.00_smooth_bolocat_cdf.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-8_WCGM_8AjM/TjB2tW_JZeI/AAAAAAAAGU4/SDR1guNcNq0/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky07_seed00_peak100.00_smooth_bolocat_cdf.png" /></a></div><br /><br />Note that the first 4 plots are for the whole BGPS survey.  What about an individual field?  For obvious reasons, I choose l30 again.<br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-vHQoJtAe-vU/TjCIiVcRHsI/AAAAAAAAGVo/04fA4WSCnlA/s1600/bolocat_flux40_L30_cdf.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-vHQoJtAe-vU/TjCIiVcRHsI/AAAAAAAAGVo/04fA4WSCnlA/s320/bolocat_flux40_L30_cdf.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-kIpe2v9_YpQ/TjCIimC8K2I/AAAAAAAAGVw/-o5GZ7DoLOw/s1600/bolocat_flux80_L30_cdf.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-kIpe2v9_YpQ/TjCIimC8K2I/AAAAAAAAGVw/-o5GZ7DoLOw/s320/bolocat_flux80_L30_cdf.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-Shg66Vp6sUI/TjCIi2HEe4I/AAAAAAAAGV4/na0n21atNsI/s1600/bolocat_flux120_L30_cdf.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-Shg66Vp6sUI/TjCIi2HEe4I/AAAAAAAAGV4/na0n21atNsI/s320/bolocat_flux120_L30_cdf.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-R2zq58aXXyI/TjCIjeTdjHI/AAAAAAAAGWA/D3xEDRAgY7M/s1600/bolocat_flux_L30_cdf.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-R2zq58aXXyI/TjCIjeTdjHI/AAAAAAAAGWA/D3xEDRAgY7M/s320/bolocat_flux_L30_cdf.png" /></a></div><br /><br /><br />This gets to be a little more interesting - apparently the &#8220;source flux&#8221; has a tendency to pick up the power-law distributed background structure, since it is consistent with a lognormal (but note that it is also consistent with a powerlaw!  The ks test doesn&#8217;t really say definitively which is better).  Although the fits look bad at high flux, note that this is a log-log plot and therefore the difference in probability is rather small.<br /><br />What does this all indicate?  It&#8217;s not entirely clear whether individual fields are genuinely more lognormally-distributed or whether the number statistics are just worse.  However, even the source flux is consistent with a power-law, while many realizations of the simulations are not.<br /><br />Therefore, we should perform the next logical test - add point sources drawn from a power-law distribution (and a log-normal distribution?) and see what bolocat retrieves.  We can at least say now that the point source contribution cannot be ignored, since there is no power-law distribution that can reproduce the observed bolocat flux distribution.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/18/bolocat-examination-part-1/">Bolocat Examination Part 1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-18T16:59:00-06:00" pubdate data-updated="true">Jul 18<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-RTBSwnk-CX0/TiS6VA5P39I/AAAAAAAAGT0/kB4v_Krbkm0/s1600/bolocatrecovery_inputfiltered.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-RTBSwnk-CX0/TiS6VA5P39I/AAAAAAAAGT0/kB4v_Krbkm0/s320/bolocatrecovery_inputfiltered.png" /></a></div><br />This figure shows the flux recovery of bolocat.  The Y axis shows the Input flux (green) and the Filtered flux (blue/cyan/purple) with a few different large-scale filters.  The red line is the 1-1 line.  Obviously, bolocat doesn&#8217;t recover everything that was there - we removed a lot of flux, so recovery fractions are in the few % range.  However, bolocat does a much better job than the simple filter at recovering positive fluxes.  Therefore, the filter function still isn&#8217;t good enough.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/17/when-things-go-really-really-bad/">When Things Go Really Really Bad</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-17T17:30:00-06:00" pubdate data-updated="true">Jul 17<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-YX2VAOPAHso/TiNwkZ3l1MI/AAAAAAAAGTs/JsOe6JIxpuQ/s1600/whoatrippy.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="142" width="320" src="http://4.bp.blogspot.com/-YX2VAOPAHso/TiNwkZ3l1MI/AAAAAAAAGTs/JsOe6JIxpuQ/s320/whoatrippy.png" /></a></div><br />that&#8217;s all.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/17/open-questions-im-trying-to-answer/">Open Questions I&#8217;m Trying to Answer</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-17T16:58:00-06:00" pubdate data-updated="true">Jul 17<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I still haven&#8217;t dealt with <a href="http://bolocam.blogspot.com/2011/07/additional-problems.html">http://bolocam.blogspot.com/2011/07/additional-problems.html</a>, or essentiall any of <a href="http://bolocam.blogspot.com/2011/07/minor-ongoing-problems.html">http://bolocam.blogspot.com/2011/07/minor-ongoing-problems.html</a>.<br /><br />However, they&#8217;re probably related to this problem:<br /><code><br />% CLEAN_ITER_STRUCT: There were            1 bolometers with high weights:       13.5047 indices:      142 or flagged indices          142<br /></code><br />which indicates that in a simulation in which there can be no outliers (in terms of weight/scale), there is one being rejected as an outlier.  That indicates that weights are being computed incorrectly, despite the fact that scales look right (so far):<br /><code><br />Relsens calibration: Scaled to bolometer #        0<br />% RELSENS_CAL_PCA: There were            0 NAN scales and            0 very low scales<br />% RELSENS_CAL_PCA: Scale Median/Mad:        1.0005510+/-     0.010990833 led to            0 scales set to zero for a total of            0 bad bolos<br />% RELSENS_CAL_PCA: Scales avg+/-std =        1.0007304355062783+/-       0.0103252880998329<br />Relsens calibration: Scaled to bolometer #        0<br />% RELSENS_CAL_PCA: There were            0 NAN scales and            0 very low scales<br />% RELSENS_CAL_PCA: Scale Median/Mad:       0.99955294+/-    0.0093122063 led to            0 scales set to zero for a total of            0 bad bolos<br />% RELSENS_CAL_PCA: Scales avg+/-std =        0.9990063123041220+/-       0.0096663438876613<br /></code></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/15/fourier-transforms-are-not-commutative/">Fourier Transforms Are Not Commutative or Distributive</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-15T14:09:00-06:00" pubdate data-updated="true">Jul 15<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Problem with yesterday&#8217;s work:<br /><pre>A*B = IFT(FT(A)*FT(B))<br />A*B - A*C != IFT(FT(A)*(FT(B)-FT(C)))<br /></pre><br />If instead of yesterday&#8217;s &#8220;bandpass filter&#8221; you use the convolution - convolution &#8216;filter&#8217;, the agreement in real space and most of fourier space is much better:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-dXT8RIHG6iI/TiCeMHu2bBI/AAAAAAAAGTc/NjQaTyJb4cc/s1600/exp12_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_nosmooth_map20filtercompare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-dXT8RIHG6iI/TiCeMHu2bBI/AAAAAAAAGTc/NjQaTyJb4cc/s320/exp12_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_nosmooth_map20filtercompare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-m0DeYyvE0Xg/TiCeM6b_LOI/AAAAAAAAGTk/MwwIbLjhY4Q/s1600/exp12_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_nosmooth_map20filterpsds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-m0DeYyvE0Xg/TiCeM6b_LOI/AAAAAAAAGTk/MwwIbLjhY4Q/s320/exp12_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_nosmooth_map20filterpsds.png" /></a></div><br /><br />though map20 clearly reproduces some structures better (higher) but is overall less powerful than the filtered map.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/14/testing-out-analytic-filter-functions/">Testing Out Analytic Filter Functions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-14T21:03:00-06:00" pubdate data-updated="true">Jul 14<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve attempted to model the spatial filter function as a gaussian (or PSF) plus an inverse gaussian.  i.e., the high-spatial-frequency components are smoothed with the PSF, and the low spatial frequency components are convolved with a (1-gaussian) high-pass filter.<br /><br />First, the mildly good news: With a 300&#8221; FWHM large-scale cutoff, the filter PSD reasonably resembles the iterative map PSD:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-udANxY5rM98/Th-i7hx3qnI/AAAAAAAAGS0/kwoR30ZO5OI/s1600/exp12_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_nosmooth_map20filterpsds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-udANxY5rM98/Th-i7hx3qnI/AAAAAAAAGS0/kwoR30ZO5OI/s320/exp12_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_nosmooth_map20filterpsds.png" /></a></div><br />Luckily, the double-filter goes a very long way in explaining the scale-free flux loss.  In the following diagram, I show the effect of the filter compared to the input map.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-iZtSoQjlzJY/Th-jf6oatlI/AAAAAAAAGS8/p8ZcznsKGpI/s1600/exp12_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_nosmooth_filterpsds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-iZtSoQjlzJY/Th-jf6oatlI/AAAAAAAAGS8/p8ZcznsKGpI/s320/exp12_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_nosmooth_filterpsds.png" /></a></div><br />The filter only recovers about 75% of the flux at ANY wavenumber.  The map does slightly worse at high frequencies, which I can&#8217;t explain yet.<br /><br />These show the recovery fraction of the iterative maps, a gaussian smoothing function with FWHM=33&#8221;, and the mid-pass-filter.  Map20 (no smooth) has a lot of additional &#8220;noise power&#8221; at high spatial frequencies; if it wasn&#8217;t for the telescope filter function, we would apparently have pretty good high-frequency recovery.  Hmph.<br /><br />Note that map20 is higher than the filter at some intermediate frequencies, but quite a bit lower at higher frequencies.  Also note the moderately poor agreement between the &#8216;smoothed&#8217; and &#8216;smoothed (theory)&#8217; lines.  <br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-zhxfyI_XDNY/Th-qZmsMZaI/AAAAAAAAGTE/550ocw2kFx8/s1600/filterfunctions_smoothedx2.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="222" width="320" src="http://4.bp.blogspot.com/-zhxfyI_XDNY/Th-qZmsMZaI/AAAAAAAAGTE/550ocw2kFx8/s320/filterfunctions_smoothedx2.png" /></a></div><br />Finally, look at the comparison between map20 and fiiltered.  The agreement is not bad for positive points; filtered is apparently slightly higher but that can be adjusted.  The problem: the filter forces some structures that are negative or zero to be positive.  For example, look at the feature at 210,300 that is negative in Map20 but positive in Filtered.  In the real (input) map, this feature is lower than its surroundings - it is legitimately negative.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-zH98yuBL7lo/Th-tQIoKYCI/AAAAAAAAGTM/QNqslST6b2c/s1600/exp12_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_nosmooth_map20filtercompare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-zH98yuBL7lo/Th-tQIoKYCI/AAAAAAAAGTM/QNqslST6b2c/s320/exp12_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_nosmooth_map20filtercompare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-bvlju06_ySU/Th-ttpCOuhI/AAAAAAAAGTU/3zoCyl5gCIY/s1600/exp12_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_nosmooth_filtercompare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/-bvlju06_ySU/Th-ttpCOuhI/AAAAAAAAGTU/3zoCyl5gCIY/s320/exp12_ds2_astrosky_arrang45_atmotest_amp5.0E%252B02_sky00_seed00_peak050.00_nosmooth_filtercompare.png" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/13/masked-edge-effects/">Masked Edge Effects?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-13T14:28:00-06:00" pubdate data-updated="true">Jul 13<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I raised the possibility that the ratty edges of a scan could affect the power spectrum measurements, leading to a scale-free power loss.  This doesn&#8217;t appear to happen&#8230; instead, the masking adds some small-scale power and apparently a small amount of large-scale power.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-y7Bh9ngi7mY/Th3_sLpN0VI/AAAAAAAAGSc/4P67rBou5HE/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B00_sky03_seed00_peak010.00_nosmooth_test_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-y7Bh9ngi7mY/Th3_sLpN0VI/AAAAAAAAGSc/4P67rBou5HE/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B00_sky03_seed00_peak010.00_nosmooth_test_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-cg1akcZbUek/Th3_sicaVmI/AAAAAAAAGSk/_4sALFui9kA/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B00_sky03_seed00_peak010.00_nosmooth_test_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-cg1akcZbUek/Th3_sicaVmI/AAAAAAAAGSk/_4sALFui9kA/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B00_sky03_seed00_peak010.00_nosmooth_test_psds.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-y-9SbSCsPqw/Th3_tHJGc8I/AAAAAAAAGSs/suuiw8xvwpQ/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B00_sky03_seed00_peak010.00_nosmooth_test_stf.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/-y-9SbSCsPqw/Th3_tHJGc8I/AAAAAAAAGSs/suuiw8xvwpQ/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B00_sky03_seed00_peak010.00_nosmooth_test_stf.png" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/13/spatial-transfer-functions/">Spatial Transfer Functions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-13T12:54:00-06:00" pubdate data-updated="true">Jul 13<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The majority of the past week has been dedicated to debugging; it looks like cross-scanned simulations finally work.<br /><br />The plot below is a derivation of the spatial transfer function for a number of different intrinsic sky power-law power spectra.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-JyAPg0u9uQ8/Th3kuQh1fpI/AAAAAAAAGRs/pP7o3n9_wds/s1600/Experiment10_AverageRecoveryFunction.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-JyAPg0u9uQ8/Th3kuQh1fpI/AAAAAAAAGRs/pP7o3n9_wds/s320/Experiment10_AverageRecoveryFunction.png" /></a></div><br />Justifying the above plot is essential.<br /><br />First, the very steep power-laws [-3 in the example below] show a recovery fraction &gt;1.  This is simply because their S/N was inadequate - the output power spectrum is nearly flat, but at a level higher than the sky.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-JPBjsLDfP5M/Th3lw5n1xTI/AAAAAAAAGR0/aDeOmMv5s8w/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky00_seed00_peak010.00_nosmooth_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-JPBjsLDfP5M/Th3lw5n1xTI/AAAAAAAAGR0/aDeOmMv5s8w/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky00_seed00_peak010.00_nosmooth_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-LOCDmoLCcZs/Th3lxfnKVzI/AAAAAAAAGR8/9NCM3OroGoM/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky00_seed00_peak010.00_nosmooth_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-LOCDmoLCcZs/Th3lxfnKVzI/AAAAAAAAGR8/9NCM3OroGoM/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky00_seed00_peak010.00_nosmooth_psds.png" /></a></div><br /><br />Second, the most plausible power-laws [-1.5 in the example below] show pretty good recovery (90-95% over the relevant range):<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-MTZ8WGl3ZRc/Th3mMkvv2II/AAAAAAAAGSE/0OO4Te39fPI/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky03_seed00_peak010.00_nosmooth_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-MTZ8WGl3ZRc/Th3mMkvv2II/AAAAAAAAGSE/0OO4Te39fPI/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky03_seed00_peak010.00_nosmooth_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-5IeTZW-ZTAw/Th3mNHPC8gI/AAAAAAAAGSM/WhIWClGWqbo/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky03_seed00_peak010.00_nosmooth_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/-5IeTZW-ZTAw/Th3mNHPC8gI/AAAAAAAAGSM/WhIWClGWqbo/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky03_seed00_peak010.00_nosmooth_psds.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-O6ofm7GaxUI/Th3mNgf29AI/AAAAAAAAGSU/VzQ7aL-yd_E/s1600/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky03_seed00_peak010.00_nosmooth_stf.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-O6ofm7GaxUI/Th3mNgf29AI/AAAAAAAAGSU/VzQ7aL-yd_E/s320/exp10_ds2_astrosky_arrang45_atmotest_amp1.0E%252B01_sky03_seed00_peak010.00_nosmooth_stf.png" /></a></div><br />There are some &#8220;white&#8221; power losses, particularly in the flatter power-spectra.  My best guess is that this has something to do with the relative scales being offset from a mean of 1, but so far all tests to show that that is the cause have in fact shown no problems at all.  What else could cause a scale-independent power loss?  <br /><br />Also, the flat power spectrum (and inverted) aren&#8217;t quite flat because I impose a &#8220;galactic scale height&#8221; on them.  Should I stop doing that?</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/12/additional-problems/">Additional Problems</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-12T13:08:00-06:00" pubdate data-updated="true">Jul 12<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
There are a few cases in the L=30 field that look awful.  050706_o31 probably observed the inside of the dish.  070727_ob6 shows some streaking that I can&#8217;t easily explain&#8230; though it appears that there are some bad bolos that need to get flagged out.  I wonder if that&#8217;s systematic over 070727 observations&#8230;.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/10/minor-ongoing-problems/">[Minor] Ongoing Problems&#8230;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-10T13:41:00-06:00" pubdate data-updated="true">Jul 10<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Since I have many tasks running in parallel, I need to summarize them sometimes&#8230;<br /><br /><ol><li> There are many &#8220;bad&#8221; observations that haven&#8217;t been placed in &#8220;bad&#8221; directories. A list of the error messages generated is here: <a href="http://code.google.com/p/bgpspipeline/wiki/MakingInfiles">Making Infiles wiki</a><br /><li> There may be streaking in the BGPS ds2 images of l030 and l032.  Still trying to re-run cleanly to find out<br /><li> There may be unflagged high-points in l030 and l032.  Also under examination<br /><li> Simulations have been generating bulk-offset outputs; my suspicion was that the relative scales were being set incorrectly because astro dominated atmo, so I bumped up the atmo scale.   The tests have run but I haven&#8217;t examined the outputs<br /><li> V1 sims have shown streaking, possibly because of the previous bullet, but certainly (in part) because cross-scans haven&#8217;t worked<br /></ol></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/28/direct-comparison-of-column-density/">Direct Comparison of Column-density Power Spectra</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-28T22:43:00-06:00" pubdate data-updated="true">Jun 28<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve multiplied the 13CO integrated data cube, the Herschel 500 micron*, and the BGPS v1.0 and v2.0 by the appropriate conversion factor to get the maps into units of column density assuming T=20K and some opacity for the dust maps.  BGPS v1 has been multiplied by the 1.5 &#8220;correction&#8221; factor.<br /><br />* The Herschel maps are arbitrarily scaled; I didn&#8217;t derive an actual column conversion but just guess-and-checked once or twice until I got something pretty close.<br /><br />The power spectra look pretty outstanding:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/--uPAgTvMjkk/TgqcjV9uvhI/AAAAAAAAGO4/cOe1iLuF-H0/s1600/powerspectrum_comparison_512_0x1.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://4.bp.blogspot.com/--uPAgTvMjkk/TgqcjV9uvhI/AAAAAAAAGO4/cOe1iLuF-H0/s320/powerspectrum_comparison_512_0x1.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-1Lupi5MSVpk/TgqcjsPwKFI/AAAAAAAAGPA/D9oNXIHdRtE/s1600/powerspectrum_comparison_512_1x1.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-1Lupi5MSVpk/TgqcjsPwKFI/AAAAAAAAGPA/D9oNXIHdRtE/s320/powerspectrum_comparison_512_1x1.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-P2pC9RDKUic/TgqckFwVQUI/AAAAAAAAGPI/FU8cUUZe7bc/s1600/powerspectrum_comparison_512_2x1.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-P2pC9RDKUic/TgqckFwVQUI/AAAAAAAAGPI/FU8cUUZe7bc/s320/powerspectrum_comparison_512_2x1.png" /></a></div><br />The bumps and wiggles in the 50-200&#8221; range are quite well-matched in Herschel and Bolocam.  Some map edge effects are visible in the Herschel maps, resulting in multi-frequency bumps at small spatial scales.  The Herschel noise floor is also quite evidently lower.  Also noteworthy is that BGPS v1 (scaled up by 1.5) matches the others &#8220;pretty well&#8221; but is a worse match, in general, to the Herschel data than is the BGPS v2.  <br /><br />Here are some zoomed-in plots on the inverse scale:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-ldoGiyzeb2w/TgqhYPqerHI/AAAAAAAAGPQ/E1BFNEhcadw/s1600/powerspectrum_comparison_512_0x1.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-ldoGiyzeb2w/TgqhYPqerHI/AAAAAAAAGPQ/E1BFNEhcadw/s320/powerspectrum_comparison_512_0x1.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-algBRWCXB9E/TgqhYgcwsPI/AAAAAAAAGPY/eSbDDcAYvCk/s1600/powerspectrum_comparison_512_1x1.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-algBRWCXB9E/TgqhYgcwsPI/AAAAAAAAGPY/eSbDDcAYvCk/s320/powerspectrum_comparison_512_1x1.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-36H34cVnAPM/TgqhY7f4kAI/AAAAAAAAGPg/HUWvO9nZwuE/s1600/powerspectrum_comparison_512_2x1.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://4.bp.blogspot.com/-36H34cVnAPM/TgqhY7f4kAI/AAAAAAAAGPg/HUWvO9nZwuE/s320/powerspectrum_comparison_512_2x1.png" /></a></div><br />And finally, the 13CO data is totally unrepresentative of the dust data.  There is very little agreement on any scale.  This may imply that the 13CO and/or dust temperature is too high, as a decreased T_D or T_ex will decrease 13CO column and increase dust column.  However, it also raises a question - on what scales should dust and CO agree?  <br /><br />This is getting into some real science, perhaps.  The shapes of the CO and dust power spectra disagree: the CO is pretty well-fit by a power law, while the dust is not.  What hypotheses can explain this?<br /><ol><li> There is a systematic temperature difference / preference in which CO or dust is hotter on the largest scales.<br /><br>-Dust is probably warmer on larger scales, however CO should be less abundant / more readily dissociated on these largest, most diffuse scales.  CO shouldn&#8217;t exist (or at least, should be underabundant) in regions with high temperature.  Maybe?  This probably needs to be quantified.<br /><li> There is a systematic dust opacity difference on large scales resulting in lower dust emission.<br /><br> -This is almost certainly true: the dust population increases in opacity with age, following OH94.  Dust on the largest spatial scales should not have coagulated / collected ice, leading to a lower opacity on the largest scales<br /><br> -This may also be true even though CO is present: dust coagulation is less efficient than CO formation at n~10^3-10^4 (I think - again, off the cuff, but consistent with OH94)<br /><li> The CO overestimates all scales, either because of incorrect bulk abundance or temperature considerations.  <br /><br> This is problematic&#8230;.. if you drop the CO values at all scales, it becomes deficient in the 50-200 arcsecond range, where the dust measurements agree quite well<br /><li> There is a preferred distance in both images<br /><br> -It is not clear that the observed effects would occur because of this<br /><br> -It is also quite evident from other analyses that there IS a preferred velocity, at least, and it completely dominates all others and has the same shape as the integrated power spectrum.  So a distance effect is most likely ruled out.<br /></ol></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/23/power-spectra-of-13co-and-bolocam/">Power Spectra of 13CO and Bolocam</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-23T16:15:00-06:00" pubdate data-updated="true">Jun 23<span>rd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-3MtYyDWjw5M/TgJ-D2bJHSI/AAAAAAAAGN4/ahpU3EQhXCc/s1600/bgps_v2.0_l030_13pca_map20_powerlaw_fit_grid_512.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-3MtYyDWjw5M/TgJ-D2bJHSI/AAAAAAAAGN4/ahpU3EQhXCc/s320/bgps_v2.0_l030_13pca_map20_powerlaw_fit_grid_512.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Qi9sN4goeRU/TgJ-ETc9zSI/AAAAAAAAGOA/xuBCh6P2eEg/s1600/grs_13CO_mosaic_integ_15-40_powerlaw_fit_grid_512.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-Qi9sN4goeRU/TgJ-ETc9zSI/AAAAAAAAGOA/xuBCh6P2eEg/s320/grs_13CO_mosaic_integ_15-40_powerlaw_fit_grid_512.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-HkLX-iYn-xE/TgJ-E8vfkTI/AAAAAAAAGOI/o4VKOLtGD2Q/s1600/grs_13CO_mosaic_integ_70-87_powerlaw_fit_grid_512.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-HkLX-iYn-xE/TgJ-E8vfkTI/AAAAAAAAGOI/o4VKOLtGD2Q/s320/grs_13CO_mosaic_integ_70-87_powerlaw_fit_grid_512.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-bFamQqeIUYU/TgJ-FgzJWuI/AAAAAAAAGOQ/cRkRgGgjeRM/s1600/grs_13CO_mosaic_integ_87-115_powerlaw_fit_grid_512.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://4.bp.blogspot.com/-bFamQqeIUYU/TgJ-FgzJWuI/AAAAAAAAGOQ/cRkRgGgjeRM/s320/grs_13CO_mosaic_integ_87-115_powerlaw_fit_grid_512.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-JeZkpWsaqB0/TgJ-GWz5PhI/AAAAAAAAGOY/K-Gfk0sOaXk/s1600/herschel_500um_powerlaw_fit_grid_512.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-JeZkpWsaqB0/TgJ-GWz5PhI/AAAAAAAAGOY/K-Gfk0sOaXk/s320/herschel_500um_powerlaw_fit_grid_512.png" /></a></div><br />Examples of power-spectra in the left panel:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-A3CRKX13SQQ/TgNmIfHWUpI/AAAAAAAAGOg/-cQRvrR11eA/s1600/bgps_v2.0_l030_13pca_map20_powerspectrum_512_0x1.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-A3CRKX13SQQ/TgNmIfHWUpI/AAAAAAAAGOg/-cQRvrR11eA/s320/bgps_v2.0_l030_13pca_map20_powerspectrum_512_0x1.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-K8Xb5KaLcbA/TgNmIoPKWgI/AAAAAAAAGOo/3P3E5b2Q3f0/s1600/herschel_500um_powerspectrum_512_0x1.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://2.bp.blogspot.com/-K8Xb5KaLcbA/TgNmIoPKWgI/AAAAAAAAGOo/3P3E5b2Q3f0/s320/herschel_500um_powerspectrum_512_0x1.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-_uIH2k5WxqU/TgNmJCaNLUI/AAAAAAAAGOw/xVupKJbngLs/s1600/grs_13CO_mosaic_integ_0-115_powerspectrum_512_0x1.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-_uIH2k5WxqU/TgNmJCaNLUI/AAAAAAAAGOw/xVupKJbngLs/s320/grs_13CO_mosaic_integ_0-115_powerspectrum_512_0x1.png" /></a></div><br /><br />The BGPS power law is fitted only over the &#8220;valid&#8221; range, which is shown in black.  The BGPS power spectrum agrees pretty well with the Herschel power spectrum.  Both are substantially steeper than (any) of the 13CO power spectra.  Unfortunately, this somewhat calls into question any comparison between the data sets - it seems most likely that 13CO and dust actually trace different mass, particularly since both Herschel and Bolocam show a &#8220;bump&#8221; centered at 6&#8217; (10<sup>-1</sup> image sizes) that is not evident in 13CO.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/07/measuring-preferred-angles-in-herschel/">Measuring Preferred Angles in the Herschel Data on Larger Scales</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-07T16:09:00-06:00" pubdate data-updated="true">Jun 7<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
This is something of a repeat of yesterday&#8217;s exercise, but for Herschel data on larger scales, where filamentation is expected (at different angles?) on a different scale than the Galactic plane.<br /><br />First example: L030 500 microns<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-wtocYOxuJGo/Te6boI6cE7I/AAAAAAAAGNU/f9h0MXIPNh8/s1600/bin_l30_plw_PSD.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-wtocYOxuJGo/Te6boI6cE7I/AAAAAAAAGNU/f9h0MXIPNh8/s320/bin_l30_plw_PSD.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-HlNCVZYyly4/Te6bob1mWLI/AAAAAAAAGNc/Jq6MTJnVyWE/s1600/bin_l30_plw_azprofile.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://4.bp.blogspot.com/-HlNCVZYyly4/Te6bob1mWLI/AAAAAAAAGNc/Jq6MTJnVyWE/s320/bin_l30_plw_azprofile.png" /></a></div><br />There is evidently a preferred direction that is correlated down to the resolution of the map, though the preference is smallest at the smallest scales.  This may simply be a statement that there are more sources along the galactic plane, though, since there really isn&#8217;t any particularly obvious filamentation in the image.<br /><br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-LfWovOR8nBk/Te6bpM-PNTI/AAAAAAAAGNk/T9il85L34p0/s1600/bin_l59_plw_PSD.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://4.bp.blogspot.com/-LfWovOR8nBk/Te6bpM-PNTI/AAAAAAAAGNk/T9il85L34p0/s320/bin_l59_plw_PSD.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-1_7ezH0S6tk/Te6bpokBuYI/AAAAAAAAGNs/AQL0U86N4gw/s1600/bin_l59_plw_azprofile.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://4.bp.blogspot.com/-1_7ezH0S6tk/Te6bpokBuYI/AAAAAAAAGNs/AQL0U86N4gw/s320/bin_l59_plw_azprofile.png" /></a></div><br />In L59, on the other hand, there is at most a very weak preference except at the largest scales corresponding to the Galactic Plane.  This is somewhat interesting because there IS obvious filamentation in the L59 image, but it does not have a preferred direction.  Unfortunately, it is not obvious whether or where filamentation shows up in fourier space if it does not have a preferred direction.  There is no excess at any spatial scale that I can pick out.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/05/hunting-for-preferred-directions/">Hunting for Preferred Directions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-05T21:58:00-06:00" pubdate data-updated="true">Jun 5<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
In our last group meeting, we discussed simulations using filamentary structures.  I&#8217;ve been trying to determine how best to generate random/artificial filamentary structures in images.  The first step in that direction is coming up with a way to measure asymmetries and therefore preferred directions within a real map.  In order to do this, I&#8217;ve had to develop a number of new tools in agpy for azimuthally binned radial profiles and radially-averaged azimuthal profiles (<a href="http://code.google.com/p/agpy/source/browse/trunk/agpy/radialprofile.py">radialprofile.py</a>).<br /><br />Examining real maps is necessary because a simple sinusoidal dependence of the power introduces filamentation along the same directions at ALL scales, which is not obviously (or in some cases, obviously not) the correct solution.  Filaments are observed on large scales, but sometimes there can be &#8216;kinks&#8217; in opposite directions on small scales.<br /><br />So, the map I picked to examine was one with the most flagrantly obvious filamentary structure in it:  the Motte DR 21 MAMBO map.  It was also a choice of convenience because I already had the data on my laptop&#8230;.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-ULjqyt_ofEI/TexIAK9ohhI/AAAAAAAAGM0/eCEys_tFOTA/s1600/MAMBOmap.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="284" width="320" src="http://3.bp.blogspot.com/-ULjqyt_ofEI/TexIAK9ohhI/AAAAAAAAGM0/eCEys_tFOTA/s320/MAMBOmap.png" /></a></div><br />The preferred direction is quite obvious in this map: there is a long filament going up and down the map.  Therefore, the DC component should be substantially higher in one direction than the other.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-X7TY9wPUL7Y/TexIAZ7hH_I/AAAAAAAAGM8/IEkgX500_Os/s1600/MAMBOpsd.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="215" width="320" src="http://1.bp.blogspot.com/-X7TY9wPUL7Y/TexIAZ7hH_I/AAAAAAAAGM8/IEkgX500_Os/s320/MAMBOpsd.png" /></a></div><br />In the power-spectral-density image, it is quite clear that there is a preferred direction, though it is not obvious that the fourier transform is rotated 90 degrees from the image.  My fourier intuition somewhat fails me here&#8230;. I realize that a broad, smooth profile in real space should be narrow and highly peaked in fourier space, but I don&#8217;t fully understand why it effectively spreads out in the perpendicular direction, which I have confirmed that it does with a simple experiment.<br /><br />I also don&#8217;t know what the Shah function is, but it implies a periodic dip in the image at every 1/5th of the image, or every 50 pixels.  <br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-l4qWlj1G42k/TexIAufhjSI/AAAAAAAAGNE/UqagczdWzwA/s1600/MAMBOpowerspectra.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="215" width="320" src="http://2.bp.blogspot.com/-l4qWlj1G42k/TexIAufhjSI/AAAAAAAAGNE/UqagczdWzwA/s320/MAMBOpowerspectra.png" /></a></div><br />These are the power spectra averaged over different angles as labeled.  -15 corresponds to -15 to +15, 15 corresponds to 15 to 45, etc.  The highly peaked 75-105 power spectrum shows the large-scale filamentary profile.  I think the difference in the DC component is actually an artifact of the azimuthal binning process: each pixel can only be assigned one angle, so the DC value isn&#8217;t included in all of them&#8230; I&#8217;ll need to find a workaround for that because it&#8217;s quite deceptive.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-qEWk2rRrwNI/TexIBKn59FI/AAAAAAAAGNM/MXdsiKagpW4/s1600/MAMBOazspectra.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="150" width="320" src="http://4.bp.blogspot.com/-qEWk2rRrwNI/TexIBKn59FI/AAAAAAAAGNM/MXdsiKagpW4/s320/MAMBOazspectra.png" /></a></div><br />The more interesting way to view the data - and perhaps to analyze maps - is to take <i>radial</i> averages in some range of spatial scales and plot the azimuthal dependence.  There is a clear sinusoid at large scales.  The legend shows &#8220;spatial frequency&#8221; in 1/pixel units.  The distribution becomes more even with angle and even changes preferred direction at smaller scales (higher frequencies).<br /><br />Next step is testing different approaches.  I think an added, steeper-power-law component would probably be the best way to start.<br /><br />Another suggestion, courtesy Bruce Elmegreen, is to attempt this sort of asymmetric power law sampling in 3 dimensions (with only 1 or 2 dimensions asymmetric) and then projecting down onto two dimensions.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/05/27/recovery-as-function-of-bolometer-noise_27/">Recovery as a Function of Bolometer Noise Part 2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-27T17:49:00-06:00" pubdate data-updated="true">May 27<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
In the Experiment 7 simulations I was running, I observed greater noise than expected, causing me to question the results of the <a href="http://bolocam.blogspot.com/2011/05/recovery-as-function-of-bolometer-noise.html"> previous post </a>.  I therefore ran Experiment 8, which is the same as Experiment 6 from that post with a larger (320x320) map with a larger step size.  The noise recovery remains linear, but the scaling is quite different - a factor of ~4 instead of ~12.  The step size is the most likely culprit, since an 8x larger step size should result in sqrt(8)~2.8 worse noise per pixel.  <br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-ubZ-9LXWmXQ/TeAdFoOUcZI/AAAAAAAAGMY/bSSwM2JuLyA/s1600/exp8_measurednoise_vs_bolonoiseRMS.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-ubZ-9LXWmXQ/TeAdFoOUcZI/AAAAAAAAGMY/bSSwM2JuLyA/s320/exp8_measurednoise_vs_bolonoiseRMS.png" /></a></div><br />There are some curious / worrisome artifacts that turn up and are evident in the recovery fraction plot.  For the low-noise cases, the middle bolometers get totally flagged out because they are over-weighted (by orders of magnitude).<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-0KKwo1wB6aI/TeAdFz6pTiI/AAAAAAAAGMg/yHGsx8j7WMM/s1600/exp8_recovery_vs_bolonoiseRMS.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-0KKwo1wB6aI/TeAdFz6pTiI/AAAAAAAAGMg/yHGsx8j7WMM/s320/exp8_recovery_vs_bolonoiseRMS.png" /></a></div><br />So I&#8217;m forced to explore via pyflagger.  I will almost certainly need to re-run all experiments after making a change to how weights are computed.<br /><br />Well, it turns out the problem is that those 28 bolos are scaled to zero, even though there is nothing obvious (or even suggestive) in their timestream plots.  This is only true when varyrelscale is off.  Apparently varying the relative scales leads to a different problem.<br /><br />AHA!  The noise is so low that the relative scales are SO well correlated that the signal is enough to cause problems!  A plausible solution is therefore no change to the pipeline, but to add minimal (nominal) noise to the relative scales to increase the MAD so that the others don&#8217;t get flagged out.<br /><br />So I added a 1% variation, which prevented flagging at the scale stage, but there are still some disturbing artifacts in the map:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-TX2_8PsUgdM/TeA4Iu9T5FI/AAAAAAAAGMo/vfEjTGcSBp0/s1600/psf_ds1_reconv_arrang45_atmotest_noise%252B1.0E-03_amp1.0E%252B00_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-TX2_8PsUgdM/TeA4Iu9T5FI/AAAAAAAAGMo/vfEjTGcSBp0/s320/psf_ds1_reconv_arrang45_atmotest_noise%252B1.0E-03_amp1.0E%252B00_compare.png" /></a></div><br />Unfortunately, this problem requires further examination in detail.  Exp 9/10 should probably be gaussians and airys on larger step-size maps, but the solution will require something else, possibly even a change in the pipeline.  On the plus side, I think I can re-run experiment 7 with a factor of 4 instead of 12 scaling for the noise and expect it to work.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/05/26/recovery-as-function-of-bolometer-noise/">Recovery as a Function of Bolometer Noise</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-26T11:45:00-06:00" pubdate data-updated="true">May 26<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
One clear simulation result comes from varying the amplitude of the gaussian noise added to each bolometer&#8217;s timestream for a fixed atmosphere amplitude.  The atmosphere amplitude sets the <i>mean</i> value of the atmosphere timestream.<br /><br />Increased bolometer noise results in decreased recovery of the outer rings of the PSF.  This is demonstrated in that the peak amplitudes remain constant (as long as they are still recovered) while the aperture sums (in 100&#8221; radius apertures) decrease.<br /><br />The simulations were run on a logarithmic spacing from 1e-3 to 1e0.  The 1e0 point is missing because the peak flux wasn&#8217;t recovered by the gaussian fitter.  The model maps don&#8217;t recover the source at all for this run, which is worrisome, since it means there is no iterative process<br /><br />There is a minor concern that some simulations over-recover the peak at high noise, but the effect is at a &lt;1% level so not very worrisome.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-H0j13RdCays/Td6QrP78qWI/AAAAAAAAGMI/X-74WUEgYFE/s1600/exp6_recovery_vs_bolonoiseRMS.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://1.bp.blogspot.com/-H0j13RdCays/Td6QrP78qWI/AAAAAAAAGMI/X-74WUEgYFE/s320/exp6_recovery_vs_bolonoiseRMS.png" /></a></div><br /><br />From the same set of simulations, I derive the pixel RMS of the map (the noise level) derived from a give individual bolometer noise.  The theoretical expectation would be<br /><br>Measured Noise = Input Noise / N(bolometers)<br /><br><i>if</i> the pixel sampling and the timestream sampling were the same (i.e. there were exactly sqrt(nbolos) hits per pixel).  This is not exactly the case, and there are potential additional sources of noise.  Nonetheless, the naive theory appears to be good enough in this simulation:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-ar8f4tdXUkQ/Td6fecs1WoI/AAAAAAAAGMQ/f_PwoxFp4Fo/s1600/exp6_measurednoise_vs_bolonoiseRMS.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="214" width="320" src="http://3.bp.blogspot.com/-ar8f4tdXUkQ/Td6fecs1WoI/AAAAAAAAGMQ/f_PwoxFp4Fo/s320/exp6_measurednoise_vs_bolonoiseRMS.png" /></a></div><br />You can ignore the green/blue points in this plot; they just show that the std. dev. around the source is dominated by the source.  Additionally, there is a noise floor, probably set by an inability to model the point source when the S/N gets to be ~500, preventing convergence of the iterator at a level better than 0.2%.  <br /><br />In short, though, I&#8217;m going to use 1/sqrt(nbolos) to determine the appropriate input noise level in the astro simulations.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/05/24/astrophysical-signal-modeling/">Astrophysical Signal Modeling</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-24T11:39:00-06:00" pubdate data-updated="true">May 24<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Here we finally get into the meat of the simulations.  The goal is to develop realistic - but arbitrary - astrophysical models to run through simulations.<br /><br />The first step is to figure out what a realistic sky looks like.  To this end, I use the HiGal SDP fields, looking only at their power spectra.  They are well represented by a power law with &alpha; = 3 (shown in the dashed black line below).<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-50R2lfaIGrY/TdvZi5tl5VI/AAAAAAAAGLQ/w45OC9dk3Rg/s1600/sdp_psds_powerlaw.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="249" width="320" src="http://2.bp.blogspot.com/-50R2lfaIGrY/TdvZi5tl5VI/AAAAAAAAGLQ/w45OC9dk3Rg/s320/sdp_psds_powerlaw.png" /></a></div><br />Therefore, I&#8217;ve attempted to randomly sample from a similar power law distribution using the following IDL code:<br /><code><br />    dimsize = 512<br /><br />    realpower = realpowers[ii]<br />    imagpower = imagpowers[ii]<br />    imagscale = imagscales[ii]<br />    peakamp = 1.0<br />    noise = 0.03<br />    smoothscale = 2.0<br />    smoothkernel = psf_gaussian(npix=512,ndim=2,fwhm=31.2/7.2/2.0,/normalize)<br />    sigma_gp = 128.0 ; sigma-width of the Galactic Plane (can get more accurate value from Cara's paper)<br /><br />    xx = findgen(dimsize) #  replicate(1.0,dimsize)<br />    yy = findgen(dimsize) ## replicate(1.0,dimsize)<br />    rr = sqrt( (xx-255.5)^2 + (yy-255.5)^2 )<br />    realpart = (rr^realpower) * randomn(seed1,[dimsize,dimsize])<br />    imagpart = ((rr*imagscale)^imagpower) * randomn(seed2,[dimsize,dimsize])*complex(0,1) <br />    fakesky = abs(fft(shift(realpart + imagpart,0,0),1))<br />    expweight = exp(-(yy-255.5)^2/(2.0*sigma_gp^2)) ; most power is in the inner plane<br /><br />    fakesky *= peakamp/max(fakesky)<br />    fakesky_sm = convolve(fakesky,smoothkernel)<br />    fakesky_sm = fakesky_sm*expweight<br />    fakesky_sm += randomn(seed3,[dimsize,dimsize]) * noise<br /></code><br /><br />Since Power is the fourier-transform squared, I&#8217;m using a power-law of &alpha;=1.5 for the &#8220;real&#8221; part of the sampling.  The imaginary part follows a shallower slope to reduce the amount of power in large structures, which didn&#8217;t look quite right (but maybe I should leave both slopes the same?).  With both the same, and without the imaginary part down-scaled, the structure appears too &#8220;cloudy&#8221; and not &#8220;clumpy&#8221; enough.  But back to that later&#8230;<br /><br />The peak amplitude is set by re-scaling the map.  Ideally, we&#8217;d like to see this set by a point source, since that is true in most fields.<br /><br />The noise level should not be included in simulations, but should be used to show the difference between pipeline-leftover noise and gaussian noise on the sky.  i.e., what structures disappear when you just add noise, and what structures are removed by the pipeline.<br /><br />The PSF is simply to smooth out signals that are removed by the telescope beam.  We can replace this with a &#8220;real&#8221; PSF if and when we&#8217;ve come up with a believable one.<br /><br />The noise is added after the smoothing because it should be on a pixel scale rather than a beam scale.<br /><br />Here are some example realizations with different power laws:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-vCy9Lx2RjWw/Tdvs_PO1u6I/AAAAAAAAGLw/cc7cIupQu0U/s1600/exp7_fakesky_sm_realP-1.0_imagP-1.0_imagS01.0_seednum02.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-vCy9Lx2RjWw/Tdvs_PO1u6I/AAAAAAAAGLw/cc7cIupQu0U/s320/exp7_fakesky_sm_realP-1.0_imagP-1.0_imagS01.0_seednum02.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-qpgg2U41r6U/Tdvs_RPxARI/AAAAAAAAGL4/v5exzhhqDew/s1600/exp7_fakesky_sm_realP-1.5_imagP-1.5_imagS01.0_seednum02.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-qpgg2U41r6U/Tdvs_RPxARI/AAAAAAAAGL4/v5exzhhqDew/s320/exp7_fakesky_sm_realP-1.5_imagP-1.5_imagS01.0_seednum02.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-2kUqO9aE8zM/Tdvs_maHaCI/AAAAAAAAGMA/u5bDCfiVuH0/s1600/exp7_fakesky_sm_realP-2.0_imagP-2.0_imagS01.0_seednum02.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-2kUqO9aE8zM/Tdvs_maHaCI/AAAAAAAAGMA/u5bDCfiVuH0/s320/exp7_fakesky_sm_realP-2.0_imagP-2.0_imagS01.0_seednum02.png" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/05/21/psf-modeling/">PSF Modeling</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-21T19:19:00-06:00" pubdate data-updated="true">May 21<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
There haven&#8217;t been many posts recently because I&#8217;ve primarily been writing up old results into the v2 paper.<br /><br />The Airy and Gaussian simulations with and without atmosphere seem to have yielded their results.  There is a ~5% loss when mapping Airy-disk point sources.  This is fine as long as it&#8217;s quantified; it just means that when calibrating we need to know whether extended sources are similarly truncated.  If all sources lose 5% in the pipeline, there will be no net offset.<br /><br />However, the Airy is not necessarily representative of the CSO&#8217;s PSF.  <br /><br />In order to come up with a more reasonable representation of the PSF, I&#8217;ve attempted to fit the *measured* PSF (from James&#8217; paper) with an Airy disk.  The first sidelobe has a lot more amplitude and is closer to the peak than in an Airy disk.  It is also asymmetric, but I&#8217;m ignoring that for the moment.<br /><br />To better represent the first sidelobe, I&#8217;ve fitted a modified Airy function.  The &#8220;modification&#8221; is to fit two Airy functions, one to the peak and one to the rest.  This is accomplished by setting everything outside the first null to zero in the first function, and everything inside the first null to zero in the second.  The centers are the same, but the amplitudes and widths are independent.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Vd8eey7FX4Q/TdhiEsk-FhI/AAAAAAAAGLA/ekzBJL8oNoE/s1600/airy_modified_comparison.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="215" width="320" src="http://3.bp.blogspot.com/-Vd8eey7FX4Q/TdhiEsk-FhI/AAAAAAAAGLA/ekzBJL8oNoE/s320/airy_modified_comparison.png" /></a></div><br />The above image shows the best fit Airy and modified Airy, both in log scale on an identical grid.  The modeled PSF was then put through the pipeline to see it recovers the pipeline-derived PSF.  The radial profile results are below, but note that this is only one particular realization of the simulation + pipeline.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-sxL-QjhRxUE/TdhidbXuAKI/AAAAAAAAGLI/NX9LdWqu4nM/s1600/PSF_fit_plot_pipelinecompare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="215" width="320" src="http://2.bp.blogspot.com/-sxL-QjhRxUE/TdhidbXuAKI/AAAAAAAAGLI/NX9LdWqu4nM/s320/PSF_fit_plot_pipelinecompare.png" /></a></div><br /><br />Note that the model matches the first sidelobe in the &#8220;observed&#8221; PSF pretty well, but both before and after pipeline processing, overpredicts the second sidelobe.  <br /><br /><br />There are a few &#8220;action items&#8221; remaining for this task:<br /><ol><li> Re-derive the &#8220;observed&#8221; PSF using V2.  Does it vary with epoch?  Source?  <br /><li> Find a model that better recovers the observed PSF<br /></ol><br />Any thoughts on better models to use?  Does this seem like a good idea at all?</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/04/27/azimuthal-averages/">Azimuthal Averages</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-27T13:45:00-06:00" pubdate data-updated="true">Apr 27<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
We noted in discussion yesterday that the aperture sum in the (nearly perfectly recovered) is lower than expected even for a gaussian fit of an airy.  A Gaussian approximation to an Airy should recover 93.5% of the flux; 6.5% of the power is in the sidelobes of an Airy disk.  We recover about 86-88% of the flux in the input point-source map, or about 5-7% short, despite matching the peak to within 2-3%.  This discrepancy is partly - but not completely - explained by a slight negative bowl effect: the Gaussian fit has a higher total flux than the aperture sum.  Using the gaussian fit value, the recovery is about 90%.  A mere 3% missing flux is not too much of a problem - it could still be that the gaussian is uniformly reduced by bowl effects, or perhaps that some flux is not reincorporated into the map (at a very low level) because it is correlated enough to be PCA-cleaned.<br /><br />In the figure, the top panel is the radial profile of the ds1 data (black), the input data (red), and their gaussian fits (see legend).  The circles on the labeled images show the FWHM of the fitted gaussian, indicating a good fit.  The apertures used for summation are NOT displayed. The sum aperture has a radius of 90&#8221; (6.25 pixels) and the &#8220;Noise Aperture&#8221; has the same area as the sum aperture.<br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-nvXzUBHvsmE/TbhaQabluMI/AAAAAAAAGKc/Ks16AZ70fe0/s1600/exp2_amp1.0E%252B01_map20_ds1inputcompare_point.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/-nvXzUBHvsmE/TbhaQabluMI/AAAAAAAAGKc/Ks16AZ70fe0/s320/exp2_amp1.0E%252B01_map20_ds1inputcompare_point.png" /></a></div><br />If we redo the analysis with a smaller aperture, the recovery is better: 95% in the central 45&#8221;.  However, now the airy ring cannot account for any lost flux, so it still looks like there&#8217;s a 5% loss intrinsic in the pipeline.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-mqisozGUA2c/Tbhx5wk04WI/AAAAAAAAGKk/AIxGRnDMZBM/s1600/exp2_amp1.0E%252B01_map20_ds1inputcompare_point.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/-mqisozGUA2c/Tbhx5wk04WI/AAAAAAAAGKk/AIxGRnDMZBM/s320/exp2_amp1.0E%252B01_map20_ds1inputcompare_point.png" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/04/26/ds1-ds5-comparisons/">Ds1-ds5 Comparisons</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-26T15:54:00-06:00" pubdate data-updated="true">Apr 26<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;m comparing simulated ds1-ds5 to real ds1-ds5 comparison tests.<br /><br />In the simulated tests, I compare the recovered map after 20 iterations with 13 pca components subtracted to the input map.  There are figures showing this comparison for ds1 and ds5 images in addition to one showing the comparison between ds1 and ds5.  The agreement is pretty much as good as you could ask for.<br /><br />These simulations are the most realistic run yet.  They include a simulated atmosphere that is perfectly correlated between all bolometers excepting gaussian noise, but the relative sensitivity of the bolometers is varied.  <br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-xZqAo2n84iE/TbcsrsLkkaI/AAAAAAAAGIM/J_4xWIOGoCQ/s1600/exp2_varyrelscale_amp1.0E-01_map20_ds1ds5compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-xZqAo2n84iE/TbcsrsLkkaI/AAAAAAAAGIM/J_4xWIOGoCQ/s320/exp2_varyrelscale_amp1.0E-01_map20_ds1ds5compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-G7ks6aygM8w/TbcssORKmqI/AAAAAAAAGIU/aFrSrgTEhc4/s1600/airy_test_ds1_reconv_arrang45_atmotest_varyrelscale_amp1.0E-01_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-G7ks6aygM8w/TbcssORKmqI/AAAAAAAAGIU/aFrSrgTEhc4/s320/airy_test_ds1_reconv_arrang45_atmotest_varyrelscale_amp1.0E-01_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-MemhZbvFgYw/Tbcssv4s06I/AAAAAAAAGIc/8aSHBsnKHuU/s1600/airy_test_ds5_reconv_arrang45_atmotest_amp1.0E-01_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-MemhZbvFgYw/Tbcssv4s06I/AAAAAAAAGIc/8aSHBsnKHuU/s320/airy_test_ds5_reconv_arrang45_atmotest_amp1.0E-01_compare.png" /></a></div><br />This is what a &#8216;real&#8217; ds1-ds5 comparison looks like.  The image shown is a &#8220;cross-linked&#8221; observation of Uranus with downsampling off and on.  Note that downsampling clearly and blatantly smears the source flux.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-UvoCV4PvBcM/TbcstPbA_5I/AAAAAAAAGIk/S1cPsnCGmvc/s1600/091219_o15-6_ds5_uranus_indivtest_reconv_ds1ds5compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/-UvoCV4PvBcM/TbcstPbA_5I/AAAAAAAAGIk/S1cPsnCGmvc/s320/091219_o15-6_ds5_uranus_indivtest_reconv_ds1ds5compare.png" /></a></div><br />The same image with &#8220;beam location correction&#8221; looks no better.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-ab27Av_tJB4/Tbcu3Jp0x6I/AAAAAAAAGIs/xUjzxFEVYXI/s1600/091219_o15-6_ds5_uranus_indivtest_reconvBL_ds1ds5compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/-ab27Av_tJB4/Tbcu3Jp0x6I/AAAAAAAAGIs/xUjzxFEVYXI/s320/091219_o15-6_ds5_uranus_indivtest_reconvBL_ds1ds5compare.png" /></a></div><br /><br />The problem is essentially the same with the individual scan directions:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-WwNjh1U-xu0/TbcyTyab16I/AAAAAAAAGI0/oO1fOiY4Bow/s1600/091219_o16_ds1_uranus_indivtest_reconv_ds1ds5compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-WwNjh1U-xu0/TbcyTyab16I/AAAAAAAAGI0/oO1fOiY4Bow/s320/091219_o16_ds1_uranus_indivtest_reconv_ds1ds5compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-k2U0rWMtcH8/TbcyUxfGrfI/AAAAAAAAGI8/ErLepYPyYJE/s1600/091219_o15_ds1_uranus_indivtest_reconv_ds1ds5compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-k2U0rWMtcH8/TbcyUxfGrfI/AAAAAAAAGI8/ErLepYPyYJE/s320/091219_o15_ds1_uranus_indivtest_reconv_ds1ds5compare.png" /></a></div><br /><br />What is causing this difference?<br /><ul><li> higher-order corrections to the atmosphere calculation?<br /><li> inadequate sampling of the model?<br /><li> &#8220;pointing&#8221; offsets between the model and the data (note that these are NOT pointing offsets, but they may be &#8220;distortion map&#8221; offsets)?<br /><li> Other?<br /></ul>Examining the weights and scales for two individual (real) observations, ds1 followed by ds5, is not particularly telling; there is one additional outlier bolometer flagged out in the ds1 observation, but there is nothing obviously wrong with that bolometer (it may have much lower high-frequency noise than others).  <div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-FQGo3OPClLw/Tbc5gVqn-1I/AAAAAAAAGJE/RSmGgDcDSK0/s1600/091219_o15-6_ds1_uranus_indivtest_reconv091219_o15_raw_ds1.nc_indiv13pca_weights_iter10.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://2.bp.blogspot.com/-FQGo3OPClLw/Tbc5gVqn-1I/AAAAAAAAGJE/RSmGgDcDSK0/s320/091219_o15-6_ds1_uranus_indivtest_reconv091219_o15_raw_ds1.nc_indiv13pca_weights_iter10.png" /></a></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-M0u4dlKj5IM/Tbc5g7PQ5YI/AAAAAAAAGJM/njdiKaENlzI/s1600/091219_o15-6_ds5_uranus_indivtest_reconv091219_o15_raw_ds5.nc_indiv13pca_weights_iter10.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://1.bp.blogspot.com/-M0u4dlKj5IM/Tbc5g7PQ5YI/AAAAAAAAGJM/njdiKaENlzI/s320/091219_o15-6_ds5_uranus_indivtest_reconv091219_o15_raw_ds5.nc_indiv13pca_weights_iter10.png" /></a></div>  The simulations actually have more discrepant weights, but that doesn&#8217;t seem to cause any problems: <div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-pL-VkELw7g4/Tbc7OrD5d6I/AAAAAAAAGJU/zCB9wyF09_g/s1600/airy_test_ds1_reconv_arrang45_atmotest_varyrelscale_amp1.0E-01_weights_iter20.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://1.bp.blogspot.com/-pL-VkELw7g4/Tbc7OrD5d6I/AAAAAAAAGJU/zCB9wyF09_g/s320/airy_test_ds1_reconv_arrang45_atmotest_varyrelscale_amp1.0E-01_weights_iter20.png" /></a></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-D0GDZ-wq0ZY/Tbc7PIM2pQI/AAAAAAAAGJc/38Edm0ufAs4/s1600/airy_test_ds5_reconv_arrang45_atmotest_varyrelscale_amp1.0E-01_weights_iter20.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://4.bp.blogspot.com/-D0GDZ-wq0ZY/Tbc7PIM2pQI/AAAAAAAAGJc/38Edm0ufAs4/s320/airy_test_ds5_reconv_arrang45_atmotest_varyrelscale_amp1.0E-01_weights_iter20.png" /></a></div> The timestreams both have similar artifacts: <div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-S_3X_HkqzF4/Tbc7v7rrs4I/AAAAAAAAGJk/y0Wkwo3JYhg/s1600/091219_o15-6_ds1_uranus_indivtest_reconv091219_o15_raw_ds1.nc_indiv13pcatimestream004_plots_10_bolo12.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://4.bp.blogspot.com/-S_3X_HkqzF4/Tbc7v7rrs4I/AAAAAAAAGJk/y0Wkwo3JYhg/s320/091219_o15-6_ds1_uranus_indivtest_reconv091219_o15_raw_ds1.nc_indiv13pcatimestream004_plots_10_bolo12.png" /></a></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-lg_Z50_vocc/Tbc7wZXRUlI/AAAAAAAAGJs/fcuf9u241QE/s1600/091219_o15-6_ds5_uranus_indivtest_reconv091219_o15_raw_ds5.nc_indiv13pcatimestream004_plots_10_bolo12.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://4.bp.blogspot.com/-lg_Z50_vocc/Tbc7wZXRUlI/AAAAAAAAGJs/fcuf9u241QE/s320/091219_o15-6_ds5_uranus_indivtest_reconv091219_o15_raw_ds5.nc_indiv13pcatimestream004_plots_10_bolo12.png" /></a></div> while the simulated versions really don&#8217;t:  <div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-cG1uUEY_N9M/Tbc-ZJtPVzI/AAAAAAAAGJ0/VGcWV0JYtxQ/s1600/airy_test_ds1_reconv_arrang45_atmotest_varyrelscale_amp1.0E-01timestream011_plots_20_bolo07.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://1.bp.blogspot.com/-cG1uUEY_N9M/Tbc-ZJtPVzI/AAAAAAAAGJ0/VGcWV0JYtxQ/s320/airy_test_ds1_reconv_arrang45_atmotest_varyrelscale_amp1.0E-01timestream011_plots_20_bolo07.png" /></a></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-4KA5jSCQgsY/Tbc-ZhvL_lI/AAAAAAAAGJ8/brh-nGwSses/s1600/airy_test_ds5_reconv_arrang45_atmotest_varyrelscale_amp1.0E-01timestream011_plots_20_bolo07.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://3.bp.blogspot.com/-4KA5jSCQgsY/Tbc-ZhvL_lI/AAAAAAAAGJ8/brh-nGwSses/s320/airy_test_ds5_reconv_arrang45_atmotest_varyrelscale_amp1.0E-01timestream011_plots_20_bolo07.png" /></a></div> This is true even when the relative strength of the atmosphere is higher: <div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-2MZXbARZeWo/Tbc-xHG3bOI/AAAAAAAAGKE/yEiYQ8YqqkU/s1600/airy_test_ds1_reconv_arrang45_atmotest_varyrelscale_amp1.0E%252B00timestream011_plots_20_bolo07.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://1.bp.blogspot.com/-2MZXbARZeWo/Tbc-xHG3bOI/AAAAAAAAGKE/yEiYQ8YqqkU/s320/airy_test_ds1_reconv_arrang45_atmotest_varyrelscale_amp1.0E%252B00timestream011_plots_20_bolo07.png" /></a></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-Lr1QqlLNc20/Tbc-xhLCH3I/AAAAAAAAGKM/N1GKh-hZZ-Q/s1600/airy_test_ds5_reconv_arrang45_atmotest_varyrelscale_amp1.0E%252B00timestream011_plots_20_bolo07.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://2.bp.blogspot.com/-Lr1QqlLNc20/Tbc-xhLCH3I/AAAAAAAAGKM/N1GKh-hZZ-Q/s320/airy_test_ds5_reconv_arrang45_atmotest_varyrelscale_amp1.0E%252B00timestream011_plots_20_bolo07.png" /></a></div><br /><br />I think the most viable candidate is the &#8216;pointing offset&#8217; idea, which will take a little work to simulate properly&#8230;</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/04/19/weighting-and-scaling/">Weighting and Scaling</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-19T18:51:00-06:00" pubdate data-updated="true">Apr 19<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The &#8220;simple&#8221; relative sensitivity calibration was causing serious problems.<br /><br />The assumed model for a &#8220;gain&#8221; $G$, timestream $S$, and reference timestream $R$ is:<br />$S = G R$<br /><br />Naively, one would assume that something like<br />$G = median(S/R)$<br />would work.  However, it doesn&#8217;t.  The distribution of $G$ values looks like:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-A3u4lJpkgtM/Ta4jA5BIwiI/AAAAAAAAGH4/fRg_ExqMVHw/s1600/GainValues_Simple.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="194" width="320" src="http://4.bp.blogspot.com/-A3u4lJpkgtM/Ta4jA5BIwiI/AAAAAAAAGH4/fRg_ExqMVHw/s320/GainValues_Simple.png" /></a></div><br /><br /><br />Note that this is true <b> no matter what reference bolometer you use </b>.  I&#8217;ve monte-carlo tested this and shown that the ratio $S/R&lt;1$ for all bolometers.  This is actually a well-understood phenomenon if you look at, e.g., Wall and Jenkins section on linear least squares.  If both X and Y values are gaussian-distributed quantities, the linear-least-squares solution is not ideal.  Similarly, but more confusing to me, is that the min($\chi^2$) is not a correct solution either, probably because you&#8217;re minimizing with respect to only one variable.<br /><br />The solution is Principal Component Analysis.  The most correlated component is pretty much the atmosphere (not exactly, but we&#8217;ll deal with that later).  The important thing is that the first row of the eigenvectors gives the relative scaling of each timestream to that most correlated component.  Actually the meaning has to be more carefully defined than that, but I can&#8217;t figure it out right now.  However, it looks like the relative scales come out as expected if you scale to a bolometer based on the first row (column?) of eigenvectors corresponding to the most correlated component.<br /><br />Using PCA and the correct scaling, the results are very pretty, i.e. perfect recovery:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-W7O1lULkZFo/Ta4qYfOn66I/AAAAAAAAGIA/eB-08uNfG-4/s1600/Gains_PCA.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="194" width="320" src="http://1.bp.blogspot.com/-W7O1lULkZFo/Ta4qYfOn66I/AAAAAAAAGIA/eB-08uNfG-4/s320/Gains_PCA.png" /></a></div><br />So&#8230; now on to the tests of everything ever&#8230;</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/04/19/sampling-causes-problems-rd-2/">Sampling Causes Problems: Rd 2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-19T11:39:00-06:00" pubdate data-updated="true">Apr 19<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Proof that a well-sampled timestream / gaussian is recovered better than a poorly sampled one:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-PVt1suBQt3s/Ta3EQqypzAI/AAAAAAAAGG4/ap-3_SKjigI/s1600/airy_test_superres_ds1_smallpix_sn100timestream012_plots_16_bolo12.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://3.bp.blogspot.com/-PVt1suBQt3s/Ta3EQqypzAI/AAAAAAAAGG4/ap-3_SKjigI/s320/airy_test_superres_ds1_smallpix_sn100timestream012_plots_16_bolo12.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-HMr4DXKBVMY/Ta3GE49GmcI/AAAAAAAAGHA/ULLRUq_IWn8/s1600/airy_test_superres_ds1_sn100timestream012_plots_20_bolo12.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://1.bp.blogspot.com/-HMr4DXKBVMY/Ta3GE49GmcI/AAAAAAAAGHA/ULLRUq_IWn8/s320/airy_test_superres_ds1_sn100timestream012_plots_20_bolo12.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-ujL_h0j-Gms/Ta3GWwcEttI/AAAAAAAAGHI/4uVLXXXhtqc/s1600/airy_test_superres_ds1_smallpix_sn100_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-ujL_h0j-Gms/Ta3GWwcEttI/AAAAAAAAGHI/4uVLXXXhtqc/s320/airy_test_superres_ds1_smallpix_sn100_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-r98h73qcMKY/Ta3GXBKAT3I/AAAAAAAAGHQ/k3y8j427TC0/s1600/airy_test_superres_ds1_sn100_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-r98h73qcMKY/Ta3GXBKAT3I/AAAAAAAAGHQ/k3y8j427TC0/s320/airy_test_superres_ds1_sn100_compare.png" /></a></div><br />These aren&#8217;t really the most convincing, since the flux loss is only 1-8% depending on how you count.  The atmosphere-included ones have larger flux loss, which is important to understand&#8230; WHY does the added noise INCREASE the flux loss? <br /><br /><br />Ugh, unfortunately, there is a perfect counter-example.  The first image shows a timestream in which the input map is sampled by 7.2&#8221; pixels, which is just shy of nyquist sampling the 1-sigma width of the gaussian (but is fine for the FWHM of the gaussian).  The second shows 3.6&#8221; sampling of the same.  No improvement.  The third, very surprisingly, shows significant improvement - but this was an experiment in which the relative scales were allowed to vary.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-NIwHLJT2SOw/Ta3IAGQA4HI/AAAAAAAAGHY/N3Oju7RHhRE/s1600/airy_test_ds1_reconv_arrang45_atmotest_amp1.0E-01timestream011_plots_20_bolo07.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://4.bp.blogspot.com/-NIwHLJT2SOw/Ta3IAGQA4HI/AAAAAAAAGHY/N3Oju7RHhRE/s320/airy_test_ds1_reconv_arrang45_atmotest_amp1.0E-01timestream011_plots_20_bolo07.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-Qo8-kSCFMCc/Ta3IATO7P1I/AAAAAAAAGHg/Jx9ufNhabiE/s1600/airy_test_ds1_reconv_arrang45_atmotest_smallpix_amp1.0E-01timestream011_plots_20_bolo07.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://4.bp.blogspot.com/-Qo8-kSCFMCc/Ta3IATO7P1I/AAAAAAAAGHg/Jx9ufNhabiE/s320/airy_test_ds1_reconv_arrang45_atmotest_smallpix_amp1.0E-01timestream011_plots_20_bolo07.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-6PlqmOsDRFY/Ta3IA00cfBI/AAAAAAAAGHo/t5b2jddw5Lw/s1600/airy_test_ds1_reconv_arrang45_atmotest_varyrelscale_amp1.0E-01timestream011_plots_20_bolo07.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://3.bp.blogspot.com/-6PlqmOsDRFY/Ta3IA00cfBI/AAAAAAAAGHo/t5b2jddw5Lw/s320/airy_test_ds1_reconv_arrang45_atmotest_varyrelscale_amp1.0E-01timestream011_plots_20_bolo07.png" /></a></div><br /><br />The first two each had one high-weight bolometer rejected, the last had 12 high-weight bolos rejected.  So that&#8217;s problably the problem&#8230;.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
It is somewhat clear that sampling isn&#39;t causing huge issues in the sense I was imagining&#8230; the highest pixel ranges from 0.98 to 1.04 depending on how the PSF is made anyway, so 5% errors are totally unavoidable.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/04/18/sampling-causes-problems/">Sampling Causes Problems</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-18T17:39:00-06:00" pubdate data-updated="true">Apr 18<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
One of the simplest experiments that can be run is a point-source observed in point-scan mode, i.e. with smaller step-sizes.  I&#8217;ve done this for an Airy disk with noise added in the image plan but not atmosphere (some noise is necessary to avoid bizarre artifacts with weighting when you have truly zero signal and zero noise).  At a S/N of 500, the noise is pretty minimal, though.<br /><br />It turns out for the &#8216;noiseless&#8217; images, the PCA cleaning is the issue&#8230; curiously, it varies significantly with iteration.  Is it worth trying to debug the PCA cleaning for noiseless timestreams?  I mean&#8230; they really shouldn&#8217;t have any correlated information anyway.<br /><br />There is still an outstanding issue where one bolometer gets scaled to be higher than the rest without any apparent reason for doing so.<br /><br />It is also clear that we do not nyquist-sample the pixels with the timestream.  However, that doesn&#8217;t explain a deficiency observed in the ds1 images.  Also note that the sidelobes are not picked up at this S/N, but that&#8217;s not too surprising.<br /><br />And here is the explanation:  The peak is missed by about 10% because of finite sampling?  Somehow the sampled gaussian nearly uniformly underestimates the gaussian&#8230; I think this violates theory a bit&#8230;..<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-L2CMkehyV2g/TazJvpj2jjI/AAAAAAAAGGg/_BM0_GgC_x4/s1600/airy_test_ds1_reconv_arrang45_atmotest_amp1.0E-01timestream011_plots_20_bolo07.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://3.bp.blogspot.com/-L2CMkehyV2g/TazJvpj2jjI/AAAAAAAAGGg/_BM0_GgC_x4/s320/airy_test_ds1_reconv_arrang45_atmotest_amp1.0E-01timestream011_plots_20_bolo07.png" /></a></div><br />Here&#8217;s the problem shown again:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-vvY-1uleKmk/TazKE4Osm_I/AAAAAAAAGGo/n6Nadxi8UM4/s1600/airy_test_ds1_reconv_arrang45_atmotest_amp1.0E-01_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/-vvY-1uleKmk/TazKE4Osm_I/AAAAAAAAGGo/n6Nadxi8UM4/s320/airy_test_ds1_reconv_arrang45_atmotest_amp1.0E-01_compare.png" /></a></div>This is a comparison between the input image and a ds1-sampled image with perfectly correlated atmospheric noise.  So there is something in the pipeline that is preventing the peaks from achieving the necessary heights&#8230;. I wonder if resampling the deconvolved image onto a higher-resolution grid, then downsampling afterwards, would fix this?<br /><br />Also note that the flux loss increases from 7% to 20% from ds1 to ds5:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-hHQBTMME8Ow/TazKuf0gkuI/AAAAAAAAGGw/uQdJw4kc2U8/s1600/airy_test_ds5_reconv_arrang45_atmotest_amp1.0E-01_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/-hHQBTMME8Ow/TazKuf0gkuI/AAAAAAAAGGw/uQdJw4kc2U8/s320/airy_test_ds5_reconv_arrang45_atmotest_amp1.0E-01_compare.png" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/04/11/definitive-testing/">Definitive Testing</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-11T13:09:00-06:00" pubdate data-updated="true">Apr 11<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
It is now possible to make artificial timestreams!<br /><br />First round of tests:<br />For pointing maps with ~21 scans in 15&#8221; steps, array angle is approximately negligible.<br />deconv does NOT recover point sources, but reconv does (perfectly)<br />The algorithm starts to decay and produce weird ringey residuals at a S/N ~300.  The residuals are only at the 1% level out to S/N ~1000.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/04/11/tests-running/">Tests Running</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-11T12:40:00-06:00" pubdate data-updated="true">Apr 11<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<ul><li> Re-doing December 2010 calibration (remember to check & compare AFGL 4029)<br /><li> Mapping L351 with deconv, reconv, nodeconv<br /></ul><br />ARGH something is wrong with l351 pointing!  Is the pointing model broken?  What HAPPENED?!<br /><br /><br />OK, on to 4/8/2011 stuff:<br />I&#8217;ve done more work on the Memo from a few weeks ago, and now have a concrete recommendation that we do some more observing in 2011.  Why I torture myself so, I do not know&#8230;.<br /><br />Examination of the 2009 tests shows that reconv is by far the superior approach for pointing observations as previously noted.  Since reconv doesn&#8217;t look bad, but definitely not best, for science, it might be the compromise we have to make.  nodeconv completely fails for ds5 data, but the ds5 data in general are abominable.  They drop by 15-20% compared to ds1 for Mars.  The problem with nodeconv appears to be extremely high noise maps.<br /><br /><br /><br />&#8230;again, forgot to post this on Friday&#8230;</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/04/07/examining-deconvolution-strategies/">Examining Deconvolution Strategies</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-07T16:05:00-06:00" pubdate data-updated="true">Apr 7<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
This is a direct continuation of what I did yesterday (but only posted today because I forgot to click post).<br /><br />No-deconvolution doesn&#8217;t work, at least not reliably.  It recovers structures that are too large to be believable.  Perhaps a higher threshold should be required to include signal in the model?  The noise actually looks too high anyway.  Also, the flagging doesn&#8217;t look great.  Grr.<br /><br />The agreement between the three is somewhat better, down to a 50% increase of reconv over deconv:<br />[deconv, nodeconv, reconv]:<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 8.19765<br />Sum: 195.127  Mean: 1.04346  Median: 0.751545  RMS: 0.78342  NPIX: 187<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 10.1592<br />Sum: 241.816  Mean: 1.29314  Median: 1.04031  RMS: 0.778854  NPIX: 187<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 12.1694<br />Sum: 289.664  Mean: 1.54901  Median: 1.31107  RMS: 0.808915  NPIX: 187<br /><br />But this time there is less indication of negative residuals than previously.<br /><br />I was very confused by negatives being included in the model for nodeconv, then realized it&#8217;s because of the grow_mask option.<br /><br />sncut = 1 is now default for nodeconv.  I think it makes sense.  <br />(sncut = 1 drops the flux by <10%:<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 9.31507<br />Sum: 221.725  Mean: 1.18569  Median: 0.915137  RMS: 0.783316  NPIX: 187)<br /><br />While reconv has produced reasonable results in some cases, a close look at the maps shows that deconv ~ nodeconv << reconv.  There is something wrong with reconv.  It spreads out and increases the flux artificially.  So.... why did it work so damn well for point sources?<br /><br />The new weighting scheme seems to flag a dangerous number of bolos as &#8216;high weight&#8217;.  It drops after iteration #1, but not all the way.<br /><br />Need to remember to reprocess all December 2009 data with more flagged bolos</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/04/07/deconvolution-vs-not/">Deconvolution vs. Not</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-07T12:36:00-06:00" pubdate data-updated="true">Apr 7<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
In the W5 maps, everywhere except AFGL 4029 agrees to within about 20% (better than our supposed offset) independent of deconvolution scheme / modeling scheme, but AFGL 4029 disagrees by a factor of 2-3, indicating a severe dependence on map size.<br /><br />Here&#8217;s the AFGL 4029 comparison originally: <br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 8.1515<br />Sum: 194.028  Mean: 1.03758  Median: 0.78441  RMS: 0.760825  NPIX: 187<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 5.77585<br />Sum: 137.481  Mean: 0.735194  Median: 0.517222  RMS: 0.663245  NPIX: 187<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 14.4043<br />Sum: 342.863  Mean: 1.83349  Median: 1.62579  RMS: 0.820079  NPIX: 187<br /><br />Here it is after flagging out another bad bolo:<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 8.14533<br />Sum: 193.882  Mean: 1.0368  Median: 0.783409  RMS: 0.764047  NPIX: 187<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 10.1518<br />Sum: 241.642  Mean: 1.2922  Median: 1.06321  RMS: 0.777165  NPIX: 187<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 13.9344<br />Sum: 331.677  Mean: 1.77367  Median: 1.56277  RMS: 0.820139  NPIX: 187<br /><br />order is deconvtest, nodeconvtest, &#8216;reconv&#8217;<br /><br />deconvtest has virtually no change.  nodeconvtest goes up by a LOT&#8230; must be something about the weighting.  reconv drops, which is good, but not enough&#8230;<br /><br />curiously, it is not clear that nodeconv converges:  [10, 15, 20 iters]<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 8.70939<br />Sum: 207.308  Mean: 1.34615  Median: 1.09348  RMS: 0.760452  NPIX: 154<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 9.14028<br />Sum: 217.564  Mean: 1.41275  Median: 1.17223  RMS: 0.759027  NPIX: 154<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 9.42483<br />Sum: 224.337  Mean: 1.45673  Median: 1.2172  RMS: 0.758978  NPIX: 154<br /><br />similarly, reconv does not converge:<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 11.5623<br />Sum: 275.214  Mean: 1.61891  Median: 1.36357  RMS: 0.809771  NPIX: 170<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 12.5848<br />Sum: 299.553  Mean: 1.76208  Median: 1.51426  RMS: 0.807963  NPIX: 170<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 13.3102<br />Sum: 316.82  Mean: 1.86365  Median: 1.62092  RMS: 0.804582  NPIX: 170<br /><br /><br />by contrast, deconv converges rapidly:<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 8.27004<br />Sum: 196.85  Mean: 0.937381  Median: 0.659373  RMS: 0.759002  NPIX: 210<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 8.39255<br />Sum: 199.766  Mean: 0.951267  Median: 0.683644  RMS: 0.758766  NPIX: 210<br />BMAJ: 0.00916667  BMIN: 0.00916667  PPBEAM: 23.8028   SUM/PPBEAM: 8.42881<br />Sum: 200.629  Mean: 0.955377  Median: 0.690816  RMS: 0.75878  NPIX: 210<br /><br />while I&#8217;m at it, gaussfits for nodeconv and reconv:<br />Guess: 427,1113  Fit peak: 2.90411  Background: 0.0102637  X,Y position: 426.514822,1113.354863  X,Y FWHM: 64.253564,72.615868   Angle: 0.000000<br />Guess: 427,1113  Fit peak: 3.03769  Background: 0.000596982  X,Y position: 426.080980,1113.634660  X,Y FWHM: 77.405551,104.292823   Angle: 329.589335<br />well, isn&#8217;t that neat!  Better than 5% agreement on the peaks.  Curiously, the background is higher for nodeconv, which is false: it is directly evident that the background is higher in reconv.  So I think this is just a failed fit, unfortunately.  The true peak of the reconv AFGL 4029 is 3.9 Jy, so there&#8217;s a huge residual<br /><br /><br />Found an error in the noisemap computations that was artificially driving up the noise around NAN pixels in undersampled maps; this probably led to major problems.  I fixed it by only &#8220;flagging out&#8221; pixels with >2 NAN neighbors, i.e. so sparsely sampled that they should be ignored, I hope&#8230;.  this may have affected modeling in all maps.<br /><br />Realized the problems with noisemap: if the model exactly equals the weighted mean at a given pixel, the residual will be EXACTLY zero (to within numerical precision).  This leads to underestimates of the noise!  What we really want is an estimate of the standard deviation on the mean, which is easily computed!  Just do a normal weighted sum of the difference between the data and the model (data and the mean); this is also equivalent (conveniently) to a chi^2 statistic, I think&#8230; Whoa.  How did I not do this before?  LETS FIND OUT I&#8217;M SURE THERE ARE AWFUL CONSEQUENCES!<br /><br /><br />Just had another idea to throw in - what if we downweight the scan edges?  It won&#8217;t matter for individual maps or maps of the same size if done uniformly, but it could help incorporate &#8220;pointing&#8221; maps into &#8220;real&#8221; maps more accurately.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/04/05/deconvolve-and-epochs/">Deconvolve and Epochs</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-05T12:12:00-06:00" pubdate data-updated="true">Apr 5<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve spent a large portion of the last week working on the deconvolver.  I found <a href="http://bolocam.blogspot.com/2011/03/workaround-for-individual-maps.html">previously</a> that a reconvolved map does a better job of restoring flux than the straight-up deconvolved map for point sources / pointing observations.<br /><br />However, the same update broke the regular mapping modes, leading to horrible instability in the mapping routines for large maps such as W5.  Curiously, it seems that the aspect that breaks is the weighting; somehow the noise drops precipitously in certain bolometers, leading to extremely high weights.  Perhaps they somehow dominate the PCA subtraction and therefore have all their noise removed?<br /><br />Either way, there are a few large-scale changes that need to be made:<br /><ol><li> Since Scaling and Weighting are now done on a whole-timestream basis, we should only map single epochs at once and coadd them after the fact.  This approach will also help relieve RAM strain.  Since it appears that individual observations are now reasonably convergent with the proper treatment of NANs in the deconvolution scheme, it should be possible to take any individual map and coadd it in a reasonable way.<br /><li> Bolometers with bad weights need to be thrown out.  Alternatively, and more appropriately, I need to discover WHY their weights are going bad.<br /></ol>We also need to explore different weighting schemes. <ol><li> 1/Variance over whole timestream (current default)<br /><li> 1/Variance on a per-scan basis (previous default) [based on PSDs]<br /><li> Minimum Chi<sup>2</sup> with Astrophysical Model (??)<br /><li> Min Chi<sup>2</sup> on a per-scan basis?<br /></ol><br />Because of the extensive testing this will require, it is really becoming essential that we develop an arbitrary map creation & testing routine.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/30/weird-problem/">Weird Problem</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-30T20:25:00-06:00" pubdate data-updated="true">Mar 30<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;m remapping everything, and there&#8217;s a really strange situation in ic1396&#8230; only one field has a source that doesn&#8217;t have rotation problems, every other observation is clearly improperly rotated.  The weird thing is that it&#8217;s NOT the one you&#8217;d expect from the information below:<br /><br /><code><br />readcol,'/Volumes/disk2/sliced/infiles/ic1396_infile.txt',filelist,format='A'<br />for i=0,6 do begin & ncdf_varget_scale,filelist[i],'array_params',ap & print,filelist[i],ap & endfor<br />/Volumes/disk2/sliced/ic1396/070911_o19_raw_ds5.nc      7.70000      31.2000      70.7000      0.00000      0.00000<br />/Volumes/disk2/sliced/ic1396/070912_o26_raw_ds5.nc      7.70000      31.2000      84.0000      0.00000      0.00000<br />/Volumes/disk2/sliced/ic1396_d/070913_o19_raw_ds5.nc      7.70000      31.2000      84.0000      0.00000      0.00000<br />/Volumes/disk2/sliced/ic1396_l/070913_o17_raw_ds5.nc      7.70000      31.2000      84.0000      0.00000      0.00000<br />/Volumes/disk2/sliced/ic1396_r/070913_o18_raw_ds5.nc      7.70000      31.2000      84.0000      0.00000      0.00000<br />/Volumes/disk2/sliced/ic1396_u/070913_o20_raw_ds5.nc      7.70000      31.2000      84.0000      0.00000      0.00000<br /></code><br /><br />One ofthese things is not like the others&#8230; but it&#8217;s 070913_o18_raw_ds5.nc, not /Volumes/disk2/sliced/ic1396/070911_o19_raw_ds5.nc</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/29/progress-but-still-ds1-ds5-issues/">Progress, but Still Ds1-ds5 Issues</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-29T20:47:00-06:00" pubdate data-updated="true">Mar 29<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
ds1 and ds5 agree pretty well with the recent upgrades to delining and deconvolution.  However, there are still counterexamples, e.g. 101208_o13, in which ds5 < ds1: <table><br /><tr><td><br /><a href="http://4.bp.blogspot.com/-fIJHF_x5mBI/TZI0cryJfbI/AAAAAAAAGDI/GsNfLRGNZAk/s1600/101208_o13_raw_ds1.nc_indiv13pca.png" ><img  width="390" src="http://4.bp.blogspot.com/-fIJHF_x5mBI/TZI0cryJfbI/AAAAAAAAGDI/GsNfLRGNZAk/s200/101208_o13_raw_ds1.nc_indiv13pca.png" /></a> <br /></td><td><a href="http://2.bp.blogspot.com/-QRhiz8W9RDc/TZI0dGUR4UI/AAAAAAAAGDQ/WC8eLQd6_Z0/s1600/101208_o13_raw_ds5.nc_indiv13pca.png" ><img  width="390" src="http://2.bp.blogspot.com/-QRhiz8W9RDc/TZI0dGUR4UI/AAAAAAAAGDQ/WC8eLQd6_Z0/s200/101208_o13_raw_ds5.nc_indiv13pca.png" /></a></td></tr><br /></table><br />The &#8216;fitted&#8217; values agree better than the &#8216;measured&#8217; values now that NANs are treated properly.<br /><br /><br />Spent a few hours today trying to figure out if weighting can explain the difference between ds1 and ds5; it appears to make up for most of it so I&#8217;m doing some more experiments.  Why is there so much parameter space?  Why can&#8217;t weighting just work?  It doesn&#8217;t&#8230;.<br /><br />also wasted a few hours trying to write a python drizzling algorithm, which unfortunately is impossible so I had to resort to an inefficient for loop.  <br /><br />Finally got some minor results.  It really looks like there is a trend pushing up the recovered flux (i.e. higher volts/Jy) for ds5 over ds1.  There is a discrepancy between map types for ds1 but not for ds5, which is actually backwards from what I would have expected, since ds1 will get better-sampled maps. <br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-ARaSL7ZdDmc/TZKRcE01DnI/AAAAAAAAGDY/YMZRpRo53Hw/s1600/uranus_dcfluxes_dec2010_nomask_ds1_13pca_fits_map10.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://2.bp.blogspot.com/-ARaSL7ZdDmc/TZKRcE01DnI/AAAAAAAAGDY/YMZRpRo53Hw/s320/uranus_dcfluxes_dec2010_nomask_ds1_13pca_fits_map10.png" /></a><br /><a href="http://3.bp.blogspot.com/-pWtggp0vSP4/TZKRcwZ_SrI/AAAAAAAAGDg/IqVHQSprkL8/s1600/uranus_dcfluxes_dec2010_nomask_ds5_13pca_fits_map10.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://3.bp.blogspot.com/-pWtggp0vSP4/TZKRcwZ_SrI/AAAAAAAAGDg/IqVHQSprkL8/s320/uranus_dcfluxes_dec2010_nomask_ds5_13pca_fits_map10.png" /></a></div><br />Luckily, the difference between peak fitting and &#8220;measuring&#8221; results in very small (insignificant) changes to the calibration curve (recall fitting is direct gaussian fitting; &#8216;measuring&#8217; is using the gaussian-fit width and total flux in an ellipse to infer a peak assuming a point source):<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-E-FDTTj-4Ik/TZKVyUA8zBI/AAAAAAAAGDo/9NGubgLWBvo/s1600/uranus_dcfluxes_dec2010_nomask_ds5_13pca_fits_map10.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://2.bp.blogspot.com/-E-FDTTj-4Ik/TZKVyUA8zBI/AAAAAAAAGDo/9NGubgLWBvo/s320/uranus_dcfluxes_dec2010_nomask_ds5_13pca_fits_map10.png" /></a><br /><a href="http://3.bp.blogspot.com/-GdyxFnmwQ7g/TZKVykSg57I/AAAAAAAAGDw/PPVXtfAxW0s/s1600/uranus_dcfluxes_dec2010_nomask_ds5_13pca_map10.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="229" width="320" src="http://3.bp.blogspot.com/-GdyxFnmwQ7g/TZKVykSg57I/AAAAAAAAGDw/PPVXtfAxW0s/s320/uranus_dcfluxes_dec2010_nomask_ds5_13pca_map10.png" /></a></div><br />Since this work has all been done for the &#8216;bootstrapping&#8217; observations that are supposed to tell us if different map sizes are compatible, I have included the map sizes in the diagrams now.  However, to really understand the ds1/ds5 difference, there are much better data sets, which I&#8217;m now reprocessing using the new and improved methods.<br /><br />(the Whole BGPS is also processing with the new methods in the background, though since the methods are being updated live there may be more changes and it will have to be re-run&#8230;. initial looks at W5 are BAD but L030 is GOOD (bordering on amazing))</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/29/careful-comparison-of-ds1-and-ds5/">Careful Comparison of Ds1 and Ds5</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-29T09:23:00-06:00" pubdate data-updated="true">Mar 29<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I looked very closely at the timestream and maps of 101208_o11 and had a pretty hard time figuring out why the data were different, but it looked like the data really did differ on a point-by-point basis (according to pyflagger).  The only conclusion I was able to draw is that the scaling must be off.  I realized that the scaling was being done before delining.  I moved scaling from readall_pc to premap, and it brought at least this one source into agreement.  Time to run ds1-ds5 comparisons again!<br /><br />(this means that ds1 data MUST have deline run on it, but ds5 data doesn&#8217;t really need it)<br /><br />Here are examples of ds1 and ds5 timestreams, with and without scaling, and ds1 with and without delining:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-KR_NYG31_O0/TZECtBAgqFI/AAAAAAAAGCg/1jC9Ys2r9Iw/s1600/101208_o11_ds5_uranus_indivtesttimestream011_plots_20_bolo02.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="143" width="200" src="http://4.bp.blogspot.com/-KR_NYG31_O0/TZECtBAgqFI/AAAAAAAAGCg/1jC9Ys2r9Iw/s200/101208_o11_ds5_uranus_indivtesttimestream011_plots_20_bolo02.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-HbK-hAXjSDs/TZECtUNe8AI/AAAAAAAAGCo/i4fsH12Iw8Y/s1600/101208_o11_ds1_uranus_indivtest_delinetimestream011_plots_20_bolo02.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="143" width="200" src="http://3.bp.blogspot.com/-HbK-hAXjSDs/TZECtUNe8AI/AAAAAAAAGCo/i4fsH12Iw8Y/s200/101208_o11_ds1_uranus_indivtest_delinetimestream011_plots_20_bolo02.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-edXLnDrrt5o/TZECt0No8oI/AAAAAAAAGCw/QjHg1ScBHG0/s1600/101208_o11_ds1_uranus_indivtesttimestream011_plots_20_bolo02.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="143" width="200" src="http://3.bp.blogspot.com/-edXLnDrrt5o/TZECt0No8oI/AAAAAAAAGCw/QjHg1ScBHG0/s200/101208_o11_ds1_uranus_indivtesttimestream011_plots_20_bolo02.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-4NIxFxEQ1jU/TZECuDJ1fVI/AAAAAAAAGC4/tGE5tDH_168/s1600/101208_o11_ds1_uranus_indivtest_deline_noscaleacbtimestream011_plots_20_bolo02.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="143" width="200" src="http://1.bp.blogspot.com/-4NIxFxEQ1jU/TZECuDJ1fVI/AAAAAAAAGC4/tGE5tDH_168/s200/101208_o11_ds1_uranus_indivtest_deline_noscaleacbtimestream011_plots_20_bolo02.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-DfIepZXXCFc/TZECuhm8lwI/AAAAAAAAGDA/Awp60ZuPGps/s1600/101208_o11_ds5_uranus_indivtest_noscaleacbtimestream011_plots_20_bolo02.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="143" width="200" src="http://2.bp.blogspot.com/-DfIepZXXCFc/TZECuhm8lwI/AAAAAAAAGDA/Awp60ZuPGps/s200/101208_o11_ds5_uranus_indivtest_noscaleacbtimestream011_plots_20_bolo02.png" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/27/trying-to-bootstrap/">Trying to Bootstrap</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-27T20:01:00-06:00" pubdate data-updated="true">Mar 27<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve concluded, based on previous posts http://bolocam.blogspot.com/2011/02/downsampling-why-is-dec-2010-different.html, http://bolocam.blogspot.com/2011/03/revisiting-calibration-yet-again.html, and http://bolocam.blogspot.com/2011/03/workaround-for-individual-maps.html, that ds5 is a problem primarily for undersampled images, i.e. those taken in the normal mapping mode.  This makes bootstrapping a bit tricky.<br /><br />There are two options:<br />1. Map Uranus and AFGL 4029 both in Volts and figure out what flux density AFGL 4029 must have to lie on that curve<br />2. Map Uranus and compute a calibration curve, apply that calibration curve to AFGL 4029, and then compare derived flux densities.<br /><br />Both have the major problem that the individual AFGL 4029 maps will forcibly be undersampled if I use ds5 data (which is normally OK, according to the first paragraph).  In the second case, it is possible to co-add the images and get around the under-sampling issue, while in the first case it is not because of the dependence on total loading (MEANDC).  <br /><br />The real problem is that the whole goal of these observations was to compare the different observing methods and see if they agree (1x1, 3x1, pointing, etc.) since the pointing-style observations were used to calibrate the others.  But if the 1x1s are just straight-up unreliable, how can we do the comparison?  I think the co-added AFGL 4029 is the only option, but then how do I test if it&#8217;s correct?  It would be really nice to have AFGL 4029 observed with both scan types&#8230; <br /><br /><br />Alright, onto the data.  After last week&#8217;s fix of the bad bolos, I really hope ds1 and ds5 agree.  However, first glance at the cal curves says they don&#8217;t.  ds1 and ds2 agree, but ds5 is different.<br /><br />After checking them out with <code> ds9 *ds[15]*13pca*_map10.fits -scale limits -1 1000 -log -cmap hsv -match colorbars -match scales -match frames wcs &</code>, it appears that the _mask_ data is all&#8230; wrong, somehow.  That&#8217;s OK, I want to discard the mask data anyway, so I&#8217;m happy to NOT spend time debugging it.<br /><br />Even after careful examination showing that the fits look good - and noting that the fluxes look pretty much the same - the calibration curves still look rather different.  Unfortunately I had to spend 3 hours debugging IDL plotting commands; I want to show the fits each time and save them as postscripts.  What does &#8220;xyouts&#8221; with &#8220;/device,/normal&#8221; do?  I thought that should plot x,y text at the coordinates specified in the plot window&#8230; but no, that is JUST /normalize.<br /><br />Anyway, realized that centroid_map treated NANs as zero.  Added ERR keyword (with a reasonable estimate of the error) in centroid_map to ignore NANs.   It looks like improper treatment of NANs is responsible for a lot of the scatter seen in the calibration plots.<br /><br />There is a substantial difference between the &#8220;fitted&#8221; peak and the &#8220;measured&#8221; peak (the latter computed by taking the sum of the pixels divided by the area of the fitted gaussian).  It looks like the &#8220;measured&#8221; version is more robust, at first glance.  However, unfortunately, for 101208_o11, the difference between ds1 and ds5 exists in both quantities.  I will have to examine timestreams now&#8230; ARGH.<br /><br />Well, the timestreams show&#8230; that indeed the model is lower in ds1, but not why.  The &#8220;remainder&#8221; (new_astro; the stuff that never gets incorporated into the model but DOES get incorporated into the map) appears to be the same in both.  Similarly, there is little to no flux in the PCA atmosphere, so it&#8217;s not simply being cleaned out.  Where is the flux going or coming from?  <br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-6lqGwWn650Q/TY_rgZKA9QI/AAAAAAAAGCI/Iq9O5mnmhl8/s1600/101208_o11_ds1_uranus_indivtest_delinetimestream011_plots_20_bolo02.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img title="DS1 deline" border="0" height="229" width="320" src="http://3.bp.blogspot.com/-6lqGwWn650Q/TY_rgZKA9QI/AAAAAAAAGCI/Iq9O5mnmhl8/s320/101208_o11_ds1_uranus_indivtest_delinetimestream011_plots_20_bolo02.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-7uBbEU1tAqM/TY_rgg6Jq9I/AAAAAAAAGCQ/iaGhOSb6gtQ/s1600/101208_o11_ds5_uranus_indivtesttimestream011_plots_20_bolo02.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img title="DS5" border="0" height="229" width="320" src="http://1.bp.blogspot.com/-7uBbEU1tAqM/TY_rgg6Jq9I/AAAAAAAAGCQ/iaGhOSb6gtQ/s320/101208_o11_ds5_uranus_indivtesttimestream011_plots_20_bolo02.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-YKdZcNOjm7Q/TY_rg6tcvhI/AAAAAAAAGCY/fr4l8j-v4xI/s1600/101208_o11_ds1_uranus_indivtesttimestream011_plots_20_bolo02.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img title="DS1" border="0" height="229" width="320" src="http://1.bp.blogspot.com/-YKdZcNOjm7Q/TY_rg6tcvhI/AAAAAAAAGCY/fr4l8j-v4xI/s320/101208_o11_ds1_uranus_indivtesttimestream011_plots_20_bolo02.png" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/23/workaround-for-individual-maps/">A Workaround for Individual Maps?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-23T18:33:00-06:00" pubdate data-updated="true">Mar 23<span>rd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I closely examined the timestreams of 101208_ob7 as I said I would yesterday.  Unfortunately, all I can do is describe the symptoms: the first deconvolution model looks good, though it isn&#8217;t quite as wide as the true source (this should be OK; it is an iterative method, after all).  In the second iteration, though, the deconvolution model is even smaller and lower amplitude&#8230; and it goes on like that. <br /><br><div class="separator" style="clear: both; text-align: center;"><nobr><img width=390 src="http://dl.dropbox.com/u/11308804/101208_ob7_uranus_indivtest_noaddmodeltimestream008_plots_00_bolo03.png" align=left><br /><img width=390 src="http://dl.dropbox.com/u/11308804/101208_ob7_uranus_indivtest_noaddmodeltimestream008_plots_01_bolo03.png" align=right></nobr></div><br><br /><br /><div align=left class="separator" style="clear: both; text-align: left;"><p><br>Not deconvolving results in a healthy-looking clean map - pretty much what you expect and want to see.<br /></div><br />This implies that somehow removing an incomplete deconvolved model leads to more of the source being included in the &#8216;atmosphere&#8217; than would have been included with no model subtraction at all.  I&#8217;m not sure how this is possible.  In fact&#8230; I&#8217;m really quite sure that it is not.  <br /><br />The workaround is to only add positive changes to the model.  This should &#8216;definitely work&#8217; but may be non-convergent and assumes that the model never has anything wrong with it at any iteration.  I have demonstrated that this works nicely for the two Uranus observations I tested on, but now I have to run the gamut of tests&#8230;. the first (very obvious) problem is that the background is now positive, which is dead wrong.  This workaround is not viable.<br /><br />Alright, so what next?  I&#8217;ve described the symptoms and that I think they can&#8217;t occur&#8230;<br />A closer look shows that new_astro is not being incorporated into astro_model at the second iteration.  Why?<br /><br /><br />AHA!  Pyflagger + find_all_points reveals the problem!<br /><pre>Map value: 16.939728   Weighted average: 17.476323   Unweighted Average: 524.573136<br />scan,bolo,time:       mapped       astro       flags      weight       scale<br />   3,  22,  12:     8.380408   13.561113    0.000000    0.025132    1.000000<br />   4, 124,  23:   822.005327   13.561113    0.000000    0.000038    1.118012<br />   4,  21,  38:   719.408983   13.561113    0.000000    0.000037    0.946721<br />   5,  20,   7:     4.470616   13.561113    0.000000    0.013303    1.400000<br />   5, 119,  23:   882.508303   13.561113    0.000000    0.000033    0.926887<br />   5, 100,  35:   327.007750   13.561113    0.000000    0.000074    1.184397<br />   5, 106,  38:   162.562098   13.561113    0.000000    0.000704    0.970000<br />   6, 116,  27:   779.075640   13.561113    0.000000    0.000033    0.891768<br />   8, 112,   3:   235.557390   13.561113    0.000000    0.000147    0.947130<br />   9,   3,  14:   966.721773   13.561113    0.000000    0.000032    1.166292<br />   9, 109,  41:   139.753656   13.561113    0.000000    0.000753    1.075269<br />  10, 104,   8:   641.121935   13.561113    0.000000    0.000050    0.927827<br />  10, 105,  24:     4.323228   13.561113    0.000000    0.032759    0.019022<br />  10,  32,  36:   847.646990   13.561113    0.000000    0.000034    1.099406<br />  11,  36,   9:   834.757586   13.561113    0.000000    0.000038    1.184751<br />  11,  76,  37:   566.851891   13.561113    0.000000    0.000040    1.111000<br />  12,  77,  13:   834.603090   13.561113    0.000000    0.000034    1.128464<br />  12,  44,  44:   335.465654   13.561113    0.000000    0.000195    2.165775<br />  13,  26,  17:    50.423143   13.561113    0.000000    0.004826    0.829932<br />  13,  75,  29:   724.884676   13.561113    0.000000    0.000042    0.923077<br />  14,  49,  21:   797.618990   13.561113    0.000000    0.000038    1.091918<br />  14,  29,  33:   743.856012   13.561113    0.000000    0.000035    1.050360<br />  15,  33,  13:   660.670099   13.561113    0.000000    0.000031    0.832180<br />  15,  53,  25:   604.174286   13.561113    0.000000    0.000047    0.889922<br />  15,  88,  40:     4.626476   13.561113    0.000000    0.008241    0.191489<br />  17,  64,  20:   778.950533   13.561113    0.000000    0.000037    1.233108<br />  18,  68,  30:   686.048136   13.561113    0.000000    0.000040    1.387283<br /></pre><br />Note that the lowest points have the highest weights.  They DEFINITELY shouldn&#8217;t.  What&#8217;s wrong with them?<br /><br />Apparently they have NO sensitivity to the sky!  What?!  There were a bunch of bad bolos in Dec2010 that weren&#8217;t flagged out&#8230; I wonder if that problem persists to other epochs.  Still, why does it only affect pointing observations?  Looking at the power spectra&#8230; the large-timescale stuff becomes less dominant when scans are longer, but the noisy spectra are still clearly noise-only.  How odd.<br /><br />Dropped to 112 good bolos from 134.  That is much more believable.  Have to go back and fix Dec09 data too&#8230;<br /><br />Even after fixing the bad bolos, the model drops with iteration number.  Why why why?<br /><br />Well, looking at deconv_map, I&#8217;ve always returned the truly deconvolved version, not the reconvolved&#8230; maybe the reconvolved really is better?  Again, this will have to be extensively tested, but it certainly gets rid of the obvious/dominant error that the model kept dropping off.  However, FINALLY, based on how ridiculously good the reconv-deconvolved map looks, I think I&#8217;m ready to do the extensive pipeline tests.  So, 10dec_caltest has been started up with all of the new bolo_params applied and the changes in place to deconv_map&#8230; let&#8217;s see what happens.<br /><img src="http://dl.dropbox.com/u/11308804/compare_noadd_nodeconv.png" width=800 title="Comparison of deconvolved and not-deconvolved maps (with reconv)"><br /><br />After that runs, I&#8217;ll have to re-run the fit_and_plot routines</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/22/revisiting-calibration-yet-again/">Revisiting Calibration Yet Again</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-22T18:22:00-06:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The recent hiatus for paper revisions has, unfortunately, come to an end.<br /><br />Re-examining my work, I did quite a lot but encountered many dead-ends.  <br /><br />First, we would very much like to use an *identical* reduction process on both the calibration data and the science data.  That way, we could feel very confident that the reduction process isn&#8217;t introducing any weird artifacts.<br /><br />Unfortunately, I discovered early on that using ds5 data, 13 pca components, and n>1 iterations resulted in strange shape and flux conservation failures.  These errors do NOT occur in co-added maps; they are unique to single-observation scans (though I don&#8217;t recollect whether 2 scans is enough or if you need more).  <br /><br />I spent many hours banging my head against this problem and have never gotten a satisfactory solution.  But perhaps it&#8217;s time to approach it again.  The map00 images look MUCH rounder and generally better than the map10 images.   <br /><br />So, the problem I need to examine is the iterative process.  Why does it fail for single images?  Is it something about the noise properties?  model00 looks fine&#8230; what gets put into the timestream?  Examining timestreams is a terrible and horrendous process&#8230; but what else can I do?<br /><br />The next step will be to examine the timestreams of a particular observation.  I think a good choice is 101208_ob7; the next observation, 101208_ob8 was a large-area map and it looks fine (i.e., it improves with iteration).  So I can start looking at the effects of polysub, iteration, etc. on this particular source.<br /><br />Of course, the stupid trick with the pipeline - every time - is that &#8220;fixing&#8221; a problem for one source has a nasty tendency to break it for all other sources.  That&#8217;s why there are so many flags that can be passed around.  Still, this is the approach I have to take&#8230;</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/13/downsampling-why-is-dec-2010-different/">Downsampling - Why Is Dec 2010 Different?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-13T12:43:00-07:00" pubdate data-updated="true">Feb 13<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
As you&#8217;ll recall from <a href="http://bolocam.blogspot.com/2011/02/downsampling-what-is-going-on.html"> my previous post </a> (and references therein&#8230;), the 2005 Orion data shows a discrepancy between ds1 and ds5 data in which the ds1 data is significantly (~10%) higher than the ds5 data.  However, the 2010 Uranus observations show much larger discrepancies between ds1 and ds5 favoring the ds5 data!  Because that was somewhat unbelievable to me, I ran ds1-ds5 comparisons on Uranus data from other epochs, and discovered that ds1&gt;ds5 uniformly (also, it looks a LOT better).<br /><br />So, the question remains, WHY is the Dec 2010 data brighter in ds5?  More confusing to me, why do the ds5 PSFs from 2010 look so reasonable, while the ds5 PSFs from all earlier epochs look terrible?<br /><br />For example, I use the observations 070727_o31 and _o32.  These show clearly the blurring and flux-loss that happens when ds5 data are used for &#8216;normal&#8217; point-sources.  The disagreement is, surprisingly, worse for the co-added image, though the correlation is better&#8230; I&#8217;m not entirely clear what that means besides there being a positional offset between the individual maps that is not entirely believable.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Fv-rLVtwUQk/TVgwKdUUU-I/AAAAAAAAGBk/M_FHcZaeo7Y/s1600/uranus_070727_ds1_o31-2_0pca_v2.0_map10.fits_compareds1ds5.png" imageanchor="1" style="margin-bottom: 1em; margin-right: 1em;"><img border="0" height="320" src="http://3.bp.blogspot.com/-Fv-rLVtwUQk/TVgwKdUUU-I/AAAAAAAAGBk/M_FHcZaeo7Y/s320/uranus_070727_ds1_o31-2_0pca_v2.0_map10.fits_compareds1ds5.png" width="320" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Mr9VutL-9t4/TVgyBq2z-kI/AAAAAAAAGBo/fdFkQ-w99Lw/s1600/uranus_v2.0_070727_o32_indiv_map10_compareds1ds5.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="320" src="http://3.bp.blogspot.com/-Mr9VutL-9t4/TVgyBq2z-kI/AAAAAAAAGBo/fdFkQ-w99Lw/s320/uranus_v2.0_070727_o32_indiv_map10_compareds1ds5.png" width="320" /></a></div><br /><br /><a href="http://3.bp.blogspot.com/-jVosT6o4bUw/TVgyCG9ql_I/AAAAAAAAGBs/aju-XfQqMJg/s1600/uranus_v2.0_070727_o31_indiv_map10_compareds1ds5.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="320" src="http://3.bp.blogspot.com/-jVosT6o4bUw/TVgyCG9ql_I/AAAAAAAAGBs/aju-XfQqMJg/s320/uranus_v2.0_070727_o31_indiv_map10_compareds1ds5.png" style="cursor: move;" width="320" /></a><br /><br /><div class="separator" style="clear: both; text-align: center;">However, the point is that these maps do not share the properties of the 2010 maps, in which the ds5 source is brighter and possibly even more peaked than the ds1 source, despite the ds1 data having lower noise (as you&#8217;d expect):<br /><br /><br /><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TVSaYfZx0WI/AAAAAAAAGBE/cWbbBQCJOvk/s1600/101208_ob4_ds1ds5_compare.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em; float: center; clear: center;"><img border="0" height="320" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TVSaYfZx0WI/AAAAAAAAGBE/cWbbBQCJOvk/s320/101208_ob4_ds1ds5_compare.png" width="320" /></a></div><br /><br /><br />What could be boosting the flux in the Dec 2010 downsampled data?  Is there something about the lines - before downsampling - that is changing the relative scaling?  Perhaps I can answer this with the w5 maps&#8230; but I think that&#8217;s unlikely&#8230;</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
It looks like, for AFGL 4029 combined images, ds1 and ds5 agree to within 5% in the Dec2010 data.  This implies that the offset is a result of the individual scans instead of coadds, though for the individual observations ds1&gt;ds5 pretty uniformly.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/10/downsampling-what-is-going-on/">Downsampling - What Is Going On?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-10T21:19:00-07:00" pubdate data-updated="true">Feb 10<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The downsampling failure I <a href="http://bolocam.blogspot.com/2011/01/downsampling-has-serious-negative.html">noted</a> <a href="http://bolocam.blogspot.com/2011/01/more-evidence-that-downsampling-causes.html">previously</a> appears to be illusory.  It may be that the offset noted only holds for single-frame images, in which there may be many blank pixels.  It is possible - though not certain - that the ds1 images were significantly higher than ds5 because more noise-only pixels were included with higher outliers; i.e., ds1 high-outlier noise was being compared to ds5 noise that was lower amplitude. <br /><br />What led to these conclusions?  First, I was getting inconsistent results looking at Uranus in particular - ds5 appeared to have higher fluxes than ds1.  This was inconsistent with <a href="http://bolocam.blogspot.com/2011/01/downsampling-has-serious-negative.html">earlier results</a> on OMC1.  Partly, this is because I switched from my <a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TTiWWl3j3dI/AAAAAAAAF3I/Ef3WHEv5oXU/s1600/omc1_dstest_pixel-pixel.png">hacked-together plots</a> to the much more refined <a href="http://code.google.com/p/bgpspipeline/source/browse/bgps_pipeline/plotting/compare_images.py">compare_images</a> script, which demonstrated the effect of changing the cutoff of the comparison.<br /><br />Also, I added in a Pearson Correlation Coefficient computation.  Given a single data set with the only difference being downsampling, the data should be perfectly correlated even if there is a flux offset (correlation should be 1, but the best fit slope should not be).  It was an indication of a problem when I started seeing correlation coefficients &lt;0.90 for data that had already been sigma-cut; that means that noise was being included in the correlation computations.<br /><br />Therefore, the approach needed is to cut out the high pixels that are on map edges.  This I accomplished by adding an &#8216;aperture&#8217; capability to the compare_images code (for Uranus) and cropping using montage and a wcs-based box for Orion.<br /><br />The results&#8230; are ambiguous.  Wow.  In some sub-fields - within the same co-added map - the agreement is near-perfect.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-i20j3FEx758/TVR-PbQl7lI/AAAAAAAAGAY/imgMqceS9n8/s1600/v2.0_dl_omc_b_OMC4_ds1ds5_compare.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-i20j3FEx758/TVR-PbQl7lI/AAAAAAAAGAY/imgMqceS9n8/s1600/v2.0_dl_omc_b_OMC4_ds1ds5_compare.png" width="800" /></a></div>In others, ds1 is clearly &gt; ds5 .  <br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-JsRH_ZQilWM/TVR-Os6vBSI/AAAAAAAAGAQ/JRR6Trm-weo/s1600/v2.0_dl_omc_b_OMC2_ds1ds5_compare.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-JsRH_ZQilWM/TVR-Os6vBSI/AAAAAAAAGAQ/JRR6Trm-weo/s1600/v2.0_dl_omc_b_OMC2_ds1ds5_compare.png" width="800" /></a></div>What&#8217;s going on?  ds1 does look uniformly more smooth.<br /><br />Note that the <i>disagreement</i> is nearly scale-free:<a href="http://2.bp.blogspot.com/-J1XXZki2sxU/TVSXhlmGZKI/AAAAAAAAGAg/aDyQ7Sz2CfM/s1600/v2.0_dl_omc_b_OMC2_ds1ds5_psd_compare.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="320" src="http://2.bp.blogspot.com/-J1XXZki2sxU/TVSXhlmGZKI/AAAAAAAAGAg/aDyQ7Sz2CfM/s320/v2.0_dl_omc_b_OMC2_ds1ds5_psd_compare.png" width="320" /></a><br /><br /><br />OK, so given the conclusion in Orion that ds1>=ds5, what&#8217;s the deal with Uranus?<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-AosJ1vzcYSs/TVSZjIZ81fI/AAAAAAAAGAk/qVGeaJtkbPA/s1600/101208_o10_ds1ds5_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-AosJ1vzcYSs/TVSZjIZ81fI/AAAAAAAAGAk/qVGeaJtkbPA/s320/101208_o10_ds1ds5_compare.png" /></a></div><br />The first two comparisons are for 1x1&deg; observations; in both cases ds1 &lt; ds5, but by 6% and 24% respectively!  The image of Uranus looks much better (because of lack of parallel lines) in the second, more extreme case.  In both cases, the ds5 excess is nearly scale-free (not shown).<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TVSZki9k9OI/AAAAAAAAGA0/t9LOGHOAL7Q/s1600/101208_o10_ds1ds5_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TVSZki9k9OI/AAAAAAAAGA0/t9LOGHOAL7Q/s320/101208_o10_ds1ds5_compare.png" /></a></div><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TVSZj1pglLI/AAAAAAAAGAs/-4153NoAQQ0/s1600/101208_o11_ds1ds5_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TVSZj1pglLI/AAAAAAAAGAs/-4153NoAQQ0/s320/101208_o11_ds1ds5_compare.png" /></a></div><br />The 3x1s are also highly discrepant.  #12 shows nearly perfect agreement, albeit with high dispersion (low correlation) because of pixel-to-pixel variations around the peak.  #13 is the only observation with a huge DS1 excess.  It also demonstrates very poor correlation.  It looks like the telescope got bumped for the ds5 data (which is not actually possible; recall they&#8217;re the same data set).  What happened here?  Maybe a glitch that went unflagged (mad_flagger is off by default for individual scans)?<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-9gwzGfDBCEk/TVSZllWeBxI/AAAAAAAAGA8/x3mg5RbMScs/s1600/101208_o12_ds1ds5_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-9gwzGfDBCEk/TVSZllWeBxI/AAAAAAAAGA8/x3mg5RbMScs/s320/101208_o12_ds1ds5_compare.png" title="101208 Observation 12"/></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-9gwzGfDBCEk/TVSZllWeBxI/AAAAAAAAGA8/x3mg5RbMScs/s1600/101208_o13_ds1ds5_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/-9gwzGfDBCEk/TVSZllWeBxI/AAAAAAAAGA8/x3mg5RbMScs/s320/101208_o13_ds1ds5_compare.png" title="101208 Observation 13"/></a></div><br /><br />In observations 4 and 5, we&#8217;re looking at a 40-50% excess in ds5!  What the heck?  There really is no clear explanation for this.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TVSaYfZx0WI/AAAAAAAAGBE/cWbbBQCJOvk/s1600/101208_ob4_ds1ds5_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TVSaYfZx0WI/AAAAAAAAGBE/cWbbBQCJOvk/s320/101208_ob4_ds1ds5_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TVSaZM27sqI/AAAAAAAAGBM/XR-6pttUcBo/s1600/101208_ob5_ds1ds5_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TVSaZM27sqI/AAAAAAAAGBM/XR-6pttUcBo/s320/101208_ob5_ds1ds5_compare.png" /></a></div><br />But&#8230; what?  Magically, they come into perfect agreement when the scan axis nearly lines up with the coordinate axis!  Or, is this just an effect of the worse weather on night 2?<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TVSaaP6ISNI/AAAAAAAAGBU/PvN5aFOxBAQ/s1600/101209_ob5_ds1ds5_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TVSaaP6ISNI/AAAAAAAAGBU/PvN5aFOxBAQ/s320/101209_ob5_ds1ds5_compare.png" /></a></div><br />Next thing to try: masked source map comparison.  Unfortunately, masking royally screwed up the long scans - probably because the initial polysub didn&#8217;t work.  And masking in the individual point source maps did nothing&#8230; so that pretty much rules out atmospheric oversubtraction, doesn&#8217;t it?<br /><br />What else could be causing this offset?  0pca looks the same as 13pca, give or take, so it&#8217;s not the atmospheric subtraction.  Could the downsampling result in an offset in the bolo-scaling?  Where else in the process could things go wrong?  Tomorrow, need to investigate .sav files with pyflagger&#8230;</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
From a comparison of 3 different epochs using about a dozen different reduction techniques, but all with pairs of cross-scans, ds1 is uniformly higher than ds5.<br /><br />The only thing left to do is compare the individual scans, I suppose&#8230; if the cross-scans behave differently, that explains the difference between 2010 and other epochs</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/06/making-maps-faster/">Making Maps Faster</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-06T21:38:00-07:00" pubdate data-updated="true">Feb 6<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The fundamental problem at this point is making the pipeline run faster.  At current speeds, with undownsampled data, it may take ~days to process a single map.  Ideas for faster processing:<br /><br /><ol><li> Find out how long it takes to converge to 1%, 5%&#8230;.  If it only requires 10 iterations, that&#8217;s a factor of 2 savings over current strategies.<br /><li> Use downsampled data of some sort if possible.  Does DS2 match DS1?  How do we measure it?  Flux-flux comparison and PSF point-source size measurements are the most important.  Need to automate PSF comparison&#8230;.<br /><li> Can we use median-combined individual images as a 0th order model?  I bet the answer is &#8216;yes&#8217; and will probably increase the speed of convergence by a large amount.  Tests to run?  This is probably needed if we are to split up the &#8216;super-fields&#8217; into smaller sub-fields, otherwise overlapping data will be used less effectively.<br /><li> Find some way to keep bgps.raw, bgps.ra, bgps.dec, and other items that are only used once on the HD during the iterative process.  Is there any way to separate out data in a struct in this manner?<br /></ol></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/03/delining-maps/">Delining - Maps</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-03T15:16:00-07:00" pubdate data-updated="true">Feb 3<span>rd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
First comment - delining has <b>no effect</b> on downsampled data.  At least for the 0709 epoch, there were NO lines AT ALL in the data.  From 0-5 Hz, it was just empty.  So we don&#8217;t have to worry about that&#8230; the problem only affects fully-sampled data.<br /><br />Then, onto map comparisons.  Curiously, the noise levels don&#8217;t drop after delining.  They actually go up a bit.  This may be because of the effects on PCA cleaning.<br /><br />However, flux levels in the sources go up by 0-10%.  As usual, the change in flux changes from field to field without any obvious reason.<br /><br />Example 1: A pointing field.  The source is ~2% brighter in the delined version, but otherwise the match between the two is nearly perfect.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUskr5xAMSI/AAAAAAAAF_M/J65CutNg9hM/s1600/101208_ob8_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUskr5xAMSI/AAAAAAAAF_M/J65CutNg9hM/s320/101208_ob8_compare.png" /></a><br /><br /><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUsksatOJSI/AAAAAAAAF_U/9X-rM6JQmCU/s1600/101208_ob8_psd.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUsksatOJSI/AAAAAAAAF_U/9X-rM6JQmCU/s320/101208_ob8_psd.png" /></a></div><br />Example 2: A bigger map, where the flux recovery is much greater when delining, but the background levels are also higher.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUsoBrKcQyI/AAAAAAAAF_c/junIzma1zg4/s1600/101208_o11_compare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUsoBrKcQyI/AAAAAAAAF_c/junIzma1zg4/s320/101208_o11_compare.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TUsoCFL1DiI/AAAAAAAAF_k/b1QrgajdlaE/s1600/101208_o11_psd.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="320" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TUsoCFL1DiI/AAAAAAAAF_k/b1QrgajdlaE/s320/101208_o11_psd.png" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/03/delining-and-cleaning-process/">Delining and the Cleaning Process</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-03T12:49:00-07:00" pubdate data-updated="true">Feb 3<span>rd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
One item I forgot to mention last night was the effects of lines/delining on<br />PCA subtraction.  These should be the primary effects on the final map for all<br />epochs except 2010, in which case the primary effect SHOULD be to reduce<br />substantial noise.<br /><br><br />In the examples below, there are PSDs of whole timestreams (left) and<br />example timestreams from single scans (right).  The first thing to note is that<br />the delined timestreams still have correlated components in the line region,<br />but they are suppressed - their amplitudes, and therefore their sort order in<br />the PCA removal scheme, are changed.  Since PCA cleaning is by its nature adaptive<br />(the number of components remains fixed, but the order changes), these effects<br />can be significant and dangerous.  If the line noise is more correlated, a PCA<br />component will be dedicated to removing it instead of atmospheric signal.<br /><br><br />Below are examples from l089 (epoch 0709) first.  These have less correlated<br />line noise and are more typical of BGPS observations. The first PCA component,<br />the average, does not change much with PCA cleaning.  However it is clear that<br />the second component changes substantially, from large-amplitude high-frequency<br />noise to small-amplitude variations that are very likely to describe<br />atmosphere.<br /><br /><hr><table><tr><td>Example 1 - Zeroing out the lines:</tr></td><tr><td><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TUrs_QRBBHI/AAAAAAAAF9Y/BH4XEdrFdt0/s1600/zero_pca_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='left' border="0" height="214" width="390" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TUrs_QRBBHI/AAAAAAAAF9Y/BH4XEdrFdt0/s320/zero_pca_psds.png" /></a></td> <td><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TUrs_nWI6YI/AAAAAAAAF9g/1Dcr0zyMBvM/s1600/zero_pca_timestreams.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TUrs_nWI6YI/AAAAAAAAF9g/1Dcr0zyMBvM/s320/zero_pca_timestreams.png" /></a></div></td></tr> <tr><td colspan=2><br></td></tr><tr><td>Example 2 - Fitting and removing the lines:</tr></td><tr><td><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUrs-f7qfqI/AAAAAAAAF9I/Dt3Kk9roeW8/s1600/fitline_pca_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='left' border="0" height="214" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUrs-f7qfqI/AAAAAAAAF9I/Dt3Kk9roeW8/s320/fitline_pca_psds.png" /></a></td> <td><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUrs-_it9CI/AAAAAAAAF9Q/06KgQOS2vNA/s1600/fitline_pca_timestreams.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUrs-_it9CI/AAAAAAAAF9Q/06KgQOS2vNA/s320/fitline_pca_timestreams.png" /></a></div></td></tr>  <tr><td colspan=2><br></td></tr><tr><td>Example 3 - Suppressing the lines with a non-fitted Gaussian:</tr></td><tr><td><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUr_QHkPADI/AAAAAAAAF9o/n5ylgDCLKPw/s1600/wingsupp_pca_psds.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='left' border="0" height="214" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUr_QHkPADI/AAAAAAAAF9o/n5ylgDCLKPw/s320/wingsupp_pca_psds.png" /></a></td> <td><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUr_QnuPZfI/AAAAAAAAF9w/lt4rEB1Qlq0/s1600/wingsupp_pca_timestreams.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUr_QnuPZfI/AAAAAAAAF9w/lt4rEB1Qlq0/s320/wingsupp_pca_timestreams.png" /></a></div></td></tr><tr><td colspan=2><br></td></tr><tr><td colspan=2><hr></td></tr> <tr><td colspan=2><br />The next examples are from December 2010 observations of Uranus.  In this case, the correlated noise component is clearly dominant.<br /></td></tr> <tr><td colspan=2><br></td></tr><tr><td>Zeroing lines:</td></tr><tr><td><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUsCBUeD67I/AAAAAAAAF94/CCj9gbJOgk8/s1600/zero_pca_psds.png" imageanchor="1" style="clear:right; float:right; margin-left:1em; margin-bottom:1em"><img border="0" height="214" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUsCBUeD67I/AAAAAAAAF94/CCj9gbJOgk8/s320/zero_pca_psds.png" /></a><br /></td><td><br /><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUsCB4wFnSI/AAAAAAAAF-A/YgbjYlybcOc/s1600/zero_pca_timestreams.png" imageanchor="1" style="clear:right; float:right; margin-left:1em; margin-bottom:1em"><img border="0" height="214" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUsCB4wFnSI/AAAAAAAAF-A/YgbjYlybcOc/s320/zero_pca_timestreams.png" /></a></div></td></tr></td></tr> <tr><td><br />Fitted lines:<br /></td></tr><tr><td><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUsCCQNHurI/AAAAAAAAF-I/a5_FQ7bqUjI/s1600/fitline_pca_psds.png" imageanchor="1" style="clear:right; float:right; margin-left:1em; margin-bottom:1em"><img border="0" height="214" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUsCCQNHurI/AAAAAAAAF-I/a5_FQ7bqUjI/s320/fitline_pca_psds.png" /></a></td> <td><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TUsCCtO7DTI/AAAAAAAAF-Q/wKBz0UhDruE/s1600/fitline_pca_timestreams.png" imageanchor="1" style="clear:right; float:right; margin-left:1em; margin-bottom:1em"><img border="0" height="214" width="390" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TUsCCtO7DTI/AAAAAAAAF-Q/wKBz0UhDruE/s320/fitline_pca_timestreams.png" /></a></div></td></tr> <tr><td><br />Non-fitted gaussian suppression:<br /></td></tr><tr><td><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUsCLgCRbmI/AAAAAAAAF-Y/WzHcr1E5q4s/s1600/wingsupp_pca_psds.png" imageanchor="1" style="clear:right; float:right; margin-left:1em; margin-bottom:1em"><img border="0" height="214" width="390" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUsCLgCRbmI/AAAAAAAAF-Y/WzHcr1E5q4s/s320/wingsupp_pca_psds.png" /></a></td> <td><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUsCL5e9eGI/AAAAAAAAF-g/TgmNWbiJzbs/s1600/wingsupp_pca_timestreams.png" imageanchor="1" style="clear:right; float:right; margin-left:1em; margin-bottom:1em"><img border="0" height="214" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUsCL5e9eGI/AAAAAAAAF-g/TgmNWbiJzbs/s320/wingsupp_pca_timestreams.png" /></a></div></td></tr>   <tr><td colspan=2><hr></td></tr><tr><td><br> Finally, these two are demonstrations of what you might expect to see for a purely noiseless images of a planet (it was constructed from a PSF).  PCA is first:<br /></td></tr> <tr><td><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUsCyELAZ1I/AAAAAAAAF-o/65L-rwGFscM/s1600/noiselesssim_pca_psds.png" imageanchor="1" style="clear:right; float:right; margin-left:1em; margin-bottom:1em"><img border="0" height="214" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUsCyELAZ1I/AAAAAAAAF-o/65L-rwGFscM/s320/noiselesssim_pca_psds.png" /></a></td> <td><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TUsCyRaYY7I/AAAAAAAAF-w/ZaRL4CPWw2E/s1600/noiselesssim_pca_timestreams.png" imageanchor="1" style="clear:right; float:right; margin-left:1em; margin-bottom:1em"><img border="0" height="214" width="390" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TUsCyRaYY7I/AAAAAAAAF-w/ZaRL4CPWw2E/s320/noiselesssim_pca_timestreams.png" /></a></div></td></tr> <tr><td><br /><br> A single bolometer&#8217;s timestream and PSD:<br /></td></tr>  <tr><td><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUsDgR4xcEI/AAAAAAAAF-4/udxMkuH6kio/s1600/noiselesssim_deline_wingsupp_10hz_noscan_nsig0_psds_000.png" imageanchor="1" style="clear:right; float:right; margin-left:1em; margin-bottom:1em"><img border="0" height="214" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUsDgR4xcEI/AAAAAAAAF-4/udxMkuH6kio/s320/noiselesssim_deline_wingsupp_10hz_noscan_nsig0_psds_000.png" /></a></td> <td><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUsDgtnBPNI/AAAAAAAAF_A/weQNMCgtrtc/s1600/noiselesssim_deline_wingsupp_10hz_noscan_nsig0_timestreams_000.png" imageanchor="1" style="clear:right; float:right; margin-left:1em; margin-bottom:1em"><img border="0" height="214" width="390" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUsDgtnBPNI/AAAAAAAAF_A/weQNMCgtrtc/s320/noiselesssim_deline_wingsupp_10hz_noscan_nsig0_timestreams_000.png" /></a></div></td></tr>  </table></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/02/some-pretty-neat-things-about-delining/">Some Pretty Neat Things About Delining&#8230;.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-02T21:50:00-07:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Well, I did the work, so might as well come up with some plots&#8230;<br /><br />I created a gaussian-fitting based delining code that saves all of the fits in a text file!  That&#8217;s a lot of data to play with, and allows me to draw some conclusions:<br /><br /><ol><li> For the narrow lines, the linewidth (gaussian sigma) is 0.03 Hz.  For the wide lines, it is 0.05. <div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUorHEcJO0I/AAAAAAAAF7k/TaWEWrbczZ0/s1600/histogram_fit_deline_linewidths.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUorHEcJO0I/AAAAAAAAF7k/TaWEWrbczZ0/s320/histogram_fit_deline_linewidths.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUorHusiIdI/AAAAAAAAF7s/NX67lE3OgaQ/s1600/histogram_fit_deline_linewidths_wide.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUorHusiIdI/AAAAAAAAF7s/NX67lE3OgaQ/s320/histogram_fit_deline_linewidths_wide.png" /></a></div><br /><li> The amplitudes from December 2010 are ENORMOUS compared to others!<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUosLpxdcdI/AAAAAAAAF70/QTgqsu4uQrg/s1600/histogram_fit_deline_amplitudes_epochcompare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUosLpxdcdI/AAAAAAAAF70/QTgqsu4uQrg/s320/histogram_fit_deline_amplitudes_epochcompare.png" /></a></div><br /><li> The width distributions of the two are similar, though the lines appear to be significantly wider in July 2009<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TUotc81_ztI/AAAAAAAAF78/8nxzuv8Apc8/s1600/histogram_fit_deline_width_epochcompare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TUotc81_ztI/AAAAAAAAF78/8nxzuv8Apc8/s320/histogram_fit_deline_width_epochcompare.png" /></a></div><br /></ol> I&#8217;ve also gotten to the point that I&#8217;m satisfied with how delining with wing suppression works.  Wing suppression is 0.4-2x quicker than fitting directly, depending on&#8230; not clear what exactly; it depends on epoch, but that could either be because there are more lines found or because of relative data size.  Does delining have to be done on whole timestreams, or can it be done on a scan-by-scan basis?  This is not entirely clear&#8230; the peaks are less suppressed when done on a scan-by-scan basis (presumably because the S/N is low and peaks are therefore not detected), but incorrect suppression (removing a line that&#8217;s not there) is reduced.  For short scans, the scan-by-scan approach is 10x faster; for longer scans it&#8217;s ~20% faster.  I think the scan-by-scan approach is going to be ideal. <br><hr><br>Examples from l089 (0709):  <br>Top row: non-fitted line suppression <div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUowz4zgpsI/AAAAAAAAF8E/iJd0tAbVj0U/s1600/deline_10hz_wingsuppress_psds_003.png" imageanchor="1" style="margin-left:1em; margin-left:1em"><img align='left' border="0" height="214" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUowz4zgpsI/AAAAAAAAF8E/iJd0tAbVj0U/s320/deline_10hz_wingsuppress_psds_003.png" /></a><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUow1IQ_Y9I/AAAAAAAAF8c/1OkISODwwPM/s1600/deline_fitline_10hz_noscan_nsig0_preservephase_timestreams_003.png" imageanchor="1" style="margin-right:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUow1IQ_Y9I/AAAAAAAAF8c/1OkISODwwPM/s320/deline_fitline_10hz_noscan_nsig0_preservephase_timestreams_003.png" /></a></div><br> <br>Bottom row: fitted line suppression <div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUow0sTBKsI/AAAAAAAAF8U/GtL0nyvlNBw/s1600/deline_fitline_10hz_noscan_nsig0_preservephase_psds_003.png" imageanchor="1" style="margin-left:1em; margin-left:1em"><img align='left' border="0" height="214" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUow0sTBKsI/AAAAAAAAF8U/GtL0nyvlNBw/s320/deline_fitline_10hz_noscan_nsig0_preservephase_psds_003.png" /></a><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUow0d-vEcI/AAAAAAAAF8M/or2gkvGxW4o/s1600/deline_10hz_wingsuppress_timestreams_003.png" imageanchor="1" style="margin-right:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUow0d-vEcI/AAAAAAAAF8M/or2gkvGxW4o/s320/deline_10hz_wingsuppress_timestreams_003.png" /></a></div><br><br><hr><div class="separator" style="clear: both; text-align: left;"><br><left>Examples from Uranus (1012, really really liney):</left></div><br>Top row: non-fitted line suppression <div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUoxEvWqRwI/AAAAAAAAF8k/J6ImhPN9ZS0/s1600/deline_10hz_wingsuppress_psds_003.png" imageanchor="1" style="margin-left:1em; margin-left:1em"><img align='left' border="0" height="214" width="390" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUoxEvWqRwI/AAAAAAAAF8k/J6ImhPN9ZS0/s320/deline_10hz_wingsuppress_psds_003.png" /></a><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUoxFMLdujI/AAAAAAAAF8s/DrzWxFCdBu0/s1600/deline_10hz_wingsuppress_timestreams_003.png" imageanchor="1" style="margin-right:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUoxFMLdujI/AAAAAAAAF8s/DrzWxFCdBu0/s320/deline_10hz_wingsuppress_timestreams_003.png" /></a></div><br> <br>Bottom row: fitted line suppression <div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TUoxFXYN_tI/AAAAAAAAF80/BQwv6ROSOJ4/s1600/deline_fitline_10hz_noscan_nsig0_preservephase_psds_003.png" imageanchor="1" style="margin-left:1em; margin-left:1em"><img align='left' border="0" height="214" width="390" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TUoxFXYN_tI/AAAAAAAAF80/BQwv6ROSOJ4/s320/deline_fitline_10hz_noscan_nsig0_preservephase_psds_003.png" /></a><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUoxF_c0URI/AAAAAAAAF88/JU9_F-8HC2k/s1600/deline_fitline_10hz_noscan_nsig0_preservephase_timestreams_003.png" imageanchor="1" style="margin-right:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUoxF_c0URI/AAAAAAAAF88/JU9_F-8HC2k/s320/deline_fitline_10hz_noscan_nsig0_preservephase_timestreams_003.png" /></a></div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
Next step: prove that this works in maps&#8230;</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/01/delining/">Delining</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-01T18:35:00-07:00" pubdate data-updated="true">Feb 1<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Delining refers to the process of removing electronic noise that is aliased to<br />particular frequencies by the discrete sampling of the data.  Typical<br />electronic noise is at 60 Hz with some width.  It gets aliased to these<br />frequencies:<br /><br /><br /><code>linefreqs = [10.05+findgen(10)*1.2,10.05-((findgen(7)+1))*1.2]</code><br /><br />The 10.05 Hz and 20.10 Hz are the worst in most cases, and they are wider.  For<br />the above lines, we &#8220;remove&#8221; a bandwidth of 0.09 Hz by averaging over the<br />neighboring 0.5 Hz on either side.  For the wider lines, we remove 0.5 Hz by<br />averaging over the neighboring 1.5 Hz on either side.<br /><br /><br /><br />There are a few new things about the delining process that did not exist in James&#8217; old version:<br /><ol><li> The wide-band lines are removed<br /><li> A check is performed before removing the lines - they are only removed if the line region mean is<br />2-sigma above the average region (as computed via median and mad)<br /><li> The replaced noise is computed via median/mad, and the new noise level is set 5x lower than in the<br />neighboring region<br /></ol><hr>Now, some examples:   <div class="separator" style="clear: both; text-align: left;"><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUisqDHJ08I/AAAAAAAAF58/BpgnudfdAAw/s1600/deline_timestreams_003.png" imageanchor="1" style=""><img align='left' border="0" height="267" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUisqDHJ08I/AAAAAAAAF58/BpgnudfdAAw/s400/deline_timestreams_003.png" /></a>  <a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUisqWN6ueI/AAAAAAAAF6E/yAka7dlomjo/s1600/deline_psds_003.png" imageanchor="1" style=""><img align='right' border="0" height="267" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUisqWN6ueI/AAAAAAAAF6E/yAka7dlomjo/s400/deline_psds_003.png" /></a></div> The timestream (left) and PSD (right) of a &#8220;pretty good&#8221; bolometer.  There is a lot of noise in lines, but note that the peak power is 2-3 orders of magnitude below the PSD peak.  In this case the &#8220;Power&#8221; is in Jy.  There is little astrophysical information below ~14&#8221; (9 Hz), and there should be none below 7.2&#8221; (17 Hz), but there is plausibly information at these scales.  It therefore makes sense to save as much information as possible.  As can be seen in the delined PSD, the peaks drop by a substantial fraction, but not all the way - that&#8217;s because these lines are wider than typically observed.  Unfortunately, I don&#8217;t have any really good ideas about how to fix this issue - I think fitting gaussians to each line, while attractive, is going to be prohibitively expensive in both programmer and processor time.  However&#8230; it would be a very interesting project to undertake.    In the timestream, it can be seen that the RMS drops substantially when the lines are filtered out (note that the timestream is strongly dominated by large-scale structure, so &#8216;substantial&#8217; is really based on the RMS of the lines removed).   <div class="separator" style="clear: both; text-align: left;"><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TUisq6D55wI/AAAAAAAAF6M/PZ4hyu5FkZM/s1600/deline_10hz_timestreams_003.png" imageanchor="1" style=""><img align=left border="0" height="267" width="390" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TUisq6D55wI/AAAAAAAAF6M/PZ4hyu5FkZM/s400/deline_10hz_timestreams_003.png" /></a>  <a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TUisrWpL7yI/AAAAAAAAF6U/tSsL5Jc4n-A/s1600/deline_10hz_psds_003.png" imageanchor="1" style=""><img align=right border="0" height="267" width="390" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TUisrWpL7yI/AAAAAAAAF6U/tSsL5Jc4n-A/s400/deline_10hz_psds_003.png" /></a></div>The next two plots look identical to the previous ones.  In principle, they include the wide-band delining.  However, in this case, the satellite lines to either side of the 10 Hz line are too strong and prevent identification of the 10 Hz line.  This is unfortunate, again, but no obvious solution presents itself.   <div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUixLZbVHPI/AAAAAAAAF6c/xCWLpb9CKX4/s1600/deline_timestreams_004.png" imageanchor="1" style=""><img align=left border="0" height="267" width="390" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUixLZbVHPI/AAAAAAAAF6c/xCWLpb9CKX4/s400/deline_timestreams_004.png" /></a>  <a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUixL8APCQI/AAAAAAAAF6k/j8FyKbgOdDo/s1600/deline_psds_004.png" imageanchor="1" style=""><img  align=right border="0" height="267" width="390" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUixL8APCQI/AAAAAAAAF6k/j8FyKbgOdDo/s400/deline_psds_004.png" /></a></div>Now we come to a truly problematic bolometer.  The lines completely dominate the power spectrum.  Narrow line removal fails.  <div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUixMjNxbkI/AAAAAAAAF6s/Hr8ouprcMpY/s1600/deline_10hz_timestreams_004.png" imageanchor="1" style=""><img align=left border="0" height="267" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUixMjNxbkI/AAAAAAAAF6s/Hr8ouprcMpY/s400/deline_10hz_timestreams_004.png" /></a>  <a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUixNMO2NsI/AAAAAAAAF60/ZAsirbb25QY/s1600/deline_10hz_psds_004.png" imageanchor="1" style=""><img align=right border="0" height="267" width="390" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUixNMO2NsI/AAAAAAAAF60/ZAsirbb25QY/s400/deline_10hz_psds_004.png" /></a></div>Wide line removal does a much, much better job, dropping the RMS by an order of magnitude&#8230;. but the bolometer probably still needs to be removed, since the astrophysical signal is 2-3 orders of magnitude below that.   <div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUizkq9x4TI/AAAAAAAAF68/2xYY86d6aTQ/s1600/deline_timestreams_001.png" imageanchor="1" style=""><img align=left border="0" height="267" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUizkq9x4TI/AAAAAAAAF68/2xYY86d6aTQ/s400/deline_timestreams_001.png" /></a>  <a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUizlH0XvMI/AAAAAAAAF7E/ptDb5I3os6A/s1600/deline_psds_001.png" imageanchor="1" style=""><img align=right border="0" height="267" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUizlH0XvMI/AAAAAAAAF7E/ptDb5I3os6A/s400/deline_psds_001.png" /></a></div>The 2010 data had much worse line noise and had to be delined.  JS accomplished this by throwing out all data above a certain frequency, but I prefer the delining approach.  It is clearly effective, but again leaves much to be desired.  Should the flagged bandwidth be increased?  What about the extra lines around 18 Hz?  <div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TUizln1mSCI/AAAAAAAAF7M/hTkZRUU3-ck/s1600/deline_10hz_timestreams_001.png" imageanchor="1" style=""><img align=left border="0" height="267" width="390" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TUizln1mSCI/AAAAAAAAF7M/hTkZRUU3-ck/s400/deline_10hz_timestreams_001.png" /></a>  <a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUizmdrMkgI/AAAAAAAAF7U/-dlB4u30hBo/s1600/deline_10hz_psds_001.png" imageanchor="1" style=""><img align=right border="0" height="267" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUizmdrMkgI/AAAAAAAAF7U/-dlB4u30hBo/s400/deline_10hz_psds_001.png" /></a></div><br />Again, the wide line flagging fails because of the satellite lines.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
Bleh, a whole day&#39;s work dedicate to new delining methods and testing.  Very unrewarding.  However, there are results that I need to FINALLY prove and show tomorrow:<br />1. amplitude suppression + phase preservation is a good alternative to zeroing/scrambling or replacing with noise<br />2. line fitting is effective but slow<br />3. Assuming a line profile and suppressing is nearly as effective as line fitting<br />4. scan-by-scan is less effective than observation-by-observation for fitting (but it&#39;s not clear if that holds for other methods)</div>
</div>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
What about the effects on the map?  Unfortunately, in the tests I&#39;ve run, delining actually INCREASES the noise in the map!  How is this possible?  My only hypothesis is that PCA cleaning does an excellent job of removing the line noise, but when it is replaced with truly uncorrelated gaussian noise, the PCA cleaning no longer removes that component.  <br /><br />But we don&#39;t want PCA cleaning to grab instrumental correlated noise; we want it to be limited to atmospheric noise.  So ideally we want to completely remove the line noise without adding noise to the image&#8230; maybe the line regions should just be set to zero after all&#8230;.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/01/21/more-evidence-that-downsampling-causes/">More Evidence That Downsampling Causes Problems</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-21T15:48:00-07:00" pubdate data-updated="true">Jan 21<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The captions are pretty much the same as for <a href="http://bolocam.blogspot.com/2011/01/downsampling-has-serious-negative.html">the previous post</a>, but this is a larger field and the effects are more serious.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TToMoxR5xJI/AAAAAAAAF3Q/qod6NlqiNpU/s1600/orion_omc1_dstest_images.png" imageanchor="1" style=""><img border="0" height="303" width="400" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TToMoxR5xJI/AAAAAAAAF3Q/qod6NlqiNpU/s400/orion_omc1_dstest_images.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TToMpcpYjJI/AAAAAAAAF3Y/Hp9V2KcCEgE/s1600/orion_omc1_dstest_autocorrfits.png" imageanchor="1" style=""><img border="0" height="281" width="400" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TToMpcpYjJI/AAAAAAAAF3Y/Hp9V2KcCEgE/s400/orion_omc1_dstest_autocorrfits.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TToMpxmFurI/AAAAAAAAF3g/-JJwti4yW58/s1600/orion_omc1_dstest_psds.png" imageanchor="1" style=""><img border="0" height="286" width="400" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TToMpxmFurI/AAAAAAAAF3g/-JJwti4yW58/s400/orion_omc1_dstest_psds.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TToMqdKihGI/AAAAAAAAF3o/X54ObZ_AHkk/s1600/orion_omc1_dstest_pixel-pixel.png" imageanchor="1" style=""><img border="0" height="282" width="400" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TToMqdKihGI/AAAAAAAAF3o/X54ObZ_AHkk/s400/orion_omc1_dstest_pixel-pixel.png" /></a></div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
Downsampling by a factor of 3 appears not to be an option because this error:<br />% NCDF_VARGET: Requested read is larger than data in dimension 0. Reducing COUNT to 615.<br />% REBIN: Result dimensions must be integer factor of original dimensions<br />% Execution halted at: NCDF_VARGET_SCALE  133 /Users/adam/work/bgps_pipeline/support/ncdf_varget_scale.pro<br />occurs.</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/01/20/downsampling-has-serious-negative/">Downsampling Has Serious Negative Effects on the Data</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-20T13:16:00-07:00" pubdate data-updated="true">Jan 20<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Background: Downsampling is performed using Old Pipeline code called<br /><code>process_ncdf</code>.  All BGPS data was downsampled by a factor of 5<br />before mapping because of data size concerns.  I did this &#8216;blindly&#8217; (i.e., just<br />accepted that I should) because James said I could.  <br /><br />However, I had previously noted that the pointing files could not be done with<br />downsampled data because the beams &#8216;looked funny&#8217; or something along those<br />lines; it may also have been a simple map sampling issue in which not all<br />pixels were filled with a downsampled image.<br /><br />Anyway, I decided to go back and quantify the effects.  The plots below are from the<br />single &#8220;pointing-style&#8221; observation of OMC1 from 2009.  The units are volts.  &#8216;ds1&#8217; indicates<br />sampling at 0.02 seconds, &#8216;ds5&#8217; indicates sampling every 0.1 seconds.  The scan rate was <br />120&#8221;/s.<br /><br /><hr><div class="separator" style="clear: both; text-align: left;"><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TTiWWSS-JVI/AAAAAAAAF24/4m2SFfwWkmA/s1600/omc1_dstest_autocorrfits.png" imageanchor="1" style=""><img align='right' border="0" height="281" width="400" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TTiWWSS-JVI/AAAAAAAAF24/4m2SFfwWkmA/s400/omc1_dstest_autocorrfits.png" /></a></div>The beam sizes were measured from the autocorrelation maps.  However, because there is structure on many scales<br />in this map, I had to use a rather ad-hoc method to remove the correlated structure.  I fitted a gaussian<br />to the elliptical northwest-southeast structure, removed it, then fitted a gaussian to the remaining circular<br />thing in the center, which is approximately the beam.<br /><br />If I fit the &#8220;beam&#8221; gaussian with an ellipse, I get:<br />Beamsize 1_1: 36.15,26.23<br />Beamsize 1_5: 48.39,30.21<br /><br />With a circle:<br />Beamsize 1_1: 29.51<br />Beamsize 1_5: 35.31<br /><br /><div class="separator" style="clear: both; text-align: center;"><br><br /><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TTiWWKeGbJI/AAAAAAAAF2w/jOEmOnDa1hw/s1600/omc1_dstest_images.png" imageanchor="1" style=""><img align='left' border="0" height="307" width="400" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TTiWWKeGbJI/AAAAAAAAF2w/jOEmOnDa1hw/s400/omc1_dstest_images.png" /></a></div><center> The ds1 and ds5 images compared. </center><br /><br /><div class="separator" style="clear: both; text-align: center;"><br><br /><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TTiWWlzyWKI/AAAAAAAAF3A/nPCN-C0e3Jo/s1600/omc1_dstest_psds.png" imageanchor="1" style=""><img  align='right' border="0" height="284" width="400" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TTiWWlzyWKI/AAAAAAAAF3A/nPCN-C0e3Jo/s400/omc1_dstest_psds.png" /></a></div><center> The PSDs of the two images (on identical grids).  Note that ds5 loses power at small spatial scales, 50% at 40&#8221;! </center><br /><br /><div class="separator" style="clear: both; text-align: center;"><br><br /><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TTiWWl3j3dI/AAAAAAAAF3I/Ef3WHEv5oXU/s1600/omc1_dstest_pixel-pixel.png" imageanchor="1" style=""><img align='left' border="0" height="277" width="400" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TTiWWl3j3dI/AAAAAAAAF3I/Ef3WHEv5oXU/s400/omc1_dstest_pixel-pixel.png" /></a></div><center> The pixel-pixel plot with a fit that shows a 10% overall flux loss (best-fit). </center></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/03/bgps-data-paper-published/">BGPS Data Paper Published</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-03T09:36:00-06:00" pubdate data-updated="true">Nov 3<span>rd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a href="http://irsa.ipac.caltech.edu/data/BOLOCAM_GPS/bgps_methods.pdf"> The Bolocam Galactic Plane Survey I. Survey Description and Data Reduction</a> <a href=http://arxiv.org/abs/1011.0691> arXiv</a><br /><a href="http://adsabs.harvard.edu/abs/2010ApJS..188..123R"> The Bolocam Galactic Plane Survey II. Catalog of the Image Data</a> <a href="http://arxiv.org/abs/0909.2871"> arXiv</a><br /><a href="http://adsabs.harvard.edu/abs/2010ApJ...717.1157D"> The Bolocam Galactic Plane Survey III. Characterizing Physical Properties of Massive Star-Forming Regions in the Gemini OB1 Molecular Cloud </a> <a href="http://arxiv.org/abs/1005.4969"> arXiv</a><br /><a href="http://adsabs.harvard.edu/abs/2010ApJ...721..137B"> The Bolocam Galactic Plane Survey IV:  = 1.1 and 0.35 mm Dust Continuum Emission in the Galactic Center Region</a></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/24/v20-is-to-v10-as-is-to-v10/">v2.0 Is to v1.0 as ___ Is to v1.0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-24T09:42:00-06:00" pubdate data-updated="true">Jun 24<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TCN8uqZ-xSI/AAAAAAAAFw8/TywL2w_ntIk/s1600/l079_comparison.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TCN8uqZ-xSI/AAAAAAAAFw8/TywL2w_ntIk/s320/l079_comparison.png" /></a><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TCN8vlKAjAI/AAAAAAAAFxE/BZE5Wlca8oU/s1600/l079_comparison_psd.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TCN8vlKAjAI/AAAAAAAAFxE/BZE5Wlca8oU/s320/l079_comparison_psd.png" /></a></div><br />Apparently v2.0 recovers flux better at all scales than v1.0.&nbsp; However, it is noisier.&nbsp; The full comparison is available <a href="http://casa.colorado.edu/%7Eginsbura/bgps/v1.0_v2.0_comparison.pdf">here</a>.&nbsp; The trustworthy range of flux scales is 1.2-1.6ish.&nbsp; The flux is increased at ALL scales in most images.&nbsp; However, as was noted in comparisons with MAMBO, there may be curvature in the best-fit lines.&nbsp; Also, l=35 does not appear to scale up linearly&#8230; G34 is fainter in v2.0?<br /><br />In the low S/N fields, the PSD is more reliable than the pixel-pixel comparison.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/24/pps-comparison-completed/">PPS Comparison Completed</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-24T09:24:00-06:00" pubdate data-updated="true">Jun 24<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The PPS scale factor seems to hold for many different (and ridiculous) aperture sizes.&nbsp; The full results are <a href="http://casa.colorado.edu/%7Eginsbura/bgps/pps_comparison.pdf">here.</a></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/21/pps-analysis-suggests-possible-solution/">PPS Analysis: Suggests a Possible Solution to the Discrepancy</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-21T12:17:00-06:00" pubdate data-updated="true">Jun 21<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The comparisons I mentioned in the previous post are sort of done.&nbsp; They are pretty suggestive of a solution to the &#8220;flux recovery problem&#8221; we think must be true.&nbsp; However, even if it is a solution, it doesn&#8217;t really solve the problem completely.<br /><br />It looks like v1.0 should be scaled up by a factor of 1.3-1.4 (not 1.5).&nbsp; v2.0 is consistent with the PPS sources to within 5%, and might even be slightly too high.<br /><br />The comparison was done by taking the flux in a 60&#8221; radius aperture (equivalent to bolocat 120&#8221; diameter apertures) and subtracting off the background measured in a 120&#8221; radius annulus around the source.&nbsp; Without the background subtraction, these numbers would look very different: in the science fields, most of the sources sit on an extended background.&nbsp; Even though the &#8220;background flux&#8221; isn&#8217;t recovered in the PPS fields, it should contribute to the source background because it is involved in the atmosphere subtraction (it&#8217;s sort of &#8220;already subtracted&#8221; so you have to subtract from the science fields).<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TB-rPT7MLdI/AAAAAAAAFws/7oWTt3FOF-M/s1600/BGPS_correction_factors.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TB-rPT7MLdI/AAAAAAAAFws/7oWTt3FOF-M/s320/BGPS_correction_factors.png" /></a><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TB-rQId8G_I/AAAAAAAAFw0/NUJKQO_5zI4/s1600/BGPS_correction_factor_histograms.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TB-rQId8G_I/AAAAAAAAFw0/NUJKQO_5zI4/s320/BGPS_correction_factor_histograms.png" /></a></div>Next step: direct comparison between v1.0 and v2.0.&nbsp; Pixel by pixel, aperture, and powerspectrum</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/16/pps-analysis/">PPS Analysis</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-16T08:46:00-06:00" pubdate data-updated="true">Jun 16<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve started looking at PPS fields to see if I can glean any additional information about the &#8220;flux discrepancy&#8221; from them.&nbsp; However, the results are, as usual, unenlightening.<br /><br />There is no consistent increase in flux when 3 PCA components are used instead of 13 PCA components - very plausibly an indication that 13 PCA is not too much to subtract because it&#8217;s only atmosphere.&nbsp; Similarly, there is no obvious benefit to using a quadratic sky estimator instead of a PCA estimator.<br /><br />I&#8217;m using aperture photometry (without background subtraction) on identical fields to perform these comparisons.&nbsp; I&#8217;ve selected (arbitrarily) the l357pps source as my comparison source.&nbsp; The next step (ongoing) is to compare to the co-added maps and crosshatched large-scale maps of the same field.<br /><br />(next step) PPS &lt; single cross-hatched large-scale observation pair &lt; 13PCA full combined map &lt; 3PCA full combined map.<br /><br />Unfortunately, this result implies that the small maps under-recover flux, which suggests that the large maps are too bright, which is the opposite of what we expect.&nbsp; Additionally, lower noise -&gt; more flux recovered?<br /><br />When background subtraction is included, the 3PCA and 13PCA fluxes match nearly perfectly.<br /><br />Despite the failure of this test (PPS &lt; full field), I will do a systematic comparison of PPS sources with 0PCA + masking to the large fields in the hopes that doing so can provide a legitimate estimate of the &#8220;scale factor&#8221; from treating small and large fields differently.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/11/bgps-pipeline-published/">BGPS Pipeline Published</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-11T13:59:00-06:00" pubdate data-updated="true">Jun 11<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The BGPS pipeline has officially been released on <a href="http://code.google.com/p/bgpspipeline/"> Google Code</a>.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/08/aperture-photometry-on-herschel-based/">Aperture Photometry on Herschel-based Simulation</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-08T11:22:00-06:00" pubdate data-updated="true">Jun 8<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TA6IGulWZrI/AAAAAAAAFvU/MHMBrTgxxnU/s1600/ApertureCompare_Source00.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="133" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TA6IGulWZrI/AAAAAAAAFvU/MHMBrTgxxnU/s200/ApertureCompare_Source00.png" width="200" /></a><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TA6IHwUnzhI/AAAAAAAAFvc/6xv7rKG9Ao4/s1600/ApertureCompare_Source01.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="133" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TA6IHwUnzhI/AAAAAAAAFvc/6xv7rKG9Ao4/s200/ApertureCompare_Source01.png" width="200" /></a><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TA6IIrbLWVI/AAAAAAAAFvk/mVRxd8bCY0w/s1600/ApertureCompare_Source02.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="133" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TA6IIrbLWVI/AAAAAAAAFvk/mVRxd8bCY0w/s200/ApertureCompare_Source02.png" width="200" /></a><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TA6IJQBhEoI/AAAAAAAAFvs/VhnsSNbs75A/s1600/ApertureCompare_Source03.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="133" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TA6IJQBhEoI/AAAAAAAAFvs/VhnsSNbs75A/s200/ApertureCompare_Source03.png" width="200" /></a><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TA6IKP3X_SI/AAAAAAAAFv0/LCXAGTyp_yE/s1600/ApertureCompare_Source04.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="133" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TA6IKP3X_SI/AAAAAAAAFv0/LCXAGTyp_yE/s200/ApertureCompare_Source04.png" width="200" /></a><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TA6ILDl55sI/AAAAAAAAFv8/jFfTmYof1yQ/s1600/ApertureCompare_Source05.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="133" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TA6ILDl55sI/AAAAAAAAFv8/jFfTmYof1yQ/s200/ApertureCompare_Source05.png" width="200" /></a><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TA6IL9QhTmI/AAAAAAAAFwE/TAIwnefrPlE/s1600/ApertureCompare_Source06.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="133" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TA6IL9QhTmI/AAAAAAAAFwE/TAIwnefrPlE/s200/ApertureCompare_Source06.png" width="200" /></a><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TA6IM_9TaaI/AAAAAAAAFwM/0YpADED3SlE/s1600/ApertureCompare_Source07.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="133" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TA6IM_9TaaI/AAAAAAAAFwM/0YpADED3SlE/s200/ApertureCompare_Source07.png" width="200" /></a><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TA6IOYETGbI/AAAAAAAAFwU/aq5OYcifDc8/s1600/ApertureCompare_Source08.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="133" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TA6IOYETGbI/AAAAAAAAFwU/aq5OYcifDc8/s200/ApertureCompare_Source08.png" width="200" /></a><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TA6IPFzIniI/AAAAAAAAFwc/omOacZgjFuc/s1600/ApertureCompare_Source09.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="133" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TA6IPFzIniI/AAAAAAAAFwc/omOacZgjFuc/s200/ApertureCompare_Source09.png" width="200" /></a></div>Aperture Photometry on isolated and not-so-isolated sources in the Herschel-based BGPS simulation using the L=111 field for the &#8220;noise&#8221;.  Depending on the aperture, our flux recovery can be really really low.  The images should give an idea of the S/N.&nbsp; Background subtraction means subtracting the median of the image&#8230;. it works frighteningly well in most cases.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/07/pipeline-flowcharts/">Pipeline Flowcharts</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-07T16:39:00-06:00" pubdate data-updated="true">Jun 7<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
In the process of hunting down a supposed calibration error, I determined that it was necessary to generate a more intuitive graphical display of the pipeline.  Hence, pipeline flowcharts (generated in keynote).  The key should be self-explanatory to the degree that any part of these charts is understandable to an outsider.  The yellow boxes represent wrapper scripts/functions while the rounded box bubbles show individual functions within these wrappers and their interrelationship.<br /><br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TA10NjZw6qI/AAAAAAAAFtc/ibmISvLIcm0/s1600/PipelineFlowchartV1.0.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="241" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TA10NjZw6qI/AAAAAAAAFtc/ibmISvLIcm0/s400/PipelineFlowchartV1.0.png" width="400" /></a></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TA10O8mOl5I/AAAAAAAAFtk/W5M6XdTf6mM/s1600/PipelineFlowchartV2.0.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="257" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TA10O8mOl5I/AAAAAAAAFtk/W5M6XdTf6mM/s400/PipelineFlowchartV2.0.png" width="400" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/07/minor-mystery-resolved-perseus-cal/">Minor Mystery Resolved: Perseus Cal Curve</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-07T16:30:00-06:00" pubdate data-updated="true">Jun 7<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
When I started working on the Perseus data again, I decided to use the Enoch 2006 calibration curve directly.  However, it has a very different form than all other epochs.  The reason, as revealed below, is that it was not forced through 0,0.  Additionally, all of the BGPS data was observed with mean DC ~ 2-3 V, while the Perseus data was observed with mean DC 4-5 V, so the relevant regime is in a very different location.  The reference DC bias was much lower, ~2.15 V vs. 4.6 V in the 2005-2007 BGPS and 2.6 V in the 2009 BGPS.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TA1yfdAS7BI/AAAAAAAAFtU/XvYiDQKi-cM/s1600/CalCurveComparison.png" imageanchor="1" ><img border="0" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TA1yfdAS7BI/AAAAAAAAFtU/XvYiDQKi-cM/s320/CalCurveComparison.png" /></a></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/06/22/release/">RELEASE</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-22T17:30:00-06:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Finally.<br /><br /><a href="http://irsa.ipac.caltech.edu/">http://irsa.ipac.caltech.edu/</a></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/03/20/eimers-project/">Eimers Project</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-20T17:46:00-06:00" pubdate data-updated="true">Mar 20<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Project for Marc Eimers:<br />Determine velocities to molecular clouds by a variety of methods.  Start with l=30<br /><br />1. Find archival data, particularly from the JCMT, for each core.<br />2. Compare morphologically to 13CO from GRS<br />3. Find Vizier data</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/03/20/locating-beams/">Locating Beams</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-20T15:16:00-06:00" pubdate data-updated="true">Mar 20<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_lsgW26mWZnU/ScQIDaTTPhI/AAAAAAAAEzk/C67XkoQb244/s1600-h/beamlocations_050619_default_bolopars.png"><img style="cursor:pointer; cursor:hand;width: 400px; height: 311px;" src="http://3.bp.blogspot.com/_lsgW26mWZnU/ScQIDaTTPhI/AAAAAAAAEzk/C67XkoQb244/s400/beamlocations_050619_default_bolopars.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5315382314896932370" /></a><br /><br />White - &#8220;Default&#8221;, OP-calculated beam-locations<br />Red - My code&#8217;s beam locations<br />Yellow - Boloparams, the fiducial beam locations</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/03/08/gem-ob1-comparisons/">Gem OB1 Comparisons</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-08T18:03:00-06:00" pubdate data-updated="true">Mar 8<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;m running 0,1,2,3,5,7,10,16, and 19 PCA component 51 iteration maps of Gem OB1 with deconvolution.  No clue when they&#8217;ll be done because they&#8217;re at the end of a long queue.<br /><br />Next (important!) step is to re-run the simulations with linear source sizes but with different numbers of PCA components, different kernel sizes, etc&#8230;.. there is a LOT of parameter space to cover.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/03/04/detailed-look-at-l086/">A Detailed Look at L086</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-04T14:02:00-07:00" pubdate data-updated="true">Mar 4<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Despite a slew of alignment errors, it appears that the alignment for MOST fields turns out OK using Method 3 of the pixel-shift code; the signal to noise is VERY low in a lot of fields.<br /><br />070724_o38 does not come up with a good fit, for very good reason - there appears to be no signal at all.<br /><br />070907_o20 is a problem.  The offset was 27 pixels, which is too large, but nonetheless correct.  I had to institute the plane fitter at an earlier stage to get it to work.<br /><br />However, the biggest problem: the SCUBA source aligns with 070907_o20 but not the rest of the maps.  So I needed to re-fit everything.  That was a BIG mistake, we need to check carefully for it in other fields.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/03/03/methods-paper-figures-analysis-to/">Methods Paper: Figures / Analysis to Produce</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-03T20:19:00-07:00" pubdate data-updated="true">Mar 3<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The methods paper needs some justification of the number of PCA components used.  This will require a map of some field with a range of number of PCA components.  <br /><br />Plan:<br />simulate a map of L111 (the most square field) with 0-20 PCA components x 21 iterations and a variety of source sizes and plot the recovered flux vs. number of PCA components.  Ideally, do this with both deconvolution and not.  Estimated processing time is ~24 hours.<br /><br />Also, a plot of flux vs. iteration number will be useful.<br /><br /><br />Glitch filtering method has been modified:<br />&#8220;Glitches are removed by drizzling each bolometer measurement into a given pixel using the mapping M[p], but retaining each pixel as an array of measurements.  Then, measurements exceeding $3\times MAD$ (Median Average Deviation) are flagged out in the timestream.  In cases where there were too few ($<3$) hits per pixel, the pixel was completely flagged out.  This only occurred for pixels at scan edges."<br /><br /><br /><br />Data flagging:<br />Partly covered by deglitching.  Many scans were flagged by hand to remove overly noisy scans and those that were observed to confuse the iterative mapper.  Hand flagging is more robust than automated and can remove features caused by the filter convolved with the glitch.<br /><br /><br />Creation of astrophysical model:<br />Not entirely sure what this section entails.  Should have a subsection on deconvolution though.<br /><br />Jackknifing has not generally been done&#8230;</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/03/03/43-relative-alignment-and-mosaicing/">4.3 Relative Alignment and Mosaicing</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-03T19:51:00-07:00" pubdate data-updated="true">Mar 3<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Relative alignment was performed by finding the peak of the cross-correlation between images and a pointing master selected from the epoch with the best-constrained pointing model for that field.  Each observation was initially mapped individually, then all observations of a given field were cross-correlated with a selected master image of that field.  The cross-correlation peak was fit with a gaussian and the difference between the gaussian peak and the image center was used as the pixel offset.  The offsets were recorded and written to the timestreams.  Finally, all observations of a field were merged into a single timestream with pointing offsets applied to create the field mosaic.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/03/02/bunch-of-plots/">A Bunch of Plots</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-02T18:05:00-07:00" pubdate data-updated="true">Mar 2<span>nd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_lsgW26mWZnU/SayCk8uDT2I/AAAAAAAAEzE/hVCHxfejfxk/s1600-h/noise_per_deg.png"><img style="cursor:pointer; cursor:hand;width: 400px; height: 267px;" src="http://1.bp.blogspot.com/_lsgW26mWZnU/SayCk8uDT2I/AAAAAAAAEzE/hVCHxfejfxk/s400/noise_per_deg.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5308761632049155938" /></a><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_lsgW26mWZnU/SayCkyW19KI/AAAAAAAAEy8/Df_SgR-blY4/s1600-h/fillfact_per_deg.png"><img style="cursor:pointer; cursor:hand;width: 400px; height: 267px;" src="http://3.bp.blogspot.com/_lsgW26mWZnU/SayCkyW19KI/AAAAAAAAEy8/Df_SgR-blY4/s400/fillfact_per_deg.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5308761629267457186" /></a><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_lsgW26mWZnU/SayCk9BDNzI/AAAAAAAAEy0/oBgJX2IWav8/s1600-h/mean_per_deg.png"><img style="cursor:pointer; cursor:hand;width: 400px; height: 267px;" src="http://1.bp.blogspot.com/_lsgW26mWZnU/SayCk9BDNzI/AAAAAAAAEy0/oBgJX2IWav8/s400/mean_per_deg.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5308761632128841522" /></a><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_lsgW26mWZnU/SayCksjhWmI/AAAAAAAAEys/vt0ZUY50Uqw/s1600-h/sources_per_deg.png"><img style="cursor:pointer; cursor:hand;width: 400px; height: 267px;" src="http://2.bp.blogspot.com/_lsgW26mWZnU/SayCksjhWmI/AAAAAAAAEys/vt0ZUY50Uqw/s400/sources_per_deg.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5308761627710020194" /></a><br />I wasted a lot of time making these so I figured I might as well waste a little space showing them.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/03/02/new-series-of-problems/">A New Series of Problems</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-02T17:33:00-07:00" pubdate data-updated="true">Mar 2<span>nd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<ol><br /><li> There are severe (~5 pixel) pointing offsets in the MOSAICs.  They are caused by IRAF and I can&#8217;t figure out exactly why.<br /><li> Deconvolution has created more artifacts at l=54, 70, 357.  I don&#8217;t know how to fix them.<br /><li> Either my earlier time estimates were way off, or the mapping has gotten slower.  It now takes ~120 computer hours (72 real hours) where before it was taking closer to 48.<br /></ol></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/02/23/return-to-deconvolution/">Return to Deconvolution</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-02-23T11:46:00-07:00" pubdate data-updated="true">Feb 23<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I ran the v0.7 reductions with deconvolution on for 50 iterations.  I had cut out deconvolution originally because of the funky noise maps, but that was partly an error on my part.  There is also an issue with bright sources being largely left over in the noise maps. <br /><br />The deconvolver does MUCH better at filtering out the fuzzy atmospheric emission, so I want to use it.  It leaves some flux from bright point sources behind, though, so I decided to try to make the deconvolution kernel smaller to see if that recovers more of the pointlike flux.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/02/06/planet-fluxes/">Planet Fluxes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-02-06T15:39:00-07:00" pubdate data-updated="true">Feb 6<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
; ephemerides from the JCMT<br />; MARS:<br />; June 30 2005: 730.14 Jy   UT:53551<br />; July 15 2005: 872.83 Jy   UT:53566          <br />; Sept 10 2005: 1941.72 Jy  UT:53623<br />; June 5  2006: 553.13 Jy   UT:53891<br />; June 23 2006: 674.14 Jy   UT:53544<br />; Sept 10 2006: 135.79 Jy   UT:53896<br />; July 20 2007: 381.18 Jy   UT:54301          <br />; Sept 10 2007: 597.87 Jy   UT:54353          <br />;<br />; URANUS:<br />; June 30 2005: 43.43 Jy   UT:53551<br />; July 15 2005: 44.35 Jy   UT:53566          <br />; Sept 10 2005: 45.78 Jy   UT:53623<br />; June 5  2006: 41.71 Jy   UT:53891<br />; June 23 2006: 42.96 Jy   UT:53544<br />; Sept 10 2006: 41.62 Jy   UT:53896<br />; July 20 2007: 43.90 Jy   UT:54301          <br />; Sept 10 2007: 45.57 Jy   UT:54353          <br />;<br />; NEPTUNE:<br />; June 30 2005: 17.42 Jy   UT:53551<br />; July 15 2005: 17.58 Jy   UT:53566          <br />; Sept 10 2005: 17.50 Jy   UT:53623<br />; June 5  2006: 17.04 Jy   UT:53891<br />; June 23 2006: 17.33 Jy   UT:53544<br />; Sept 10 2006: 17.09 Jy   UT:53896<br />; July 20 2007: 17.59 Jy   UT:54301          <br />; Sept 10 2007: 17.56 Jy   UT:54353</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/02/06/rant-calcbeamlocations/">Rant: Calc_beam_locations</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-02-06T10:00:00-07:00" pubdate data-updated="true">Feb 6<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
It took me a few days to figure this out, but &#8220;calc_beam_locations&#8221; is about 800 lines of wasted space.  It does nothing substantive until line 335.  Everything to that point is parameter parsing.  But there doesn&#8217;t need to be any of that crap, really, and it should have been outsourced to functions to begin with.<br /><br />NCDF files are read to get the rotation angle - JUST as an error check!  There is no a priori reason to include it.<br /><br />All that the code does is read in a centroid file (a list of x,y offsets), rotate them, and output them as r,theta,error.  Sure, there&#8217;s a bunch of automated outlier rejection etc, but&#8230; seriously?!  We don&#8217;t have enough observations to hold up the statistics necessary for that to begin with!  NO ONE would if each observation takes an hour.  It&#8217;s absurd.  Odd as it is coming from me, manual rejection makes a lot more sense in this case.<br /><br />Now, I still have to understand WHY the beam locations are rotated by the fiducial array angle.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/02/01/distortion-mapping-done/">Distortion Mapping Done?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-02-01T13:36:00-07:00" pubdate data-updated="true">Feb 1<span>st</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Created &#8216;beam_locations_0707.txt&#8217; from uranus_070702_o42 with a few contributions from g34.3_070630_o34.<br /><br />The rest were created by averaging over all of the beam location files</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/02/01/0707-distortion-maps/">0707 Distortion Maps</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-02-01T13:25:00-07:00" pubdate data-updated="true">Feb 1<span>st</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_lsgW26mWZnU/SYYFc97uFjI/AAAAAAAAEt0/nxjKDE_KBIA/s1600-h/0707distmaps.png"><img style="cursor:pointer; cursor:hand;width: 400px; height: 248px;" src="http://2.bp.blogspot.com/_lsgW26mWZnU/SYYFc97uFjI/AAAAAAAAEt0/nxjKDE_KBIA/s400/0707distmaps.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5297928006867490354" /></a><br />They&#8217;re consistent but not very close to each other.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/02/01/sign-errors/">Sign Errors</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-02-01T12:47:00-07:00" pubdate data-updated="true">Feb 1<span>st</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
pinned down the problem.  Was a minor sign error in the offsets.  Why is it that simple sign errors are ALWAYS the hardest things to track down?<br /><br />Now, open question: should x,y scaling be free parameters or not?  What I mean is, when I measure the positions of bolometers on the array using the planet map, should I allow the X and Y stretch (the bolometer spacing) to change?  Should it be a uniform stretch in X and Y or should it be allowed to &#8216;distort&#8217; too?  My opinion is, none of the above: I&#8217;m measuring their actual positions (in terms of a fixed spacing) and therefore stretching or distorting to match the nominal positions is not necessary.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/01/31/blnobl-mars/">BL/noBL Mars</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-31T20:20:00-07:00" pubdate data-updated="true">Jan 31<span>st</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Mars using uranus_070702_o42 distortion map:<br /><pre><br />BL070706_o38_raw_ds1.nc_indiv0    134.8757324     -0.2325330      0.0721872   3282.5439453      2.0985703      2.1959550   3147.6682129      2.3311033      2.1237679<br />BL070706_o39_raw_ds1.nc_indiv0    188.0588379     -0.0947621     -0.0643225   3782.3984375      2.1416662      1.9909470   3594.3395996      2.2364283      2.0552695<br />BL070706_o40_raw_ds1.nc_indiv0    451.6955566     -0.0427303     -0.3303463   3461.9191895      2.1925442      2.0726480   3010.2236328      2.2352746      2.4029944<br />BL070713_o36_raw_ds1.nc_indiv0    294.5898438     -0.2068889      0.0493107   5975.9482422      1.9935303      2.1527038   5681.3583984      2.2004192      2.1033931<br />BL070713_o37_raw_ds1.nc_indiv0    813.5678711     -0.4597032      0.0361557   5515.4501953      2.0334179      2.1772604   4701.8823242      2.4931211      2.1411047<br />BL070713_o38_raw_ds1.nc_indiv0    286.2934570     -0.1904230      0.0520797   5967.7011719      1.9853363      2.1624830   5681.4077148      2.1757593      2.1104033<br />BL070713_o39_raw_ds1.nc_indiv0    773.2104492     -0.0816238     -0.3387871   5409.8344727      2.0317609      2.1736624   4636.6240234      2.1133847      2.5124495<br />BL070714_o76_raw_ds1.nc_indiv0    244.2031250     -0.2079357      0.0572422   5312.0419922      1.9982606      2.1597764   5067.8388672      2.2061963      2.1025343<br />BL070714_o77_raw_ds1.nc_indiv0    688.7365723     -0.1176772     -0.3138330   4706.1503906      2.0379941      2.1989338   4017.4138184      2.1556714      2.5127668<br />BL070715_o45_raw_ds1.nc_indiv0    108.5583496     -0.0652246     -0.0818899   2397.9819336      2.1608708      1.9907858   2289.4235840      2.2260954      2.0726757<br />BL070715_o46_raw_ds1.nc_indiv0    268.4321289     -0.2927990     -0.0692098   2236.4533691      2.1387808      2.0159581   1968.0212402      2.4315798      2.0851679<br />BL070717_o47_raw_ds1.nc_indiv0    372.6528320     -0.2188239      0.0690587   7070.0649414      1.9820960      2.1670835   6697.4121094      2.2009199      2.0980248<br />BL070717_o48_raw_ds1.nc_indiv0    498.4628906     -0.2993519      0.0410304   6636.1396484      2.0418782      2.1088474   6137.6767578      2.3412302      2.0678170<br />BL070718_o41_raw_ds1.nc_indiv0    287.1591797     -0.2016468      0.0641356   6684.1699219      1.9891322      2.1470959   6397.0107422      2.1907790      2.0829604<br />BL070718_o42_raw_ds1.nc_indiv0    841.6083984     -0.0809386     -0.3511798   5934.2832031      2.0332539      2.1427581   5092.6748047      2.1141925      2.4939380<br />BL070725_o34_raw_ds1.nc_indiv0    245.6381836     -0.0810674     -0.0582435   5918.6728516      1.9807132      2.1547492   5673.0346680      2.0617807      2.2129927<br />BL070725_o35_raw_ds1.nc_indiv0    697.7910156      0.1512802     -0.6174591   4873.1469727      2.3222449      2.0499101   4175.3559570      2.1709647      2.6673691<br />BL070726_o33_raw_ds1.nc_indiv0    216.2124023     -0.0697458     -0.0627950   5056.3364258      2.1531394      1.9873902   4840.1240234      2.2228851      2.0501852<br />BL070726_o34_raw_ds1.nc_indiv0    433.0415039     -0.0154374     -0.3017542   4586.9204102      2.1483676      2.0385454   4153.8789062      2.1638050      2.3402996<br />BL070730_o23_raw_ds1.nc_indiv0    105.4489746      0.1025155     -0.2241490   2679.8452148      2.1567283      1.9786894   2574.3962402      2.0542128      2.2028384<br />BL070730_o24_raw_ds1.nc_indiv0    440.7482910     -0.3968222     -0.0447321   2595.1044922      2.0618360      2.1782801   2154.3562012      2.4586582      2.2230122<br /></pre></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/01/30/beam-locations-peak-fluxes/">Beam Locations & Peak Fluxes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-30T16:43:00-07:00" pubdate data-updated="true">Jan 30<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The results of my distortion mapping work below.  Note that, especially for 06, there are a LOT of cases where no beam locations correction (noBL) had a higher peak than the distortion corrected map.  I have no explanation for this yet.  More work to come&#8230;<br /><br /><pre><br />PEAK COMPARISON BL:       5.95824  noBL:       3.09836    uranus_050619_o23 <br />PEAK COMPARISON BL:       3.93725  noBL:       2.85479    uranus_050619_o24 <br />PEAK COMPARISON BL:       15.5613  noBL:       523.035    neptune_050626_o19 <br />PEAK COMPARISON BL:       16.4601  noBL:       16.0038    neptune_050626_o20 <br />PEAK COMPARISON BL:       426.671  noBL:       375.174    mars_050627_o31 <br />PEAK COMPARISON BL:       415.968  noBL:       413.327    mars_050627_o32  <br />PEAK COMPARISON BL:       15.2464  noBL:       33.8593    uranus_050628_o33 <br />PEAK COMPARISON BL:       34.6631  noBL:       35.5086    uranus_050628_o34 <br />PEAK COMPARISON BL:       164.832  noBL:       403.189    uranus_050904_o31 <br />PEAK COMPARISON BL:       216.820  noBL:       425.613    uranus_050904_o32 <br />PEAK COMPARISON BL:       134.972  noBL:       156.196    uranus_050911_ob8 <br />PEAK COMPARISON BL:       11.0957  noBL:       11.1993    neptune_060602_o30 <br />PEAK COMPARISON BL:       12.0000  noBL:       11.0947    neptune_060602_o31 <br />PEAK COMPARISON BL:       2478.20  noBL:       2365.17    mars_060605_ob1 <br />PEAK COMPARISON BL:       2144.68  noBL:       2147.18    mars_060605_ob2  <br />PEAK COMPARISON BL:       17.7354  noBL:       25.7041    uranus_060621_o29 <br />PEAK COMPARISON BL:       18.7889  noBL:       25.6599    uranus_060621_o30 <br />PEAK COMPARISON BL:       28.1957  noBL:       31.1013    uranus_060625_o46 <br />PEAK COMPARISON BL:       23.0236  noBL:       27.8556    uranus_060905_ob6 <br />PEAK COMPARISON BL:       18.8731  noBL:       28.4964    uranus_060906_o12 <br />PEAK COMPARISON BL:       23.3481  noBL:       29.8294    uranus_060908_o13 <br />PEAK COMPARISON BL:       20.6238  noBL:       26.9424    uranus_060909_o12 <br />PEAK COMPARISON BL:       21.1049  noBL:       28.8533    uranus_060910_o12 <br />PEAK COMPARISON BL:       24.0231  noBL:       32.0877    uranus_060914_o10 <br />PEAK COMPARISON BL:       23.2590  noBL:       33.3496    uranus_060914_o11 <br />PEAK COMPARISON BL:       24.0538  noBL:       30.0552    uranus_060919_ob9 <br />PEAK COMPARISON BL:       355.467  noBL:       669.416    g34.3_070630_o34 <br />PEAK COMPARISON BL:       246.803  noBL:       296.252    g34.3_070630_o35 <br />PEAK COMPARISON BL:       724.874  noBL:       807.152    uranus_070702_o42 <br />PEAK COMPARISON BL:       7.60370  noBL:       9.02960    uranus_070912_o27 <br />PEAK COMPARISON BL:       98.8058  noBL:       88.9957    mars_070913_o22 <br />PEAK COMPARISON BL:       82.2708  noBL:       89.3476    mars_070913_o23 <br /></pre></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/01/24/filling-factors/">Filling Factors</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-24T22:59:00-07:00" pubdate data-updated="true">Jan 24<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
to do: histogram per square degree, plot cumulative > some bin number (100 mJy, 300 mJy, 1 Jy) vs l, then do it again for b=+/-.1, +/-.3.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/01/24/distortion-mapping/">Distortion Mapping</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-24T12:17:00-07:00" pubdate data-updated="true">Jan 24<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Between sign errors, failures to fit, and&#8230;. I really don&#8217;t know WHAT was going on, I finally figured out how to get the cursed distortion mapping to work.  I still haven&#8217;t even started testing, unfortunately.<br /><br />I don&#8217;t know why I can fit the way the OP did, fitting R and Theta, and I apparently can&#8217;t fit x,y.  It&#8217;s frustrating.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/01/17/flagger-images/">Flagger Images</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-17T07:26:00-07:00" pubdate data-updated="true">Jan 17<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
James requested sample images from the flagger for the methods paper.  Below are images + description:<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_lsgW26mWZnU/SXHsZcqegtI/AAAAAAAAEs4/3PjUtU2IXtQ/s1600-h/sample_waterfall_070911_o15_highFnoisepng.png"><img style="cursor: pointer; width: 400px; height: 388px;" src="http://3.bp.blogspot.com/_lsgW26mWZnU/SXHsZcqegtI/AAAAAAAAEs4/3PjUtU2IXtQ/s400/sample_waterfall_070911_o15_highFnoisepng.png" alt="" id="BLOGGER_PHOTO_ID_5292270959072281298" border="0" /></a><br />This is a &#8220;noise-dominated&#8221; scan in the sense that the high/low pixels are set by noise, not signal.  Despite the clear high frequency noise, this image actually maps out pretty well - I think the high-noise bolometers get downweighted and the high/low pixels probably get clipped by my hot pixel rejection procedure.<br /><br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_lsgW26mWZnU/SXHsY7Rgq3I/AAAAAAAAEsY/0NT8IB26JUo/s1600-h/flagger_marked_source_050708_o15.png"><img style="cursor: pointer; width: 400px; height: 351px;" src="http://3.bp.blogspot.com/_lsgW26mWZnU/SXHsY7Rgq3I/AAAAAAAAEsY/0NT8IB26JUo/s400/flagger_marked_source_050708_o15.png" alt="" id="BLOGGER_PHOTO_ID_5292270950109195122" border="0" /></a><br />An image of the galactic center with a source southeast of center identified.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_lsgW26mWZnU/SXHsYyHCEGI/AAAAAAAAEsg/3iwoklY0--0/s1600-h/sample_waterfall_050708_o15_glitchandsources.png"><img style="cursor: pointer; width: 392px; height: 400px;" src="http://1.bp.blogspot.com/_lsgW26mWZnU/SXHsYyHCEGI/AAAAAAAAEsg/3iwoklY0--0/s400/sample_waterfall_050708_o15_glitchandsources.png" alt="" id="BLOGGER_PHOTO_ID_5292270947649327202" border="0" /></a><br />A scan from the GC image above.  I forgot to mark the source, I should go back and do that.  The glitch is obvious.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_lsgW26mWZnU/SXHsZHVZ4OI/AAAAAAAAEso/pOXwGFn7rGg/s1600-h/sample_waterfall_050708_o15_glitchflagged.png"><img style="cursor: pointer; width: 392px; height: 400px;" src="http://1.bp.blogspot.com/_lsgW26mWZnU/SXHsZHVZ4OI/AAAAAAAAEso/pOXwGFn7rGg/s400/sample_waterfall_050708_o15_glitchflagged.png" alt="" id="BLOGGER_PHOTO_ID_5292270953346752738" border="0" /></a><br />I drew a box to flag out the region affected by the glitch.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_lsgW26mWZnU/SXHsZG_MmWI/AAAAAAAAEsw/RA6tqAWMnLM/s1600-h/sample_waterfall_050708_o15_glitchgone.png"><img style="cursor: pointer; width: 392px; height: 400px;" src="http://4.bp.blogspot.com/_lsgW26mWZnU/SXHsZG_MmWI/AAAAAAAAEsw/RA6tqAWMnLM/s400/sample_waterfall_050708_o15_glitchgone.png" alt="" id="BLOGGER_PHOTO_ID_5292270953253607778" border="0" /></a><br />This is what happens when I redraw after flagging out the glitch - the colorbar is rescaled and no more glitch.<br /><br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_lsgW26mWZnU/SXIDILh3hfI/AAAAAAAAEtQ/cMuOhlFO_fA/s1600-h/sample_waterfall_050708_o15_glitchandsources_marked.png"><img style="cursor: pointer; width: 400px; height: 228px;" src="http://4.bp.blogspot.com/_lsgW26mWZnU/SXIDILh3hfI/AAAAAAAAEtQ/cMuOhlFO_fA/s400/sample_waterfall_050708_o15_glitchandsources_marked.png" alt="" id="BLOGGER_PHOTO_ID_5292295951182431730" border="0" /></a><br /><br />Timestream with glitches and sources marked (one pixel in the map is hit by 3 different points in this scan).<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_lsgW26mWZnU/SXIDH3uIjHI/AAAAAAAAEtI/vijTeEWf_nA/s1600-h/sample_waterfall_050708_o15_glitchandsources_gray.png"><img style="cursor: pointer; width: 400px; height: 228px;" src="http://4.bp.blogspot.com/_lsgW26mWZnU/SXIDH3uIjHI/AAAAAAAAEtI/vijTeEWf_nA/s400/sample_waterfall_050708_o15_glitchandsources_gray.png" alt="" id="BLOGGER_PHOTO_ID_5292295945865170034" border="0" /></a><br />Grayscale version of above (ok, I lied about grayscale being impossible) with a different pixel marked.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_lsgW26mWZnU/SXIDHbYLbiI/AAAAAAAAEtA/nSh2rM6GhMc/s1600-h/flagger_marked_source_footprint_050708_o15.png"><img style="cursor: pointer; width: 400px; height: 301px;" src="http://1.bp.blogspot.com/_lsgW26mWZnU/SXIDHbYLbiI/AAAAAAAAEtA/nSh2rM6GhMc/s400/flagger_marked_source_footprint_050708_o15.png" alt="" id="BLOGGER_PHOTO_ID_5292295938256891426" border="0" /></a><br />A zoom-in around the &#8216;kidney bean&#8217; source with the Bolocam footprint overlaid and a pixel marked.  Note that this pixel corresponds to the 3 points in the color waterfall above.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/01/17/0709-rotators-fixed-latest-run/">0709 Rotators Fixed, Latest Run</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-17T07:23:00-07:00" pubdate data-updated="true">Jan 17<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
0709 11-13 needed to be 83.88 degrees, they&#8217;re all fixed now.<br /><br />I flagged the l060 070911 maps; I&#8217;m not convinced that was weather, there were some fluctuations up to 2400 Jy!  Maybe a cloud would do that though.<br /><br />Problems in the latest run: <br />l359 - missing files?<br />Reading files from /scratch/sliced/INFILES/l359_infile.txt<br />FIELD v0.7_l359 BEGUN at Fri Jan 16 20:11:34 2009<br />MRDFITS: File access error<br />% HEULER: ERROR - First parameter must be a FITS header or astrometry<br />          structure<br />l012 - missing files?<br />% READFITS:  ERROR - Unable to locate file<br />            /scratch/adam_work/l012/060614_o10_raw_ds5.nc_indiv13pca_map01.fi<br />            ts</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/01/15/more-problem-maps/">More Problem Maps</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-15T19:29:00-07:00" pubdate data-updated="true">Jan 15<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
the l060-l062 range has some severe noise problems and rotator issues.  They need to be fixed before release.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/01/15/new-mapping-procedure/">New Mapping Procedure</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-15T10:46:00-07:00" pubdate data-updated="true">Jan 15<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I cut down the number of maps made by the pipeline from 80 to 30 by merging regions with severe overlap.  I don&#8217;t think this will result in any net change in efficiency of the mapping process because a few of the maps will go over to swap, but it will reduce the amount of overlap / noisy edges and make debugging simpler.  It should also reduce hard drive usage once I decide that I&#8217;m satisfied with the results and remove the old (v0.6) redundant data.<br /><br />As part of this process, the reference fields for coalignment have been re-set to the v0.6.2 coadds + some (crappy) mosaics from v0.6.2 so that we no longer need to rely on 3x1&#8217;s for the alignment.<br /><br />See /data/bgps/releases/v0.7/readme.txt for details (reproduced below)<br /><br />Created 01/14/09<br />Version 0.7 does not exist yet.  This is the &#8216;release notes&#8217; indicating what will change<br /><br />-Overlapping redundant fields will be eliminated<br />Mapping of field name to area covered, followed by number of observations<br />included:<br />gemob1: l189-l192 11 -  2 = 9<br />w5:     l135-l138   46      = 46<br />l133:   l133-l134   34 -  1 = 33<br />l111:   l110-l111   88      = 88 <br />l086:   l085-l086   17      = 17<br />l082:   l080-l084   33      = 33<br />l077:   l075-l080   43 -  1 = 42<br />l072:   l070-l074   10 -  2 = 8<br />l065:   l059-l069   19      = 19<br />l055:   l053-l058   10 -  1 = 9<br />l050:   l048-l052   19      = 19<br />l045:   l043-l047   20 -  4 = 16<br />l040:   l038-l042   33 -  4 = 27<br />l035:   l034-l037   53      = 53<br />l032:   l031-l033   61      = 61<br />l030:   l030        61 -  3 = 58<br />l029:   l028-l029   53 -  4 = 49<br />l024:   l021-l027   29      = 29<br />l018:   l015-l021   29 -  3 = 26<br />l012:   l011-l014   7       = 7         <br />l009:   l008-l010   11      = 11<br />l006:   l005-l007   15 -  1 = 14<br />l003:   l002-l004   25 -  1 = 24<br />l001:   l001        20      = 20        <br />l000:   l000        23 -  1 = 23            <br />l359:   l359        14      = 14          <br />l357:   l356-l358   9  -  1 = 8                     <br />l354:   l353-l355   3       = 3  <br />l351:   l350-l352   9       = 9</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/01/14/gem-ob1/">Gem OB1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-14T16:46:00-07:00" pubdate data-updated="true">Jan 14<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
With Miranda&#8217;s help, I discovered some serious errors in Gem OB1 and fixed them.<br /><br /><ol><br /><li> L189 was using L134 data for no apparent reason<br /><li> many September 2007 observations have the WRONG rotation angle in place in array_params!  Unfortunately it&#8217;s not clear yet which ones suffer from this problem: I need a list of when rotangle was/was not used, and it looks like it&#8217;ll be a pain to fix the problem.<br /><li> GemOB1link wasn&#8217;t mapped, it will be now.<br /></ol></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/01/13/back-to-work/">Back to Work</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-13T09:43:00-07:00" pubdate data-updated="true">Jan 13<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I started working again yesterday, mostly looking at the 31PCA reductions I did.  I have no strong opinions yet on their quality.<br /><br />It&#8217;s time to work towards a final data release, though, and to that end, I&#8217;m going to start removing duplicate fields.  e.g. l023 and l024 have identical data, so only one of them should ever be used.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/28/deconvolution-vs-not/">Deconvolution vs. Not</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-28T12:37:00-07:00" pubdate data-updated="true">Nov 28<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve done some by-eye comparisons of deconvolutions vs no deconvolution.  The no-deconvolution clearly does better on the bright sources: probably the deconvolved beam size is a little bit different from (larger? smaller?) the actual source size.  Deconvolution does better in putting noise from noisy regions into the noisemap and keeping it out of the astromap.<br /><br />Both might be useful - the deconvolved maps may end up being prettier, but the no-deconvolve maps will probably have more reliable fluxes.<br /><br />This all probably relies on testing / simulation.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/28/4-errors/">4 Errors</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-28T09:45:00-07:00" pubdate data-updated="true">Nov 28<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
l047, l083, l359 (l000 is in /usb, l359 is in /scratch), l136p15<br /><br />Only 83 is a code error, the others are file location errors.  l083 is an error in &#8216;pixshift&#8217; with subscripting and will require real debugging.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/23/defusercommon-modified/">Def_user_common Modified</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-23T08:17:00-07:00" pubdate data-updated="true">Nov 23<span>rd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The NP doesn&#8217;t work without USER_COMMON defined because at a single point it makes use of the &#8216;which&#8217; function.  <br /><br />def_user_common is a disaster, though, because it calls get_screen_size(), which forces an X connection to be launched, which means that if you start a remote session and close X IDL crashes.  This has been a constant nagging problem and has cost me ~a few days of work.  So I commented out the offending (and offensive) line.  The worst of it is, I&#8217;m not even convinced there&#8217;s anything that uses any of that information.  The common block is only needed to get paths, so which could have been written better.<br /><br />The pipeline ground to a halt for an unknown reason at an unknown point so I added a lot more timing outputs to try to figure out what&#8217;s going on.<br /><br />Back to the grind&#8230;</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/21/flagger/">Flagger</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-21T18:35:00-07:00" pubdate data-updated="true">Nov 21<span>st</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Discovered that the flagger causes some pretty serious problems if you try to run it on a non-coadd for obvious reasons: there&#8217;s practically no coverage!  Individual maps should NOT go through the flagger, so I have added a piece of code that turns off the flagger if only one observation is being used.  That code is in map_iter where the flagger is called.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/18/version-06-begun/">Version 0.6 Begun</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-18T21:50:00-07:00" pubdate data-updated="true">Nov 18<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I started on (what I hope will be) v0.6 tonight.<br /><br />New things:<br />-Sigma-rejection flagging in the spatial domain<br />-Inverse-variance weighting</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/18/mad-flagger/">MAD Flagger</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-18T09:20:00-07:00" pubdate data-updated="true">Nov 18<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<pre><br />; The Mad Flagger<br />; Flag based on the median average deviation within a spatial pixel<br />function mad_flagger,data,inds,flags,nsig=nsig<br /><br />    t = systime(/sec)<br />    f0 = total(where(flags))<br /><br />    if n_e(nsig) eq 0 then nsig = 3    <br />    <br />    newflags = flags<br /><br />    mx=max(inds)<br />    vec3=fltarr(mx+1)<br />    h=histogram(inds,reverse_indices=ri,OMIN=om)<br />    for j=0L,n_elements(h)-1 do begin<br />        if ri[j+1] gt ri[j] then begin<br />            v_inds = [ri[ri[j]:ri[j+1]-1]]<br />            if n_e(v_inds) gt 2 then begin<br />                vec = data[v_inds]<br />;                vecmad = mad(vec)  ; the MAD is WAY too small!  I ended up rejecting 8% of points!<br />                vecmad = stddev(vec)<br />                vecmed = median(vec,/even)<br />                madreject = where( (vec gt vecmed + nsig*vecmad) or (vec lt vecmed - nsig*vecmad) )<br />                if (n_e(madreject) gt 0 and total(madreject)) gt 0 then begin<br />                    reject_inds = v_inds[madreject]<br />                    newflags[reject_inds] = 1<br />                endif <br />            endif<br />        endif<br />    endfor<br />    print,"MAD flagger took ",strc(systime(/sec)-t)," seconds and flagged ",$<br />        strc(round(total(where(newflags)) - f0)),' points'<br /><br />    return,newflags<br /><br />end<br /></pre></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/18/median-drizzling/">Median Drizzling</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-18T08:23:00-07:00" pubdate data-updated="true">Nov 18<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a href="http://groups.google.com/group/comp.lang.idl-pvwave/browse_thread/thread/762770933591238d">http://groups.google.com/group/comp.lang.idl-pvwave/browse_thread/thread/762770933591238d</a><br /><br />Someone going by the name &#8216;wox&#8217; introduced me to a spectacularly simple drizzling algorithm for medianing.  It will be a little less efficient because it can&#8217;t take advantage of some &#8216;partial sum&#8217; tricks that the average can, but it will median over ALL data points, which is an advantage.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/17/massive-upgrades-new-strategy/">Massive Upgrades, New Strategy?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-17T20:55:00-07:00" pubdate data-updated="true">Nov 17<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
A few major things today:<br />1. I renamed &#8216;ts_to_map&#8217; to &#8216;drizzle&#8217; and made &#8216;ts_to_map&#8217; a wrapper that will either median combine by scans (if passed the right keywords, i.e. tstomapmedian and scans_info).  This will reject cosmic rays much more effectively than previously.<br />2. My extensive test runs on the &#8216;weird&#8217; fields completed.  Conclusions:<br />     a. Deconvolution is DEFINITELY responsibly for the weird fuzzy effects seen esp. in l=33, l=2. <br />     b. Even a descending iterator is ineffective at alleviating this problem<br />What I still don&#8217;t understand is WHY the deconvolver is behaving badly for some regions.  It is extracting peaks that are too high.<br />      c. Not deconvolving works pretty well, so I&#8217;m not really concerned.  I&#8217;m resetting the defaults to no deconvolution once my next test is done&#8230;.<br />3. Started up a new test run to compare median stacking with weighted average stacking</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/17/5x1/">5x1?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-17T09:32:00-07:00" pubdate data-updated="true">Nov 17<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
060609_o17 is weird looking.  It appears to be TWO 3x1s with an overlap, but it&#8217;s only 1 observation.  Any idea what happened?</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/14/weighting-next-steps/">Weighting - Next Steps</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-14T18:01:00-07:00" pubdate data-updated="true">Nov 14<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Idea: &#8216;edge taper&#8217; for scans.  The scan start/end usually has higher noise, so it would be good to downweight those regions slightly.  Probably only the first/last 5% of each scan should be linearly downweighted.<br /><br />I&#8217;m running a lot of tests on l001 with/without deconvolution, lots of iterations, different pca components.  They&#8217;ll be done sometime tomorrow.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/14/paragraph-for-methods-paper/">Paragraph for the Methods Paper</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-14T16:10:00-07:00" pubdate data-updated="true">Nov 14<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The raw data from Bolocam contains noise components from the atmosphere and instrument in addition to the astrophysical signal.  To remove the atmospheric noise, an iterative approach was required.  <br /><br /><ol><br /><li> The median across all bolometers is subtracted<br /><li> A set number of principle components are subtracted.  The principle components are the most correlated components between bolometers.  In this process both the atmosphere above the telescope - which is assumed to be constant across the field of view - and any large-scale astrophysical structure are removed.<br /><li> The timestream data is mapped into the plane of the sky.  Data points are mapped to the nearest pixel.  7.2&#8221; pixels are used so that sampling is better than Nyquist.<br /><li> The map is deconvolved using a maximum entropy deconvolution algorithm ( Based on paper by Hollis, Dorband, Yusef-Zadeh, Ap.J. Feb.1992, written by Frank Varosi at NASA/GSFC 1992)<br /><li> The deconvolved map is returned to a timestream and subtracted from the original to yield a noise-only timestream.  <br /><li> Power spectral densities are calculated for each scan in the noise timestream, and weights are calculated from these.  [At the moment, the weights are actually inverse-variance]<br /><li> The deconvolved map timestream is subtracted from the raw timestream, and then steps 1-6 are repeated on that timestream to recover flux that was oversubtracted in the first iteration.<br /></ol><br /><br />Convergence takes ???? iterations&#8230;.<br />??? PCA components are subtracted [default 13]&#8230;</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/14/weighting-and-high-frequency-noise/">Weighting and High-frequency Noise</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-14T16:02:00-07:00" pubdate data-updated="true">Nov 14<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_lsgW26mWZnU/SR4DzVCz1WI/AAAAAAAADfk/cJ70OPeqEzg/s1600-h/psds.png"><img style="cursor: pointer; width: 400px; height: 237px;" src="http://1.bp.blogspot.com/_lsgW26mWZnU/SR4DzVCz1WI/AAAAAAAADfk/cJ70OPeqEzg/s400/psds.png" alt="" id="BLOGGER_PHOTO_ID_5268652794427200866" border="0" /></a><br /><br />Image of PSDs (with no normalization) of the raw (blue), delined and exponential and polynomial subtracted (white), the noise timestream (yellow), and the data (cyan).<br /><br />The good: It looks like all of the powerline noise got into the noise timestream and almost none in the data.<br /><br />The bad: weighting is based on the noise timestream so it&#8217;s possible that the weights aren&#8217;t quite right as a result<br /><br />The weird: the data PSD.  What&#8217;s up with that?  Apparently I&#8217;m preferentially subtracting certain scales but I don&#8217;t know why, unless deconvolution is at fault.<br /><br /><br />Edit/Update: The deconvolution is definitely at fault.  Here&#8217;s the same scan done without deconvolution:<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_lsgW26mWZnU/SR4ZM6FPfrI/AAAAAAAADf0/baHOQwedeqs/s1600-h/psds2.png"><img style="cursor:pointer; cursor:hand;width: 400px; height: 239px;" src="http://3.bp.blogspot.com/_lsgW26mWZnU/SR4ZM6FPfrI/AAAAAAAADf0/baHOQwedeqs/s400/psds2.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5268676323610427058" /></a><br /><br />It should have been obvious; the cyan in the first plot is the PSD of the deconvolution straight up, and that should have no high-frequency structure&#8230;</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/14/rewriting-pipeline-again/">Rewriting Pipeline Again</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-14T13:41:00-07:00" pubdate data-updated="true">Nov 14<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Not entirely, but I realized my code had become&#8230; clunky, at best.<br /><br />I&#8217;m rewriting the wrappers using structs.  I HATE IDL structs, but they&#8217;re necessary&#8230;. if only they would make them dynamically modifiable.<br /><br />Weighting worked to some degree, the mapping is pretty much done.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/08/implementing-weighting/">Implementing Weighting</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-08T21:46:00-07:00" pubdate data-updated="true">Nov 8<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Not as easy as it ought to be.<br /><br /><br />I think I need to do a few things:<br />1. check and make sure there are no more of those !@#$!@#$#@% different sized array subtractions/multiplications.  &#8216;weight&#8217; and &#8216;best_astro_model&#8217; need to have the same size & shape in mem_iter_pc<br />2. I guess just check and make sure stuff works.  The weighted mean I&#8217;m using appears to be right: sum(weight * value) / sum(weight)<br /><br />I hate making lists that end up being two items&#8230;.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/08/latest-re-run-of-pipeline/">Latest Re-run of the Pipeline</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-08T20:10:00-07:00" pubdate data-updated="true">Nov 8<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Wow.  A lot of errors this time around.<br /><br /><code><br />bash: /scratch/adam_work/l020/l020_fitslist.txt: Permission denied<br />MRDFITS: Image array (1634,560)  Type=Real*4<br />% HEULER: FITS header is already in Galactic: nothing changed<br />% READFITS:  ERROR - Unable to locate file<br />            060628_o32_raw_ds5.nc_indiv13pca_map01.fits<br />% Variable is undefined: HDIMAGE.<br />% Execution halted at: IMAGE_SHIFTS       44<br />  /home/milkyway/student/ginsbura/bgps_pipeline/alignment/image_shifts.pro<br />%                      COALIGN_FIELD      31<br />  /home/milkyway/student/ginsbura/bgps_pipeline/wrappers/coalign_field.pro<br />%                      $MAIN$          <br /><br /><br />Updated radec_offsets in /scratch/sliced_polychrome/l034/050708_o21_raw_ds5.nc<br />Writing offsets to   -0.00192975 -9.22609e-09 (ncfile was -0.000337092)<br />% ALIGNMENT_OFFSETS_TO_NCDF: Could not find file <br />% Execution halted at: ALIGNMENT_OFFSETS_TO_NCDF    4<br />  /home/milkyway/student/ginsbura/bgps_pipeline/preproc/alignment_offsets_to_<br />  ncdf.pro<br />%                      WRITE_IMSHIFTS     11<br />  /home/milkyway/student/ginsbura/bgps_pipeline/alignment/write_imshifts.pro<br />%                      COALIGN_FIELD      34<br />  /home/milkyway/student/ginsbura/bgps_pipeline/wrappers/coalign_field.pro<br />%                      IMAGE_SHIFTS       44<br />  /home/milkyway/student/ginsbura/bgps_pipeline/alignment/image_shifts.pro<br />%                      COALIGN_FIELD      31<br />  /home/milkyway/student/ginsbura/bgps_pipeline/wrappers/coalign_field.pro<br />%                      $MAIN$          <br /><br /><br />/scratch/adam_work/l354/070709_o16_raw_ds5.nc_indiv13pca took 110.42429 sec.<br /><br />MRDFITS: File access error<br />% HEULER: ERROR - First parameter must be a FITS header or astrometry<br />          structure<br />% Execution halted at: HEULER             78<br /><br />FIELD l351 COMPLETED at Sat Nov  8 05:34:01 2008.  Took 1122.3564 seconds<br />% Program caused arithmetic error: Floating underflow<br />% Program caused arithmetic error: Floating illegal operand<br />FIELD l052 BEGUN at Sat Nov  8 05:34:01 2008<br />% FILE_LINES: Error opening file.<br />              File: /scratch/sliced/l052/l052_infile.txt<br />  No such file or directory<br />% Error occurred at: READCOL           141<br /><br />FIELD l359 COMPLETED at Sat Nov  8 05:41:34 2008.  Took 452.60051 seconds<br />% Program caused arithmetic error: Floating underflow<br />% Program caused arithmetic error: Floating illegal operand<br />FIELD l066 BEGUN at Sat Nov  8 05:41:34 2008<br />% FILE_LINES: Error opening file.<br />              File: /scratch/sliced/l066/l066_infile.txt<br />  No such file or directory<br />% Error occurred at: READCOL           141<br /><br /><br />FIELD l072 BEGUN at Sat Nov  8 05:41:34 2008<br />% FILE_LINES: Error opening file.<br />              File: /scratch/sliced/l072/l072_infile.txt<br />  No such file or directory<br />% Error occurred at: READCOL           141<br /><br /><br /><br />MRDFITS: Image array (628,561)  Type=Real*4<br />% HEULER: FITS header is already in Galactic: nothing changed<br />% HEULER: FITS header is already in Galactic: nothing changed<br />/scratch/adam_work/l086/060627_o23_raw_ds5.nc_indiv13pca_map01.fits<br /> shifts in pixels:     -9.77712      11.8034 shifts in arcsec l/b:<br />       70.395277       84.984804 delta-ra (as):        19.007974<br /> delta-dec (as):       -108.70337 x/y error in pixels:       3.99631<br />    0.0701244 ra/dec error:    -0.0079926204   0.00014024887 gal l/b error: <br />   -0.0079926204   0.00014024887<br />% HEULER: FITS header is already in Galactic: nothing changed<br />WARNING!  x,y offs were too large:       203.757    -0.224758<br /> so a different method is being attempted<br />WARNING!  x,y offs were too large on the SECOND TRY too:      -74.7339<br />     -159.448 so a third method is being attempted<br />This third method is meant to deal with small overlap regions that may be confused by high noise, it restricts<br />to a maximum 15 pixel offset (really less than that in practice) and therefore should be checked carefully.<br />/scratch/adam_work/l086/060627_o26_raw_ds5.nc_indiv13pca_map01.fits<br /> shifts in pixels:     -1.38579      1.39157 shifts in arcsec l/b:<br />       9.9777001       10.019338 delta-ra (as):        1.1521393<br /> delta-dec (as):       -14.093081 x/y error in pixels:     0.0814682<br />    0.0882818 ra/dec error:   -0.00016293635   0.00017656364 gal l/b error: <br />  -0.00016293635   0.00017656364<br />% HEULER: FITS header is already in Galactic: nothing changed<br />WARNING!  x,y offs were too large:       9.13210      11.3905<br /> so a different method is being attempted<br />WARNING!  x,y offs were too large on the SECOND TRY too:      -79.0260<br />      20.0907 so a third method is being attempted<br />This third method is meant to deal with small overlap regions that may be confused by high noise, it restricts<br />to a maximum 15 pixel offset (really less than that in practice) and therefore should be checked carefully.<br />/scratch/adam_work/l086/070707_o49_raw_ds5.nc_indiv13pca_map01.fits<br /> shifts in pixels:     -9.13210     -11.3905 shifts in arcsec l/b:<br />       65.751123      -82.011258 delta-ra (as):       -105.06683<br /> delta-dec (as):        3.1919479 x/y error in pixels:      0.486307<br />     0.950778 ra/dec error:   -0.00097261386    0.0019015568 gal l/b error: <br />  -0.00097261386    0.0019015568<br />% HEULER: FITS header is already in Galactic: nothing changed<br />WARNING!  x,y offs were too large:      0.384630      13.1890<br /> so a different method is being attempted<br />WARNING!  x,y offs were too large on the SECOND TRY too:       205.434<br />     -23.9600 so a third method is being attempted<br />This third method is meant to deal with small overlap regions that may be confused by high noise, it restricts<br />to a maximum 15 pixel offset (really less than that in practice) and therefore should be checked carefully.<br />/scratch/adam_work/l086/070708_o37_raw_ds5.nc_indiv13pca_map01.fits<br /> shifts in pixels:    -0.384630     -13.1890 shifts in arcsec l/b:<br />       2.7693373      -94.960636 delta-ra (as):       -74.063617<br /> delta-dec (as):        59.509407 x/y error in pixels:       2.29135<br />     0.933383 ra/dec error:    -0.0045826990    0.0018667649 gal l/b error: <br />   -0.0045826990    0.0018667649<br />% HEULER: FITS header is already in Galactic: nothing changed<br />WARNING!  x,y offs were too large:      -143.139      10.8130<br /> so a different method is being attempted<br />% Subscript range values of the form low:high must be >= 0, < size, with low<br />  <= high: CORR.<br />% Execution halted at: PIXSHIFT          107<br /><br /><br /><br /><br />ALL PREPROC ... output is /scratch/adam_work/l133/070911_o25_raw_ds5.nc_indiv13pca  READING IN 1 FILES FROM /scratch/sliced/l133/070911_o25_raw_ds5.nc<br />Reading file /scratch/sliced/l133/070911_o25_raw_ds5.nc<br />Applying pointing model with alt/az off     -0.024687220    -0.029154389<br />NO OFFSETS APPLIED<br />3.6277909 sec.<br />No values flagged as bad!<br />AC_BOLOS has 0.0 NAN points, which is 0.0 of total<br />Flatfielding (polynomial subtraction) ...0.92621708 sec.<br />No values flagged as bad!<br />AC_BOLOS has 0.0 NAN points, which is 0.0 of total<br />Prepare Map ... 1.4727209 sec.<br />% CHECK_FITS: NAXIS keywords in FITS header have been updated<br />Done preproc ... 11.113711 sec.<br />ITERATION NUMBER 0 ...SKY SUBTRACTION - MEDIAN0.15759706 sec.<br />BEGINNING PCA SUBTRACTION OF COMPONENTS 0 TO 13 ... 0.68130398 sec.<br />Flatfielding (polynomial subtraction) ...0.96450186 sec.<br />% CHECK_FITS: NAXIS keywords in FITS header have been updated<br />% CHECK_FITS: NAXIS keywords in FITS header have been updated<br />% Program caused arithmetic error: Floating underflow<br />Deconvolution iteration  0:  1.2357290 sec.<br />Deconvolution iteration  1:  0.93198013 sec.<br />Deconvolution iteration  2:  0.93152189 sec.<br />Deconvolution iteration  3:  0.93164992 sec.<br />Chi2 for iteration 0 is 1.22593e+07 with 2.07110e+06 degrees of freedom<br />FINISHED ITERATION 0   13.803532 sec.<br />ITERATION NUMBER 1 ...SKY SUBTRACTION - MEDIAN0.15691710 sec.<br />BEGINNING PCA SUBTRACTION OF COMPONENTS 0 TO 13 ... % TRIQL: Too many iterations in tqli.<br />% Error occurred at: EIGENQL           122<br />  /usr/local/itt/idl70/lib/eigenql.pro<br />%                    PCA_SUBTRACT       19<br /><br /><br /><br />/scratch/adam_work/l135p1/060917_o12_raw_ds5.nc_indiv13pca took 30.478553 sec.<br /><br />MRDFITS: File access error<br />% HEULER: ERROR - First parameter must be a FITS header or astrometry<br />          structure<br />% Execution halted at: HEULER             78<br /><br /><br />MRDFITS: Image array (1630,555)  Type=Real*4<br />% HEULER: FITS header is already in Galactic: nothing changed<br />% HEULER: FITS header is already in Galactic: nothing changed<br />/scratch/adam_work/l068/070910_ob3_raw_ds5.nc_indiv13pca_map01.fits<br /> shifts in pixels:   -0.0271645   -0.0270424 shifts in arcsec l/b:<br />      0.19558409     -0.19470519 delta-ra (as):      -0.26866187<br /> delta-dec (as):     -0.062403024 x/y error in pixels:   0.000193238<br />   0.00126581 ra/dec error:   -3.8647498e-07   2.5316247e-06 gal l/b error: <br />  -3.8647498e-07   2.5316247e-06<br />% HEULER: FITS header is already in Galactic: nothing changed<br />WARNING!  x,y offs were too large:       34.8510     -5.72119<br /> so a different method is being attempted<br />WARNING!  x,y offs were too large on the SECOND TRY too:       142.704<br />      76.4267 so a third method is being attempted<br />This third method is meant to deal with small overlap regions that may be confused by high noise, it restricts<br />to a maximum 15 pixel offset (really less than that in practice) and therefore should be checked carefully.<br />/scratch/adam_work/l068/070911_ob8_raw_ds5.nc_indiv13pca_map01.fits<br /> shifts in pixels:      15.0101      3.42143 shifts in arcsec l/b:<br />      -108.07276       24.634271 delta-ra (as):        78.221561<br /> delta-dec (as):        78.545365 x/y error in pixels:     0.0114306<br />     0.184410 ra/dec error:   -2.2861189e-05   0.00036881918 gal l/b error: <br />  -2.2861189e-05   0.00036881918<br />% HEULER: FITS header is already in Galactic: nothing changed<br />WARNING!  x,y offs were too large:       56.2296      14.6994<br /> so a different method is being attempted<br />WARNING!  x,y offs were too large on the SECOND TRY too:       728.753<br />     -184.087 so a third method is being attempted<br />This third method is meant to deal with small overlap regions that may be confused by high noise, it restricts<br />to a maximum 15 pixel offset (really less than that in practice) and therefore should be checked carefully.<br />/scratch/adam_work/l068/070911_ob9_raw_ds5.nc_indiv13pca_map01.fits<br /> shifts in pixels:     -56.2296     -14.6994 shifts in arcsec l/b:<br />       404.85292      -105.83592 delta-ra (as):       -304.51436<br /> delta-dec (as):       -286.88182 x/y error in pixels:       7.32951<br />   0.00354093 ra/dec error:     -0.014659024   7.0818565e-06 gal l/b error: <br />    -0.014659024   7.0818565e-06<br />% HEULER: FITS header is already in Galactic: nothing changed<br />WARNING!  x,y offs were too large:       3.31224     -13.8321<br /> so a different method is being attempted<br />% Subscript range values of the form low:high must be >= 0, < size, with low<br />  <= high: CORR.<br />% Execution halted at: PIXSHIFT          107<br /><br />/scratch/adam_work/l111/060605_o48_raw_ds5.nc_indiv13pca took 10.098406 sec.<br /><br />MRDFITS: File access error<br />% HEULER: ERROR - First parameter must be a FITS header or astrometry<br />          structure<br />% Execution halted at: HEULER             78<br /><br /><br />Writing offsets to /scratch/sliced/l027/060616_o10_raw_ds5.nc   0.00120866<br />  -0.00287235 (ncfile was 060616_o10_raw_ds5.nc)<br />Updated radec_offsets in /scratch/sliced/l027/060616_o10_raw_ds5.nc<br />Writing offsets to   5.77312e-05 -2.39760e-06 (ncfile was 0.000409983)<br />% ALIGNMENT_OFFSETS_TO_NCDF: Could not find file <br />% Execution halted at: ALIGNMENT_OFFSETS_TO_NCDF    4<br /></code></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
l020 too</div>
</div>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
redo targets:<BR/>l068<BR/>l086<BR/>l111<BR/>l027</div>
</div>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
the l111 reference field was 60% flagged out because of bad rotators:<BR/><BR/>ALL PREPROC &#8230; output is /scratch/adam_work/l111/060602_o34_raw_ds5.nc_indiv13pca  READING IN 1 FILES FROM /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/>Reading file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/>Flagged scan        2 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -23.2941<BR/>Flagged scan        6 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -24.9265<BR/>Flagged scan        7 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -21.3750<BR/>Flagged scan        8 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -25.7647<BR/>Flagged scan        9 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      0.110294<BR/>Flagged scan       10 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -26.6140<BR/>Flagged scan       11 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      0.143383<BR/>Flagged scan       12 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -27.4743<BR/>Flagged scan       14 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -28.3235<BR/>Flagged scan       15 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -24.6397<BR/>Flagged scan       17 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -25.4559<BR/>Flagged scan       18 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -30.0441<BR/>Flagged scan       19 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      0.110292<BR/>Flagged scan       21 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      0.220589<BR/>Flagged scan       22 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -31.8088<BR/>Flagged scan       23 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -27.9596<BR/>Flagged scan       24 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -32.7022<BR/>Flagged scan       26 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -33.5846<BR/>Flagged scan       28 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -34.4890<BR/>Flagged scan       30 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -35.3934<BR/>Flagged scan       31 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      -31.3787<BR/>Flagged scan       33 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by     -0.231617<BR/>Flagged scan       34 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      0.121325<BR/>Flagged scan       36 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      0.132353<BR/>Flagged scan       38 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      0.209558<BR/>Flagged scan       39 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by     -0.198528<BR/>Flagged scan       40 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      0.231617<BR/>Flagged scan       42 in file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/> because rotangle changes by      0.121325<BR/>Did not find rpcfile /data/bgps/raw/rpc/20060602/20060602_0811_rpc.bin for file /scratch/sliced/l111/060602_o34_raw_ds5.nc<BR/>Applying pointing model with alt/az off   -0.00023445157  -0.00016187002<BR/>NO OFFSETS APPLIED<BR/>Scans            2           6           7           8           9          10<BR/>          11          12          14          15          17          18<BR/>          19          21          22          23          24          26<BR/>          28          30          31          33          34          36<BR/>          38          39          40          42<BR/> flagged in file /scratch/sliced/l111/060602_o34_raw_ds5.nc because of rotation<BR/>4.2049680 sec.<BR/>Total of      1947176 points flagged<BR/>AC_BOLOS has 1.94718e+06 NAN points, which is 0.608696 of total</div>
</div>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
curiously, l135p1 has a reference field that is only present in the w3ohbolocam directory.  Probably need to remake the infiles for all of W3/4/5</div>
</div>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
I think l086 needs to be re-treated specially; it had way too many large offsets.  Probably the error that resulted was from an overlap region smaller than itself&#8230;.</div>
</div>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
/scratch/sliced/l354/070724_o10_raw_ds5.nc was the reference file for l354 but somehow was excluded from the l354_infile.  Warrants another check post-mapping</div>
</div>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
somehow /scratch/sliced_polychrome/l034/050708_o21_raw_mmd_ds5.nc got into the l033_infile and screwed things up</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/11/06/bgps-photo/">BGPS Photo</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-06T00:29:00-07:00" pubdate data-updated="true">Nov 6<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
http://www.nrao.edu/index.php/learn/gallery/imagecontest</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/10/15/new-to-do-list-updated-things/">New To-do List, Updated Things&#8230;.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-10-15T06:50:00-06:00" pubdate data-updated="true">Oct 15<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<code>do_maptests.pro</code> is running a bunch of different mapping parameters (pca components, deconvolution, etc.) on l000, l002, l003, l033, l083.  We&#8217;ll then run bolocat on it and look for the following:<br />-number of sources found<br />-flux in sources found as a function of n_pca<br />-size of sources as function of n_pca<br />-BADNESS, e.g. blurring / unremoved atmosphere / oversubtracted sources<br /><br /><code>bolocat2reg</code> makes a region file out of a bolocat catalog.  I&#8217;d like to make a separate ds9 region file that includes the actual pointing error + the centroiding error rather than just the elliptical fit to a given source; that will be more useful for finder charts.<br /><br />My current goal is to get a nice set of images I can combine to release as a poster to Jason Glenn&#8217;s student who is making pretty posters for publicity purposes; probably to promote CCAT.   Umm&#8230;. I blame the late hour for the alliteration.<br /><br />That goal also means I&#8217;ve been using an IRAF task to do some mosaicing (easier than writing the IDL code AGAIN):<br /><code><br />mscstack l001_5pca_map09.fits,l002_5pca_map09.fits,l000_5pca_map09.fits,l359_5pca_map09.fits,l003_5pca_map09.fits  GCCOMBINE_5pca.fits lthresh=-1<br />l001_13pca_map09_scuba_aligned.fits,l002_13pca_map09_scuba_aligned.fits,l000_13pca_map09_scuba_aligned.fits,l359_13pca_map09_scuba_aligned.fits,l003_13pca_map09_scuba_aligned.fits  GCCOMBINE.fits lthresh=-1<br />mscstack l029_13pca_map09_scuba_aligned.fits,l030_13pca_map09_scuba_aligned.fits,l031_13pca_map09_scuba_aligned.fits,l032_13pca_map09_scuba_aligned.fits,l033_13pca_map09_scuba_aligned.fits,l034_13pca_map09_scuba_aligned.fits L33COMBINE.fits lthresh=-1 hsig=5 lsig=5<br /></code></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/10/13/outer-galaxy-fields-done/">Outer Galaxy Fields Done</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-10-13T08:47:00-06:00" pubdate data-updated="true">Oct 13<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
they&#8217;re small files<br /><code><br />logs/log_101008_coalign.log:/scratch/adam_work/l059/l059_13pca took 286.08181 sec.<br />logs/log_101008_coalign.log:/scratch/adam_work/l062/l062_13pca took 390.88015 sec.<br />logs/log_101008_coalign.log:/scratch/adam_work/l065/l065_13pca took 296.88441 sec.<br />logs/log_101008_coalign.log:/scratch/adam_work/l068/l068_13pca took 1136.2623 sec.<br />logs/log_101008_coalign.log:/scratch/adam_work/l071/l071_13pca took 899.41245 sec.<br />logs/log_101208_coalign.log:/scratch/adam_work/l189p5/l189p5_13pca took 375.06840 sec.<br />logs/log_101208_coalign.log:/scratch/adam_work/l192/l192_13pca took 403.81112 sec.<br />logs/log_101208_coalign.log:/scratch/adam_work/l060/l060_13pca took 90.815500 sec.<br />logs/log_101208_coalign.log:/scratch/adam_work/l069/l069_13pca took 160.17454 sec.<br /></code></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/10/07/flagging/">Flagging</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-10-07T22:31:00-06:00" pubdate data-updated="true">Oct 7<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
most of what&#8217;s left now is flagging.  I updated the flagger, flag_manual.pro.  Check it out for documentation</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/09/17/maps-with-problems/">Maps With Problems</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-17T08:38:00-06:00" pubdate data-updated="true">Sep 17<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
l002: fuzzy stuff - bad sky sub?<br />l033: misalignment<br />l004: possible misalignment?  Pattern recognition fails me here<br />l354: misalignment</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/09/16/mapping-update/">Mapping Update</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-16T14:28:00-06:00" pubdate data-updated="true">Sep 16<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I made a lot of mistakes in my script, so progress is about 12 computer hours behind what it should be. <br /><br />These maps are done:<br /><pre>/scratch/adam_work/l003/l003_13pca_map09.fits<br />/scratch/adam_work/l006/l006_13pca_map09.fits<br />/scratch/adam_work/l009/l009_13pca_map09.fits<br />/scratch/adam_work/l018/l018_13pca_map09.fits<br />/scratch/adam_work/l021/l021_13pca_map09.fits<br />/scratch/adam_work/l024/l024_13pca_map09.fits<br />/scratch/adam_work/l027/l027_13pca_map09.fits<br />/scratch/adam_work/l030/l030_13pca_map09.fits<br />/scratch/adam_work/l033/l033_13pca_map09.fits<br />/scratch/adam_work/l036/l036_13pca_map09.fits<br />/scratch/adam_work/l039/l039_13pca_map09.fits<br />/scratch/adam_work/l042/l042_13pca_map09.fits<br />/scratch/adam_work/l044/l044_13pca_map09.fits<br />/scratch/adam_work/l048/l048_13pca_map09.fits<br />/scratch/adam_work/l050/l050_13pca_map09.fits<br />/scratch/adam_work/l054/l054_13pca_map09.fits<br />/scratch/adam_work/l057/l057_13pca_map09.fits</pre><br /><br />Things I&#8217;ve learned so far:<br />There is an observation (a master?) in L003 that should be the galactic center master.<br />L018 has some really bad noise that needs fixing.<br />The wackiness I saw in L024 seems to be gone now.<br />L044 has the same noise stripes as L357.<br /><br /><pre><br />/scratch/adam_work/l018/l018_13pca took 1118.3684 sec.<br />/scratch/adam_work/l018/l018_13pca_nooffs took 1106.6423 sec.<br />/scratch/adam_work/l021/l021_13pca took 1703.7266 sec.<br />/scratch/adam_work/l021/l021_13pca_nooffs took 1716.7393 sec.<br />/scratch/adam_work/l024/l024_13pca took 1622.3164 sec.<br />/scratch/adam_work/l024/l024_13pca_nooffs took 1672.3263 sec.<br />/scratch/adam_work/l027/l027_13pca took 1376.1939 sec.<br />/scratch/adam_work/l027/l027_13pca_nooffs took 1383.4335 sec.<br />/scratch/adam_work/l030/l030_13pca took 2487.1311 sec.<br />/scratch/adam_work/l030/l030_13pca_nooffs took 2543.1740 sec.<br />/scratch/adam_work/l036/l036_13pca took 549.76983 sec.<br />/scratch/adam_work/l036/l036_13pca_nooffs took 548.84132 sec.<br />/scratch/adam_work/l039/l039_13pca took 299.96889 sec.<br />/scratch/adam_work/l039/l039_13pca_nooffs took 299.16787 sec.<br />/scratch/adam_work/l042/l042_13pca took 366.34139 sec.<br />/scratch/adam_work/l042/l042_13pca_nooffs took 364.31475 sec.<br />/scratch/adam_work/l044/l044_13pca took 427.26923 sec.<br />/scratch/adam_work/l044/l044_13pca_nooffs took 424.42403 sec.<br />/scratch/adam_work/l048/l048_13pca took 313.86412 sec.<br />/scratch/adam_work/l048/l048_13pca_nooffs took 303.52545 sec.<br />/scratch/adam_work/l050/l050_13pca took 421.22899 sec.<br />/scratch/adam_work/l050/l050_13pca_nooffs took 477.16070 sec.<br />/scratch/adam_work/l054/l054_13pca took 315.14965 sec.<br />/scratch/adam_work/l054/l054_13pca_nooffs took 342.69137 sec.<br /></pre></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/09/15/scripting-whole-survey/">Scripting the Whole Survey</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-15T17:59:00-06:00" pubdate data-updated="true">Sep 15<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
First, discovered more fields with some sort of failure:<br /><pre>ls -d l[0-3][0-9][0-9] | sed 's:\(.*\):ls \1/*_map01.fits > \1/\1_infile.txt:' | bash<br />ls: l004/*_map01.fits: No such file or directory<br />ls: l017/*_map01.fits: No such file or directory<br />ls: l025/*_map01.fits: No such file or directory<br />ls: l108/*_map01.fits: No such file or directory<br />ls: l135/*_map01.fits: No such file or directory<br />ls: l136/*_map01.fits: No such file or directory<br />ls: l137/*_map01.fits: No such file or directory<br />ls: l138/*_map01.fits: No such file or directory<br />ls: l192/*_map01.fits: No such file or directory</pre>Also, that command was a total screwup.<br /><pre>ls -d l[0-3][0-9][0-9] | sed 's:\(.*\):ls /scratch/adam_work/\1/*_map01.fits > \1/\1_fitslist.txt:' | bash<br />ls: /scratch/adam_work/l004/*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l017/*_map01.fits: No such file or directory<br />bash: line 12: l020/l020_fitslist.txt: Permission denied<br />ls: /scratch/adam_work/l025/*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l108/*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l135/*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l136/*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l137/*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l138/*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l192/*_map01.fits: No such file or directory</pre><br /><br /><br />Now that those files exist, it should be possible to run a set of super-scripts like this:<br />coalign_field,&#8217;l057&#8217;,&#8217;070719_o29&#8217;,sliced_dir=&#8217;sliced_polychrome&#8217;,premap=0<br />coalign_field,&#8217;l351&#8217;,&#8217;070725_ob3&#8217;<br />coalign_field,&#8217;l354&#8217;,&#8217;070724_o10&#8217;<br />coalign_field,&#8217;l357&#8217;,&#8217;070724_ob3&#8217;<br />coalign_field,&#8217;l000&#8217;,&#8217;070719_o14&#8217;<br />coalign_field,&#8217;l003&#8217;,&#8217;070718_o16&#8217;<br />coalign_field,&#8217;l006&#8217;,&#8217;070715_ob5&#8217;<br />coalign_field,&#8217;l009&#8217;,&#8217;070717_ob5&#8217;<br />coalign_field,&#8217;l012&#8217;,&#8217;070715_o10&#8217;<br />coalign_field,&#8217;l015&#8217;,&#8217;070714_o36&#8217;<br />coalign_field,&#8217;l018&#8217;,&#8217;070717_o10&#8217;<br />coalign_field,&#8217;l021&#8217;,&#8217;070715_o15&#8217;<br />coalign_field,&#8217;l024&#8217;,&#8217;070717_o15&#8217;<br />coalign_field,&#8217;l027&#8217;,&#8217;070715_o20&#8217;<br />coalign_field,&#8217;l030&#8217;,&#8217;070717_o20&#8217;<br />coalign_field,&#8217;l033&#8217;,&#8217;070718_ob5&#8217;,sliced_dir=&#8217;sliced_polychrome&#8217;<br />coalign_field,&#8217;l036&#8217;,&#8217;070715_o25&#8217;,sliced_dir=&#8217;sliced_polychrome&#8217;<br />coalign_field,&#8217;l039&#8217;,&#8217;070717_o25&#8217;,sliced_dir=&#8217;sliced_polychrome&#8217;<br />coalign_field,&#8217;l042&#8217;,&#8217;070715_o30&#8217;,sliced_dir=&#8217;sliced_polychrome&#8217;<br />coalign_field,&#8217;l044&#8217;,&#8217;070718_o24&#8217;,sliced_dir=&#8217;sliced_polychrome&#8217;<br />coalign_field,&#8217;l048&#8217;,&#8217;070717_o30&#8217;,sliced_dir=&#8217;sliced_polychrome&#8217;<br />coalign_field,&#8217;l050&#8217;,&#8217;070718_o29&#8217;,sliced_dir=&#8217;sliced_polychrome&#8217;<br />coalign_field,&#8217;l054&#8217;,&#8217;070724_o28&#8217;,sliced_dir=&#8217;sliced_polychrome&#8217;<br />coalign_field,&#8217;l057&#8217;,&#8217;070719_o29&#8217;,sliced_dir=&#8217;sliced_polychrome&#8217;<br /><br />where premap=0 means I&#8217;m not re-mapping the whole field, the sliced_dir=&#8217;slice_polychrome&#8217; keyword is for those fields that do not have a regular sliced directory.<br /><br />This kind of thing ought to be really, really helpful when mapping the fields whose masters are not in the field: I&#8217;ll have to modify the &#8216;coalign_field&#8217; code to search in a different directory, though.<br /><br /><br />Yearghhh&#8230;. last command was bad too.<br /><pre>ls -d l[0-3][0-9][0-9] | sed 's:\(.*\):ls /scratch/adam_work/\1/0*_map01.fits > \1/\1_fitslist.txt:' | bash<br />ls: /scratch/adam_work/l004/0*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l017/0*_map01.fits: No such file or directory<br />bash: line 12: l020/l020_fitslist.txt: Permission denied<br />ls: /scratch/adam_work/l025/0*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l108/0*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l135/0*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l136/0*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l137/0*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l138/0*_map01.fits: No such file or directory<br />ls: /scratch/adam_work/l192/0*_map01.fits: No such file or directory</pre></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/09/14/alignment-success-stories/">Alignment Success Stories</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-14T22:09:00-06:00" pubdate data-updated="true">Sep 14<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_lsgW26mWZnU/SM3ki00LXOI/AAAAAAAADYA/5izD0hrve40/s1600-h/l111_align_success.jpg"><img style="cursor: pointer;" src="http://2.bp.blogspot.com/_lsgW26mWZnU/SM3ki00LXOI/AAAAAAAADYA/5izD0hrve40/s400/l111_align_success.jpg" alt="" id="BLOGGER_PHOTO_ID_5246100427900673250" border="0" /></a><br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_lsgW26mWZnU/SM3krUz_JTI/AAAAAAAADYI/uzayPOqbiss/s1600-h/l024_align_success.jpg"><img style="cursor: pointer;" src="http://4.bp.blogspot.com/_lsgW26mWZnU/SM3krUz_JTI/AAAAAAAADYI/uzayPOqbiss/s400/l024_align_success.jpg" alt="" id="BLOGGER_PHOTO_ID_5246100573928760626" border="0" /></a><br /><br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_lsgW26mWZnU/SM3krkSjAGI/AAAAAAAADYQ/ZOoWxknrDDA/s1600-h/l024_align_failure.jpg"><img style="cursor: pointer;" src="http://1.bp.blogspot.com/_lsgW26mWZnU/SM3krkSjAGI/AAAAAAAADYQ/ZOoWxknrDDA/s400/l024_align_failure.jpg" alt="" id="BLOGGER_PHOTO_ID_5246100578083471458" border="0" /></a><br /><br />Two success stories, one failure story.<br /><br />Successes: L111, L024.  On the left is the aligned map, on the right the unaligned map.<br /><br />Failure: L024.  What&#8217;s going on here?  Is it an issue of that noisy observation, or the fact that we&#8217;re using a 5x1 (I think?) as a reference?</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/09/14/progress-on-alignment-ideas-for-next/">Progress on Alignment, Ideas for the Next Few Steps</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-14T19:18:00-06:00" pubdate data-updated="true">Sep 14<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Alignment:  I did a more thorough test of the aligner, and found an error that was getting me the wrong results.  I&#8217;m still getting distinctly different results than I got with imalign, but I&#8217;m not convinced they&#8217;re wrong.  One problem I have to deal with is the ambiguity between pointing model applied / no pointing model applied.  In retrospect, I should have done ALL of the maps with no pointing model: it would be simpler to maintain a self-consistent set of alignment corrections.<br /><br />However, since that isn&#8217;t what I did - and there isn&#8217;t enough memory to host both data sets at the moment - I&#8217;ve dealt with the problem by adding all of the offsets to the header.  Hopefully now it will be obvious if and what offsets have been applied, both pointing model and &#8216;manual&#8217;, from header keywords.  Sadly, it was a pain to get that to work - IDL&#8217;s _extra does not work the same way as normal keyword passing, which is disappointing and frustrating because it made me rename a lot of variables that should not have been renamed.<br /><br />IF this alignment fails to produce perfect results (which I don&#8217;t really expect to happen - it will just take time to debug), it is still a good first step, and all we&#8217;d really need to do is use bolocat to pull out sources from the reference image and then match those in the others, doing the same thing imalign does.  It wouldn&#8217;t be difficult but it would be time consuming to program.<br /><br />Had a bunch of ideas during my insomnia last night, but I&#8217;m afraid I forgot most of them&#8230;<br /><br />One idea was related to the use of MAD as opposed to STDDEV: it may allow for a more robust sigma-rejection for automated flagging.  But that&#8217;s difficult.<br /><br />Another thought was using the maps to auto-identify glitches.  To do this, I&#8217;d make a combined map and an individual map, hastrom them, and subtract the combined from the individual.  We could then probably pretty easily spot any glitches; they should be the only outliers left, in principle.  I&#8217;ll test that idea, but it actually looks less promising than I&#8217;d hoped.  Things are not coming out right in preliminary tests - huge residuals.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/09/12/failed-fields/">Failed Fields</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-12T16:09:00-06:00" pubdate data-updated="true">Sep 12<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<ul><br /><li>l030 - comments were in the form ;; instead of # in the infile<br /></li><li>l055 - no such folder<br /></li><li>l026 - no infile existed; made one<br /><br /></li><li>l028 - /scratch/sliced_polychrome/l028/060605_o[**]_raw_ds5.nc are bad<br /></li><li>l031 - Downsampling seems to have failed for most of this directory.  Need to downsample all files and create a new infile<br /></li><li>l035 - /scratch/sliced_polychrome/l035/060605_o[**]_raw_ds5.nc are bad - that&#8217;s all 060605 observations of l035.<br /></li><li>l036 - /scratch/sliced_polychrome/l036/070702_o25_raw_ds5.nc, /scratch/sliced_polychrome/l036/070705_o21_raw_ds5.nc are bad<br /></li><li>l038 - /scratch/sliced_polychrome/l038/060627_ob3_raw_ds5.nc, /scratch/sliced_polychrome/l038/060627_ob[3567]_raw.nc are bad - had to re-preprocess </li><li>l054 - /scratch/sliced_polychrome/l054/070724_o25_raw_ds5.nc is bad<br /></li><li>l057 - /scratch/sliced_polychrome/l057/070907_o16_raw_ds5.nc is bad</li></ul>Except for l057, there is no guarantee that the whole observation is bad, BUT the code failed on ncdf_open, so it possible the observation turned bad during downsampling/preprocessing.<br /><br />fixed: 30, 26, 55, 35, 28, 31, 38, 54, 57<br />so far all observations on 060605 are bad.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/09/11/uh/">Uh?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-11T22:57:00-06:00" pubdate data-updated="true">Sep 11<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;m not sure the error reported yesterday is reproducible.<br /><br />Tonight, I started a complete re-mapping of the entire survey.  The new mapping will include beam-smoothed maps and more complete header parameters.<br /><br />I need to re-check the L111 mapping.  It looks like the region with NGC 7538 in it did alright, but the southeast region didn&#8217;t do so well.  The combined maps are probably better than in any previous iteration, though.<br /><br />Tomorrow&#8217;s tests will include L024 presumably.  <br /><br />It&#8217;s time to get to work on this stuff.  There is definitely a reasonably efficient way to go through all of this stuff; the most difficult part is post-facto error checking.  <br /><br />Here are some awk commands I found useful (the &#39;s are because of VI):<br /><code> awk '{printf( $0); if ($2 \!= 0){ printf(" \%4i\%4i",$4-443,$5-207) }; if($4\!=0){printf(" \%4i,\%4i",$2-272,$3-742)}; printf("\n") }' align/l111_fitslist_shiftfind.txt</code><br /><code>awk '{print $6,$7}' align/l111_fitslist_shiftfind.txt > align/shifts_all_lb.txt</code><br /><br />One important point: I had to add a parameter to the header file to say whether the current pointing model was used or not.  It matters when applying the offsets.  Note that since I&#8217;m using the pointing model to make all the individual maps, we actually have to stick with this current set of pointing models for all coaligned maps.  <br /><br />The current models:<br /><pre><br />#   Definition of coefficientts:<br />#   start/end mjd are the start/end modified Julian date of a given pointing model<br />#   the 'a' coefficients are for the AZIMUTH OFFSET, the b coefficients are for the ZENITH ANGLE OFFSET<br />#   a0/b0 are constants (e.g. the mean)<br />#   [ab][12] are the 1st and 2nd coefficients of Azimuth.  They have been fiated to zero for most of<br />#   the past year or three.<br />#   [ab][34] are the 1st and 2nd coefficients of Zenith Angle.<br />#   A 'pointing model' is therefore something like this:<br />#   azoff = a0 + a3*alt + a4*alt^2<br />#   altoff = b0 + b3*alt + b4*alt^2<br />#<br />#   It is important that the start_mjd/end_mjd be in ascending order<br />#<br />#   WARNING: LATER THAN JULY 2007 DEFAULTS TO JULY 2007 WHICH WILL PROBABLY RESULT IN ERRORS!<br />#   I don't have a September 2007 model yet.<br />#<br />#   start_mjd      end_mjd               a0              a1            a2              a3             a4                 b0             b1             b2             b3                b4       realdate<br />      53522.5      53582.5       -9.2413685             0.0           0.0   -0.0066354359  -0.0015110883          7.0392221            0.0            0.0   -0.053635657    -0.00047042481       20050601<br />      53614.5      53643.5        84.969583             0.0           0.0      -2.4339154    0.016300937          126.00164            0.0            0.0     -2.4424431       0.015455417       20050901<br />      53887.5      53947.5        9.5305281             0.0           0.0    -0.053191181  -0.0029300592         0.13425019            0.0            0.0     0.48160040     -0.0092814256       20060601<br />      53979.5      54008.5       -98.980381             0.0           0.0      0.65354164   -0.012414466          52.841380            0.0            0.0      1.6705743      -0.020893018       20060901<br />      54101.5      54252.5       -99.078392             0.0           0.0        0.105270   -0.005943491          86.896333            0.0            0.0     0.54257415      -0.011919129       20070101<br />      54252.5      54288         -103.03831             0.0           0.0      0.20972540  -0.0060336987          100.74491            0.0            0.0   0.0099012827     -0.0033331895       20070601<br />#      54288        54313         -99.078392             0.0           0.0      0.10527000  -0.0059434911          86.896333            0.0            0.0     0.54257415      -0.011919129       20070707<br />      54288        54313         -98.803883             0.0           0.0      0.11810246  -0.0051207995          91.720516            0.0            0.0     0.18953269      -0.0078189793       20070707<br />      54313        54500         -99.078392             0.0           0.0      0.10527000  -0.0059434911          86.896333            0.0            0.0     0.54257415      -0.011919129       20070707<br /><br /><br />mjd2date,53522.5 ,y,m,d & print,y,m,d<br />mjd2date,53614.5 ,y,m,d & print,y,m,d<br />mjd2date,53887.5 ,y,m,d & print,y,m,d<br />mjd2date,53979.5 ,y,m,d & print,y,m,d<br />mjd2date,54101.5 ,y,m,d & print,y,m,d<br />mjd2date,54252.5 ,y,m,d & print,y,m,d<br />mjd2date,54288   ,y,m,d & print,y,m,d<br /></pre></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/09/10/disagreement-over-definition-of-lb/">Disagreement Over Definition of L,b Coordinates</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-10T16:41:00-06:00" pubdate data-updated="true">Sep 10<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
DS9 does something intuitive: cd0_0 and cd1_1 multiplied by the x,y pixel difference gets you the new l,b coordinate.  I think this is very likely to be correct on the galactic plane.  IDL does something different.  I don&#8217;t know why different, or really how - it&#8217;s buried somewhere in wcsxy2sph - but it&#8217;s definitely different.  Which is right?</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/09/08/broken-rotation/">Broken Rotation</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-08T17:34:00-06:00" pubdate data-updated="true">Sep 8<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I have to echo James in saying how remarkable it is than anything I ever did worked at all!  I&#8217;m growing more and more certain that I&#8217;ve been double-correcting rotation for the past 2 months, and my maps don&#8217;t look all that bad!<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_lsgW26mWZnU/SMW4oOPcLaI/AAAAAAAADXw/1ARG8iyVXDQ/s1600-h/070717_o15_rotations.png"><img style="cursor: pointer;" src="http://4.bp.blogspot.com/_lsgW26mWZnU/SMW4oOPcLaI/AAAAAAAADXw/1ARG8iyVXDQ/s400/070717_o15_rotations.png" alt="" id="BLOGGER_PHOTO_ID_5243800342299946402" border="0" /></a><br /><br />Image caption: <br />Top left - both PA and rotang<br />Top right - neither<br />Bottom left - rotang only<br />Bottom right - PA only<br /><br />I&#8217;m running the same sort of comparison on all of the GC and L=24 data.  Check out /scratch/adam_work/ROT_TEST for the results.  I&#8217;ll be updating this when I&#8217;ve completed that analysis.<br /><br />Update 6:35 PM: !@#$, etc.  New problem child:<br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_lsgW26mWZnU/SMXFUjLjRGI/AAAAAAAADX4/aynvuycRzGM/s1600-h/060603_o16_rotations.png"><img style="cursor:pointer; cursor:hand;" src="http://1.bp.blogspot.com/_lsgW26mWZnU/SMXFUjLjRGI/AAAAAAAADX4/aynvuycRzGM/s400/060603_o16_rotations.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5243814297974555746" /></a><br /><br />Image caption (same as above, luckily): <br />Top left - both PA and rotang<br />Top right - neither<br />Bottom left - rotang only<br />Bottom right - PA only<br /><br />So, can anyone tell me which one of THESE is right?  Because I can&#8217;t.  Top left is &#8216;correct&#8217; except that it&#8217;s not.<br /><br />Update 7:10 PM: I compared adding/subtracting PA and RA, and I can say this:  subtracting PA never works.  Adding/subtracting RA works variably.<br /><br />I think I&#8217;m done testing parameter space.  I haven&#8217;t had very good luck doing parameter space tests in the past; it usually is more beneficial to take a step back and try to think through the problem.<br /><br />Update 7:30 PM: Fixed.  Much as this looks like a short-lived, easily solved problem, it was one of the most subtle and insidious errors I&#8217;ve made.  I got extremely lucky that plotting PA and ROTANGLE happened to spark off warning sirens in my mind about the positioning of the variable names.  I wouldn&#8217;t normally look for that.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/09/08/fresh-blood/">Fresh Blood</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-08T17:32:00-06:00" pubdate data-updated="true">Sep 8<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
hate to put it this way, but probably true - bolocam will eat us all.  Cara and Marc have both agreed to help out with alignment work.  This is good news!  Next post will be bad news, just to compensate.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/09/06/alignment/">Alignment</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-06T12:29:00-06:00" pubdate data-updated="true">Sep 6<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
a few items&#8230;<br /><ol><li>I requested that pyraf be installed on milkyway.  I don&#8217;t really want to deal with xgterm/xterm issues when remotely logging in.</li><li>I&#8217;m writing up a &#8216;script&#8217; on <a href="http://sites.google.com/site/bolocam/pipeline/alignment">http://sites.google.com/site/bolocam/pipeline/alignment</a>.  I believe IRAF is capable of interacting with DS9 even if images are not opened from IRAF, which should allow you to circumvent the 9-frame limit.</li><li>Most of the individual image fields are done now.  There may be a few stragglers, but those are ones that either didn&#8217;t have an _infile.txt or only had single observations. What do we do about those fields?  They&#8217;ll be undersampled!</li></ol></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/09/05/new-code/">New Code</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-05T14:47:00-06:00" pubdate data-updated="true">Sep 5<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Done for the day after this (observing tonight)<br /><br />two new procedures:<br />  alignment_offsets_to_ncdf.pro<br />  calcoeffs_to_ncdf.pro<br /><br />they&#8217;re really easy, very nearly one-liners.  Once they&#8217;ve been used once, you can just use ncdf_varput_scale<br /><br /><br />Modified keyword parameters in do_the_pointing:  offsets will always be applied unless the keyword &#8216;no_offsets&#8217; is passed into the code (or the top-level wrapper).  Since offsets default to zero, this should be OK.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/09/02/pointing-model-success/">Pointing Model Success</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-02T09:06:00-06:00" pubdate data-updated="true">Sep 2<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
/scratch/adam_work/plots/models_myptgmdl_0707.ps<br /><br />Look at the left plots in #1 and #4, and ignore the red lines.  The RMS is 4.87 in alt, 3.51 in az, using all pointing observations in 0707 (i.e. not splitting it into part1/part2 or refining heavily).   Total is 6.003&#8221;, not bad.<br /><br />I&#8217;m calling it quits on pointing refinement for the moment; I&#8217;m satisfied using Meredith&#8217;s pointing models to get science maps co-aligned, then we&#8217;ll use my model on the PPSes to get the pointing to maximum precision.<br /><br />Also, in the galactic center, the mapping works happily now.  No more silly problems with that.<br /><br />It&#8217;s time for a real Next Step.  I think that means mapping nearly everything.  Well, here goes!</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/28/preparemap-issues/">Prepare_map Issues</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-28T18:07:00-06:00" pubdate data-updated="true">Aug 28<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The problem:  There is a bulk offset that can range from small to ~22&#8217; (largest observed so far) in the combined maps that is not present in the individual maps.<br /><br />Observations: I THINK the offset between ra/dec and l/b is most pronounced when the map boundaries are most different.<br /><br />We have been putting CRPIX in the middle of the map (i.e. number of x/y elements divided by 2), which is not the same position as the median ra/dec or l/b.  I figured this might be a problem, but there&#8217;s not really a way around it - if you just set CRPIX to be 0,0, it doesn&#8217;t change anything.  xy2ad and ad2xy produce self-consistent results, but that doesn&#8217;t mean anything either.<br /><br />I think the problem is that AD2XY is largely ignorant of CRPIX: it calculates x/y offsets from the CRVAL assuming that the CRVAL is at CRPIX&#8230;. but I don&#8217;t know why that should be wrong.  Ideas?  More to come if I figure anything out.<br /><br />Update: from doing the individual maps in l/b vs ra/dec, I don&#8217;t think the offset is between l/b and ra/dec&#8230;. something less fundamental.<br /><br />Update 2: still no clues after reading ad2xy and trying to plow through parts of wcssph2xy.   gotta be rect_pix_tstream, but I think it&#8217;s right&#8230;.<br /><br />Update 3: I think I have figured out the problem, currently testing.  My idea has to do with the fact that all x,y positions in rect_pix_tstream are positive, but ad2xy is not constrained to return positive values.  In principle, the two-iteration ad2xy should take care of this, but in the case where the middle of the map in pixels is not the middle of the map in the WCS coordinate system, it is still possible to get negative pixel mappings out of the 2nd iteration.  I&#8217;m still confused about whether this is really possible - makes my head fuzzy - but I tried implementing a solution where I simply shift the crpix rather than recalculating with AD2XY.<br /><br />Update 4: Based on L111, my test in update 3 fixed the problem.  Scuba contours are correct, and reasonably consistent across the field - still need to do the more complete test, e.g. Cygnus<br /><br />Update 5: Cygnus tests still await completion, but a very close inspection of single L111 maps reveals a ~2 pixel difference that could go a long way to explaining my high-RMS pointing calculations.  Still doesn&#8217;t explain the sine curve, but anything helps&#8230;<br /><br />Update 6:  My correction definitely fixed the problem, EXCEPT there&#8217;s still an ambiguity at the .5 pixel level.  Specifically, is AD2XY treating the pixel center as .5,.5 or 0,0?  Ditto IDL.  I believe (from my simulated data) that this ambiguity is still causing a problem.<br /><br />Update 7: New correction fixed problem to better than 1&#8221; (checked by making a simulated map with 1&#8221; pixels) - probably &#8216;perfect&#8217; now.  Read prepare_map.pro for details.  The issue was a difference in pixel centers.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/27/confirmed-error-in-lb-mapping/">Confirmed Error in L/B Mapping</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-27T13:37:00-06:00" pubdate data-updated="true">Aug 27<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve used my simulated data and confirmed that there is in fact an error in the l/b mapping, but I haven&#8217;t tracked it down yet.  Stay tuned.<br /><br /><br />Update:  Something is not self-consistent in prepare_map.  I&#8217;ve tried a variety of different things without success yet.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/25/updates-today/">Updates Today</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-25T17:32:00-06:00" pubdate data-updated="true">Aug 25<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I updated the FITS header writing pieces of the software today, we should now have:<br />N_PCA<br />ITERNUM<br />PPBEAM<br /><br />in all new maps.<br /><br />I&#8217;m mapping all of Cygnus degree-by-degree in RA/Dec and Galactic to try to measure offsets&#8230; possibly offsets as a function of l/b or ra/dec.  I should really be doing this with PPSes, though.<br /><br />My priority list:<br /><ol><li>find out what&#8217;s causing bulk offsets</li><li>beat down noise in my pointing models by rejecting bad sources/points [has to be done from campus]<br /></li><li>test my personal special pointing models</li><li>make maps!</li><li>figure out the rest of pointing<br /></li></ol></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/25/iterating-to-convergence/">Iterating to Convergence</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-25T11:38:00-06:00" pubdate data-updated="true">Aug 25<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_lsgW26mWZnU/SLLufcweELI/AAAAAAAADOs/5LV8RF28aUk/s1600-h/iteratetoconvergence-0.png"><img style="cursor: pointer;" src="http://4.bp.blogspot.com/_lsgW26mWZnU/SLLufcweELI/AAAAAAAADOs/5LV8RF28aUk/s400/iteratetoconvergence-0.png" alt="" id="BLOGGER_PHOTO_ID_5238511540648153266" border="0" /></a><br />Some sample plots of flux-vs-iteration number in the Galactic Center.  The above is for a 13-pca-component map, and the plot is of the northeast peak of SGR B2.  The other plots (available in postscript below) are of two other points in the GC, and the last one is of the whole of SGR B2 (it&#8217;s a very large aperture).<br /><br />ps version here:<br /><a href="http://sites.google.com/site/bolocam/pipeline/mapping/iteratetoconvergence.ps?attredirects=0">http://sites.google.com/site/bolocam/pipeline/mapping/iteratetoconvergence.ps?attredirects=0</a><br /><br />or /scratch/adam_work/plots/iteratetoconvergence.ps</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/24/g343-pca-subtraction-comparison/">G34.3 PCA Subtraction Comparison</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-24T14:24:00-06:00" pubdate data-updated="true">Aug 24<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_lsgW26mWZnU/SLHDrcGWxqI/AAAAAAAADOM/mVp0tqm6qjI/s1600-h/g34.3_pca_compare.png"><img style="cursor: pointer;" src="http://3.bp.blogspot.com/_lsgW26mWZnU/SLHDrcGWxqI/AAAAAAAADOM/mVp0tqm6qjI/s400/g34.3_pca_compare.png" alt="" id="BLOGGER_PHOTO_ID_5238182992653239970" border="0" /></a><br /><br /><br />From top-left to the blue highlighted box, the 20th iteration of N pca components subtracted is shown.  N goes from 1 to 19.  The other plots are  &#8216;ascending&#8217; and 0-pca components with median and baseline subtraction - ask if you want more details on those.<br /><br />19 iterations recovers a LOT of flux.  I haven&#8217;t generated the plots for flux as a function of iteration, but I have software to do that available. <br /><br />Things to note: at 10 iterations and higher, you start to generate negative bowls. <br />One observation is probably independently responsible for the chunks of glitchy data present even in the 19 PCA component subtraction.  While the bowls do worsen with higher number of PCA components, we also find fainter structure (e.g. those tongues to the southeast and northwest).</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/24/some-good-news-some-not-news/">Some Good News, Some&#8230;. Not News.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-24T14:07:00-06:00" pubdate data-updated="true">Aug 24<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve been mapping all weekend.  It turns out that if you do 25 mapping runs that take ~1hr apiece, that takes ~25 hours.  Who knew?<br /><br />Whole observation took 3965.3506 sec.<br />Whole observation took 3071.1403 sec.<br />Whole observation took 4205.3337 sec.<br />Whole observation took 7362.5490 sec.<br />Whole observation took 9313.6064 sec.<br />Whole observation took 3755.2383 sec.<br />Whole observation took 3755.8278 sec.<br />Whole observation took 3760.7032 sec.<br />Whole observation took 3758.5719 sec.<br />Whole observation took 3763.1436 sec.<br />Whole observation took 3766.0066 sec.<br />Whole observation took 3789.5806 sec.<br />Whole observation took 3760.9774 sec.<br />Whole observation took 3762.7124 sec.<br />Whole observation took 3763.1120 sec.<br />Whole observation took 3767.1255 sec.<br />Whole observation took 3766.9085 sec.<br />Whole observation took 3758.5867 sec.<br />Whole observation took 3760.2131 sec.<br />Whole observation took 3755.8963 sec.<br />Whole observation took 3759.9199 sec.<br />Whole observation took 3764.4494 sec.<br />Whole observation took 3766.9686 sec.<br />Whole observation took 3756.5876 sec.<br /><br /><br />The good news is that I haven&#8217;t encountered any crashes.  Smooth sailing so far.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/23/re-convergence-tests/">Re: Convergence Tests</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-23T10:37:00-06:00" pubdate data-updated="true">Aug 23<span>rd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Made a little code to check out convergence, but frankly it&#8217;s pretty easy to just build a mapcube and plot lines in the iteration axis.  The code is in bgps_pipeline/postproc/compareiters.pro, and it is not a single program.<br /><br />Comparing deconvolution to no deconvolution, deconvolution is a lot better.  Without it, there are much more substantial negative regions.  In the GC, my test region, the noise-dominated areas were about the same, though the no-deconvolve map had a little bit more large scale structure.  The signal-dominated regions were very nearly uniformly brighter.  The deconvolved map was ~3 Jy brighter in SGR B2, or 4%.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/23/on-list-for-today/">On the List for Today&#8230;.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-23T07:25:00-06:00" pubdate data-updated="true">Aug 23<span>rd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Since my gigantic mapping run is still going, I&#8217;m going to work primarily on developing code for testing the maps, and determining important information about the mapper.<br /><br />The data paper will require an iteration-to-convergence figure, or at least an estimate of degree of convergence.<br /><ol><li>Need to develop code to show iteration-to-convergence<br /><ol type="a"><li> need it for both NxNpca and ascending/descending</li><li>have to use region files?  make some sort of region reader?</li><li>pick demonstration sources</li></ol></li><li>Compare N<sub>pca</sub> results for bright, faint sources</li><li>Compare iterating with/without deconvolution</li><li>Compare median/average/baseline sky subtraction</li><li>Analyze efficiency&#8230;</li><li>Try to figure out what&#8217;s causing huge offsets.  Is it Galactic Coordinate mapping?<br /></li></ol><br /><br /><br /><pre><br />-bash-3.00$ less /scratch/adam_work/logs/log_082208_domemiter.log | grep Whole<br />Whole observation took 5122.6795 sec.<br />Whole observation took 4774.3424 sec.<br />Whole observation took 2687.7761 sec.<br />Whole observation took 2102.5577 sec.<br />Whole observation took 3247.5344 sec.<br />Whole observation took 5515.2907 sec.<br />Whole observation took 2877.6389 sec.<br />Whole observation took 2757.0235 sec.<br />Whole observation took 1453.0918 sec.<br />Whole observation took 1459.7892 sec.<br />Whole observation took 1381.3762 sec.<br />Whole observation took 1443.1440 sec.<br />Whole observation took 614.39645 sec.<br />Whole observation took 2001.6709 sec.<br />Whole observation took 1817.1512 sec.<br />Whole observation took 1879.1385 sec.<br /></pre><br /><br />Note that the longest set there - 5515s = 1.53 hours - was 40 iterations!</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/22/ten/">TEN!?!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-22T17:40:00-06:00" pubdate data-updated="true">Aug 22<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_lsgW26mWZnU/SK9Pe1q6PaI/AAAAAAAADOE/yd0bxUMCDB4/s1600-h/EIGHT.png"><img style="cursor:pointer; cursor:hand;" src="http://3.bp.blogspot.com/_lsgW26mWZnU/SK9Pe1q6PaI/AAAAAAAADOE/yd0bxUMCDB4/s400/EIGHT.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5237492282876902818" /></a><br /><br />Look at that.  Seriously?  a 10&#8217; offset?  That&#8217;s ridiculous!  There is no WAY our pointing models could be off by that much!  Even if I got the signs entirely wrong, that&#8217;s just not possible.<br /><br />What&#8217;s going on?  First theory:  Galactic coordinates fail.  Any other suggestions?</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/21/task-list/">Task List</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-21T18:25:00-06:00" pubdate data-updated="true">Aug 21<span>st</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
For the moment, I&#8217;m going to leave the pointing alone.  This leaves us (me) with a very long list of things to do before the data release:<br /><br /><ol><li>Determine ideal iterative mapping strategy for low-flux fields</li><li>Determine ideal iterative mapping strategy for fields with bright sources</li><li>Optimize at least the following:<br /><ol type="a"> <li> scan flatting (polynomial subtraction)</li><li>PCA subtraction</li><li>Pre-PCA sky subtraction (necessary?)</li><li>Deconvolution/No deconvolution<br /></li></ol></li><li>GENERATE MAPS [top priority, but it can&#8217;t really happen til after the above]<br /></li><li>Assure consistency with catalogs - e.g. Motte, SCUBA, etc.<br /></li><li>Figure out what needs to go into fits header</li><li>Survive semester before comps [lowest priority]</li><li>sleep [oh, right, real lowest priority]</li></ol>Sarcasm helps me survive.  Almost as much as beer.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/21/new-pointing-models/">New Pointing Models</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-21T14:40:00-06:00" pubdate data-updated="true">Aug 21<span>st</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I decided to try to fit the pointing model as a full alt/az or ra/dec dependent thing using mpfitfun and a 12 (or 16) parameter model.  It didn&#8217;t work very well.<br /><br />I could fit out the alt dependence, then independently fit out the az dependence, and see how that goes.  I think it will work brilliantly.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/21/got-sign-wrong-again/">Got a Sign Wrong Again</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-21T14:39:00-06:00" pubdate data-updated="true">Aug 21<span>st</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Last night&#8217;s run failed because I had a wrong sign in the pointing model.  Do over time!</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/20/notice-anything-different/">Notice Anything Different?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-20T19:03:00-06:00" pubdate data-updated="true">Aug 20<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
About milkyway?  This post is a red herring, but:<br />I decided to go ahead and run the mapper on Cygnus, L33, L111, and the Galactic Center again.  The pointing has gotten to the stage where I&#8217;m certain I can&#8217;t do anything more without a stroke of pure brilliance or a conversation with someone who hasn&#8217;t touched a thing - e.g. Jason - that suddenly enlightens me. <br /><br />In order to fully reproduce Meredith&#8217;s results, I&#8217;d probably have to go back through and follow her &#8216;pipeline&#8217; process step by step as well, and I suspect that, if I had used her method on her RA/Dec maps, I would have come up with exactly the same problem I currently see.  Therefore, I won&#8217;t do anything about it.<br /><br />I think the most appropriate response at this point MAY be to just fit a damned polynomial/sine curve in az and include that as part of the pointing model, but I can&#8217;t justify where that comes from.  All I know is that it&#8217;s present in Meredith&#8217;s data as well as my own.<br /><br />What&#8217;s that next step with the PPSes?  We need to do that.<br /><br />More important, though, is getting some image optimization ready FAST.  I need to be running this stuff before September!  Tonight&#8217;s run will be a test of numbers of PCA components.  At the very least, the v0.5 should have a consistent set of images even if we cut out the high-flux ones.  We&#8217;ll deal with that later.<br /><br />For the high flux objects, e.g. g34.3, since we have so much overlapping data, a simple average/magical baseline subtraction might be just as if not more effective than PCA subtraction, so that&#8217;s one way around it.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/19/modifications/">Modifications</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-19T12:00:00-06:00" pubdate data-updated="true">Aug 19<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Things that have been changed in the past 24 hours that are very significant:<br /><ol><li>In apply_pointing_model, the signs of FAZO and FZAO have been swapped.  I BELIEVE this is correct but somehow things aren&#8217;t working out still.</li><li>In do_the_pointing I have changed from &#8220;eq2hor&#8221; and &#8220;hor2eq&#8221; to &#8220;my_eq2hor&#8221; and &#8220;my_hor2eq&#8221;.  These implement two major changes:<br /><ol type="a"><li> The LST is passed as a parameter rather than calculated within the ASTROLIB code<br /></li><li> The conversion is calculated with BOTH hadec2altaz and getaltaz (and similar for the opposite transformation) and compared for error checking purposes.  If they differ by more than one arcsecond, the code will spit out an error message and use getaltaz. </li></ol><br /></li></ol></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/17/inconsistent/">Inconsistent</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-17T12:19:00-06:00" pubdate data-updated="true">Aug 17<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
James: &#8220;I think it&#8217;s fair to say, though, that there is some problem with the simultaneous assumption that CSO coords are geo and that we are applying the ab/nut correction correctly.&#8221;<br /><br />Yep.  The relevant files are in /scratch/adam_work/plots/:<br />models_noabnut_radec_0707.ps<br />models_noabnut_rawcsoptg_radec_0707.ps<br />models_oppositeabnut_radec_0707.ps<br />models_oppositeabnut_rawcso_radec_0707.ps<br /><br />I&#8217;m afraid they&#8217;re pretty confusing. <br /><br />&#8216;noabnut&#8217; means no aberration/nutation correction was applied during the mapping process.<br />&#8216;oppositeabnut&#8217; means that an aberration/nutation correction that, according to the eq2hor and hor2eq texts, should actually convert heliocentric to geocentric, is being used on data that we believe is starting in a geocentric frame.  There are two possibilities: 1. We are wrong 2. eq2hor/hor2eq are wrong.<br /><br />The &#8216;rawcso&#8217; files have FAZO/FZAO  &#8220;subtracted out&#8221; (removed) in pages 1 and 3, and FAZO/FZAO added back in on pages 2 and 4.  &#8216;rawcso&#8217; means that we&#8217;re looking at the ra/dec the CSO gave without the users&#8217; FAZO/FZAO corrections.<br /><br />The non-rawcso have the NCDF ra/dec vectors, with precession correction applied (and some form of ab/nut correction), but the FAZO/FZAO are still present.  THESE should be equivalent to Meredith&#8217;s plots, e.g. where FAZO_SET/FZAO_SET are on the y axis.  However, that&#8217;s only true for pages 1 and 3.  Pages 2 and 4 have FAZO/FZAO essentially double-subtracted, so they should be ignored.  Pages 1 and 3 of the non-rawcso files should be equivalent to pages 2 and 4 of the rawcso files with the exception that the sigma-rejection used to choose the yellow points is different.<br /><br />So what&#8217;s in each page?  On pages 1 and 2, the red lines are my best fit to the yellow data, which is the black data with an iterative sigma rejection applied (i.e. reject at 1 sigma, recalculate sigma from good data, reject at 2 sigma).  The blue lines are Meredith&#8217;s models.  The right side includes only the yellow data points with the red line subtracted.  On pages 3 and 4, the same is pretty much true except that ONLY the altitude-dependent line has been subtracted: there is no fit to azimuth.<br /><br />Also, the &#8216;sourcecompare&#8217; files are similar.  I&#8217;d check those out too.<br /><br />I still don&#8217;t have the extremely low RMS that Meredith saw.  I&#8217;m going to go through and try to reject bad data points by hand to see if I can get to that level.  We&#8217;ll see.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/13/direct-comparison-with-merediths/">Direct Comparison With Meredith&#8217;s Pointing Calculations</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-13T22:04:00-06:00" pubdate data-updated="true">Aug 13<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve gotten to the point that I&#8217;m directly comparing my pointing calculations to Merediths.  So far, it looks like:<br />1. I can very nearly reproduce Meredith&#8217;s results on her maps, though there are a few differences in centroids and I missed the source a few times where she didn&#8217;t.<br />2. There is still a spread between my map centroids and hers.<br /><br />The code I&#8217;ve written to enable this comparison: publish/debug_testing/compare_me_meredith.pro<br /><br />I&#8217;m still a bit stumped, but I think I have a path to the answer mapped out.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/12/centroiding-and-merediths-files/">Centroiding and Meredith&#8217;s Files</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-12T21:52:00-06:00" pubdate data-updated="true">Aug 12<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I tried the pointing offset calculations on Meredith&#8217;s maps and I still get an RMS of ~9&#8221; in both RA and DEC.  Check out the files:<br />/scratch/adam_work/plots/models_meredith*<br /><br />So&#8230; what?</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/12/searching-for-more-offsets/">Searching for More Offsets</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-12T13:36:00-06:00" pubdate data-updated="true">Aug 12<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
The defining feature of my pointing calculations - and their inconsistency - is that the spread for individual sources is bad, which means that there&#8217;s still something wrong in the way the bulk ra/dec are being calculated.<br /><br />I checked apply_distortion_map_radec to see if it might have inserted some bulk offset, but it only changes the average position by <2".  That might be an issue, but the boresight isn't necessarily aligned with the mean location of the bolometers.  It should be shifted by at least .3" according to a simple average of sin/cos of the bolo_params angles.<br /><br /><br />Comparing my pointing code to map_ncdf_reading directly:<br />readstruct=map_ncdf_reading(filename,/nopixoff)  <br />offsets are small (e.g.      -0.050665803   -0.0029540043 arcseconds ra/dec) if I don&#8217;t subtract fazo/fzao<br />offsets in ra/dec are remarkably close to fazo/fzao if I subtract them:<br />       92.830656      -126.12773<br />       95.000000      -120.00000<br />which is because ra/dec are pretty closely aligned to az/el. <br /><br />So, any difference comes from at least one of the keyword parameters.  Therefore I AM missing something, and that something is one of the keywords to map_ncdf_reading</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/12/ffts-and-unlucky-primes/">FFTs and Unlucky Primes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-12T11:01:00-06:00" pubdate data-updated="true">Aug 12<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve encountered a lot (!) of unlucky prime numbers that I&#8217;m trying to FFT in too many places, and it basically stops the code.<br /><br />211151 was impossibly bad, 5827 is pretty bad too.<br /><br />I solved the first by splitting into by-scan delining, which is better anyway.  But the second is a map, in which I KNOW zero padding is OK.  So&#8230; are there any functions that find the nearest reasonably efficient map size?</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/12/more-cleaning-modifications/">More Cleaning Modifications</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-12T09:48:00-06:00" pubdate data-updated="true">Aug 12<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I had removed sigmadeglitch from deline, now it&#8217;s permanently gone.  I think it might be worth exploring re-inserting sigmadeglitch somewhere.<br /><br />My higher-order polynomial fit is creating deeper bowls around sources, so that&#8217;s a big problem, but if I use a lower order I get the bad streaks.  What&#8217;s the best way to deal with this?  I&#8217;m thinking perhaps only doing the polysub on the second iteration (i.e. after a source model has been subtracted).<br /><br />Delining runs into some issues now, though, because not all frequencies are sampled (?).</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/12/wow-fft-failure/">Wow - FFT Failure</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-12T07:57:00-06:00" pubdate data-updated="true">Aug 12<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
On my huge Cygnus run, the fft keeps failing in the deline code.  It&#8217;s actually pretty impressive, but there are 844604 points in the timestream.  The prime factorization of 844604 is 2^2 * 211151.  This is just damned bad luck, because I think an FFT is extremely inefficient when it can&#8217;t factorize.  What&#8217;s the best workaround?  &#8230;.<br /><br />9 AM update: I&#8217;ve rewritten the deliner to work on a scan-by-scan basis.  It&#8217;s possible that the delining failed in the past because it was essentially removing a constant amplitude at the line frequencies across the observation (or combined observations!) which is not likely to be true.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/11/cleaning-ideas/">Cleaning Ideas</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-11T09:02:00-06:00" pubdate data-updated="true">Aug 11<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
It&#8217;s proving very difficult to get rid of glitches, so here are some more ideas:<br />   Median filter the whole timestream (downsampled) at a resolution that will pull down the glitch peak.  Subtract out the median-filtered timestream from the original, and look for outliers in that distribution: in principle, those should be glitches.<br /><br />    Another option:  subtract out the noise map AND the best-model map from the original timestream before trying to pull out additional astro model stuff.  The map-to-timestream astro model can&#8217;t include glitches because they&#8217;re averaged over, but the sky-subtracted timestream DOES include glitches (no matter how many PCA components are removed) because glitches are NOT correlated across detectors.  The weird thing is that this is effectively subtracting out exactly what was calculated from the sky subtraction - the question is whether subtracting it out BEFORE sky subtracting again gets you any benefit.  If it was just noise, subtracting noise from noise is fine, but the &#8220;noise&#8221; does include some residual signal.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/10/glitches-and-errors/">Glitches and Errors</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-10T22:06:00-06:00" pubdate data-updated="true">Aug 10<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
It&#8217;s definitely important to get rid of the spikes and, more importantly, the exponential decay.  The current function is pretty good, but possibly not good enough because there are some situations in which the turnaround decay is obviously not well-enough dealt with and results in high/low streaks.<br /><br />The glitches can be ~20 Jy.  The problem is that they sometimes show up in the middle of sources (e.g. in 060609_o26).  That will badly distort fluxes. <br /><br />My ideal is still to use a median instead of mean combination of data points into image points, but that seems to be impractical to implement.  Other ideas&#8230;</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/08/big-run-this-weekend/">Big Run This Weekend&#8230;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-08T18:21:00-06:00" pubdate data-updated="true">Aug 8<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
In case anyone is wondering why Milkyway is going really slowly, I&#8217;m mapping a 69-observation set of Cygnus.  It ought to prove to be an interesting test of Milkyway&#8217;s swap capacity, but other than that I doubt it will be useful.  While the pointing is reasonably good at this point (30&#8221; still, but whatever), I haven&#8217;t done ANY work on filtering out bad observations / flagging stuff in Cyg.  Data massaging is going to be a long process, it would be great if I could do that instead of pointing stuff.  Argh.<br /><br />One thing to note is that this file:<br />/scratch/sliced/l078/070702_o33_raw_ds5.nc<br />is a &#8220;_ds5.nc&#8221; but is NOT downsampled!<br /><br /><br />Update:<br />Mapped the individual files successfully, picked out noisy ones.  The overall map failed - just not enough memory to do a field that large.  I split it up in to two sets of 25 observations, plus I&#8217;ll be mapping each L 70-L 90 field separately (I didn&#8217;t get ride of noisy observations for this).  I&#8217;m also remapping the individual observations with PSD flagging enabled to see how that works.<br /><br />For notes on the P Cyg observations, see the file<br />/scratch/adam_work/texts/cygnus_for_pat.in</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/08/rms-fails-to-shrink/">RMS Fails to Shrink</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-08T14:11:00-06:00" pubdate data-updated="true">Aug 8<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Spent a while today working on these plots after rejecting every obvious bad point:<br />/scratch/adam_work/plots/sourcecompare_0_rawcsoptg_0707.ps<br />/scratch/adam_work/plots/sourcecompare_10_rawcsoptg_0707.ps<br />/scratch/adam_work/plots/sourcecompare_1_rawcsoptg_0707.ps<br />/scratch/adam_work/plots/sourcecompare_2_rawcsoptg_0707.ps<br />/scratch/adam_work/plots/sourcecompare_3_rawcsoptg_0707.ps<br />/scratch/adam_work/plots/sourcecompare_4_rawcsoptg_0707.ps<br />/scratch/adam_work/plots/sourcecompare_5_rawcsoptg_0707.ps<br />/scratch/adam_work/plots/sourcecompare_6_rawcsoptg_0707.ps<br />/scratch/adam_work/plots/sourcecompare_7_rawcsoptg_0707.ps<br />/scratch/adam_work/plots/sourcecompare_8_rawcsoptg_0707.ps<br />/scratch/adam_work/plots/sourcecompare_9_rawcsoptg_0707.ps<br />/scratch/adam_work/plots/models_rawcsoptg_0707.ps<br /><br />The net result is, I still don&#8217;t have a nice small RMS offset<br /><br />Update 8/12/08: using RA/DEC mapping doesn&#8217;t help.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/07/images-with-artifacts/">Images With Artifacts</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-07T13:39:00-06:00" pubdate data-updated="true">Aug 7<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Here&#8217;s the list from 0507:<br /><br />Streaky offsets:<br />/scratch/adam_work/g34.3/rawcsoptg050706_o47_raw_ds1.nc_indiv3pca_map00.fits <a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_lsgW26mWZnU/SJtP9wKu4_I/AAAAAAAADNo/gmMEFkzCX-A/s1600-h/050706_o47.png"><img style="cursor: pointer;" src="http://3.bp.blogspot.com/_lsgW26mWZnU/SJtP9wKu4_I/AAAAAAAADNo/gmMEFkzCX-A/s320/050706_o47.png" alt="" id="BLOGGER_PHOTO_ID_5231863314441495538" border="0" /></a><br /><br />Totally messed up (two sets of images many degrees apart):<br />/scratch/adam_work/g34.3/rawcsoptg050713_o40_raw_ds1.nc_indiv3pca_map00.fits<br /><br /><br />070709_ob7 :<br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_lsgW26mWZnU/SJuIDL161GI/AAAAAAAADN4/D4mxFyx1Fr0/s1600-h/070709_ob7_1730m130_peanut.png"><img style="cursor: pointer;" src="http://4.bp.blogspot.com/_lsgW26mWZnU/SJuIDL161GI/AAAAAAAADN4/D4mxFyx1Fr0/s320/070709_ob7_1730m130_peanut.png" alt="" id="BLOGGER_PHOTO_ID_5231924980420891746" border="0" /></a><br /><br />070703_o48 :<br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_lsgW26mWZnU/SJuICzavE_I/AAAAAAAADNw/70Hl5930eU8/s1600-h/070703_o48_3c454.3.png"><img style="cursor: pointer;" src="http://4.bp.blogspot.com/_lsgW26mWZnU/SJuICzavE_I/AAAAAAAADNw/70Hl5930eU8/s320/070703_o48_3c454.3.png" alt="" id="BLOGGER_PHOTO_ID_5231924973864424434" border="0" /></a></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/07/looking-back-at-old-pipeline/">Looking Back at the Old Pipeline</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-07T09:27:00-06:00" pubdate data-updated="true">Aug 7<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I&#8217;ve obviously missed something.  So to try to figure out what it is, I&#8217;m going back to the old pipeline&#8230; again&#8230;<br /><br />in map_ncdf_reading, lines 441-448, there is something curious that goes back to a definition-of-variables problem:  ddec and dra are ADDED to ra and dec to get the new &#8220;ra_all&#8221; and &#8220;dec_all&#8221; variables.  ddec and dra are calculated from eaz and eel: ERROR OFFSETS in Az and El.  Why?  What?!<br /><br />I added a new piece of code, correct_eaz_eel.pro.  It is extremely short, but extremely necessary.<br /><br /><pre><br />pro correct_eaz_eel,ra,dec,el,az,eel,eaz,pa<br />    dra=-eaz*cos(!dtor*pa)*cos(!dtor*el)+eel*sin(!dtor*pa)<br />    ddec=eaz*sin(!dtor*pa)*cos(!dtor*el)+eel*cos(!dtor*pa)<br />    dec += ddec/3600.<br />    ra  += dra/3600. / cos(!dtor*dec) / 15.<br />end    <br /></pre><br /><br />This comes back to the fact that I don&#8217;t know what ANY of the variables in the NCDF header are supposed to be.  Why are &#8220;error&#8221; variables actually OFFSET variables, and why didn&#8217;t anyone know about them?</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/06/something-is-wrong-in-0507/">Something Is Wrong in 0507&#8230;.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-06T17:06:00-06:00" pubdate data-updated="true">Aug 6<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://picasaweb.google.com/keflavich/Bolocam/photo?authkey=OyC8l5sv3gI#5231555630189235762"><img style="cursor: pointer; width: 320px;" src="http://picasaweb.google.com/keflavich/Bolocam/photo?authkey=OyC8l5sv3gI#5231555630189235762" alt="" border="0" /></a><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_lsgW26mWZnU/SJousnsJDjI/AAAAAAAADMY/-hhiIoQ171A/s1600-h/g34.3_zoo.jpg"><img style="cursor: pointer;" src="http://4.bp.blogspot.com/_lsgW26mWZnU/SJousnsJDjI/AAAAAAAADMY/-hhiIoQ171A/s320/g34.3_zoo.jpg" alt="" id="BLOGGER_PHOTO_ID_5231545261247499826" border="0" /></a><br /><br />Look at that zoomed in.  Note that the first 20ish are from 0507.  I don&#8217;t know what&#8217;s causing the double source.  Maybe a 90 degree rotation would do it, I don&#8217;t know.  I do know that I&#8217;m applying an array angle of 76.2 degrees for those July observations and 113.6 degrees for the June 05 observations.  Maybe that got swapped or something&#8230;.<br /><br />It looks like Meredith ran into the same problems when mapping 0506, but not 0507.<br /><br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_lsgW26mWZnU/SJo7MpPYjDI/AAAAAAAADNg/6_pSjjeKjLM/s1600-h/g34_0507_compare.jpg"><img style="cursor: pointer;" src="http://3.bp.blogspot.com/_lsgW26mWZnU/SJo7MpPYjDI/AAAAAAAADNg/6_pSjjeKjLM/s320/g34_0507_compare.jpg" alt="" id="BLOGGER_PHOTO_ID_5231559005559098418" border="0" /></a><br />comparing mine to hers (I even used the same downsampled/cleand file), it is obvious that something went wrong with the mapping.  I tested a number of different fiducial array angles and none of them generated real maps, so the mapping is correct except for offsets in the scan direction, as usual.  What the heck.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/06/distortion-not-distortion-maps/">Distortion (Not Distortion Maps)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-06T14:39:00-06:00" pubdate data-updated="true">Aug 6<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I still see distortion in a lot of maps, but not all.  I think there is a correlation with altitude ~70+/-2 degrees.  So far it&#8217;s most obvious in the 0606 pointing sources.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/06/occasional-bad-centroid/">Occasional Bad Centroid</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-06T14:01:00-06:00" pubdate data-updated="true">Aug 6<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_lsgW26mWZnU/SJoDqKsjWsI/AAAAAAAADMQ/89W6FBUZmvQ/s1600-h/badcentroid.jpg"><img style="cursor: pointer;" src="http://4.bp.blogspot.com/_lsgW26mWZnU/SJoDqKsjWsI/AAAAAAAADMQ/89W6FBUZmvQ/s320/badcentroid.jpg" alt="" id="BLOGGER_PHOTO_ID_5231497940104862402" border="0" /></a><br />I&#8217;ve gotten some bad centroids for 3c273 that don&#8217;t make sense.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/06/0507-mapping/">0507 Mapping</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-06T11:54:00-06:00" pubdate data-updated="true">Aug 6<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Most of the 0507 pointing source maps seem to have failed.  Some of them look like rotator and position angle problems, others have multiple copies of sources mapped to different locations.  I don&#8217;t know what&#8217;s up, but my first bet would be to change the fiducial array angle.  After that, I&#8217;d check on rotang and then, if desperate, see what the PA is doing.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/06/mapped-but-no-dice/">Mapped, but No Dice</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-06T09:20:00-06:00" pubdate data-updated="true">Aug 6<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Finished mapping what I think are all of the pointing sources.  However, the RMS of the centroids has not gone down.  Now I need to go through each individual source and image and try to get rid of the baddies.  There are presumably some sources with bulk offsets that can be removed to improve the fits.  I just have to find them.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/05/nothing/">Nothing</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-05T18:31:00-06:00" pubdate data-updated="true">Aug 5<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
No progress today.  Spent the whole day re-mapping pointing sources and figuring out which observations ARE pointing sources.  Mapping STILL not done - it takes a long time when there are hundreds of separate observations.  Also, finding some corrupt files and noting them in /scratch/adam_work/texts/toolarge.txt .  A lot more of that work to be done.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/04/observation-distribution/">Observation Distribution</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-04T15:54:00-06:00" pubdate data-updated="true">Aug 4<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<pre><br />-bash-3.00$ wc texts/all_*_observations.txt                                                                                                 <br />    0      0      0 texts/all_0505_observations.txt<br />    0      0      0 texts/all_0506_observations.txt<br />  151    151   6039 texts/all_0507_observations.txt<br />   33     33   1377 texts/all_0509_observations.txt<br />   16     16    633 texts/all_0605_observations.txt<br />  135    135   5309 texts/all_0606_observations.txt<br />    0      0      0 texts/all_0607_observations.txt<br />   94     94   3780 texts/all_0609_observations.txt<br />   34     34   1386 texts/all_0705_observations.txt<br />   26     26   1028 texts/all_0706_observations.txt<br />  201    201   7989 texts/all_0707_observations.txt<br />   73     73   2907 texts/all_0709_observations.txt<br />    0      0      0 texts/all_polychrome_0505_observations.txt<br />  222    222  11898 texts/all_polychrome_0506_observations.txt<br />  471    471  24861 texts/all_polychrome_0507_observations.txt<br />  196    196  10346 texts/all_polychrome_0509_observations.txt<br />   43     43   2200 texts/all_polychrome_0605_observations.txt<br />  730    730  38040 texts/all_polychrome_0606_observations.txt<br />   22     22   1195 texts/all_polychrome_0607_observations.txt<br />  471    471  24751 texts/all_polychrome_0609_observations.txt<br />   66     66   3399 texts/all_polychrome_0705_observations.txt<br />  145    145   7533 texts/all_polychrome_0706_observations.txt<br /> 1051   1051  54801 texts/all_polychrome_0707_observations.txt<br />  511    511  27049 texts/all_polychrome_0709_observations.txt<br /> 4691   4691 236521 total<br /></pre></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/03/l111-observation-notes/">L111 Observation Notes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-03T21:16:00-06:00" pubdate data-updated="true">Aug 3<span>rd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_lsgW26mWZnU/SJZ5AakkcMI/AAAAAAAADL4/BV6bqAe26oc/s1600-h/l111_sep05_noptgmdl_fixedoffset.jpg"><img style="cursor: pointer; width: 227px; height: 182px;" src="http://2.bp.blogspot.com/_lsgW26mWZnU/SJZ5AakkcMI/AAAAAAAADL4/BV6bqAe26oc/s320/l111_sep05_noptgmdl_fixedoffset.jpg" alt="fixed offsets" id="BLOGGER_PHOTO_ID_5230501065277075650" border="0" /></a><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_lsgW26mWZnU/SJZ5ArDzBhI/AAAAAAAADMA/Qa6nxqshl7Y/s1600-h/l111_sep05_rawcsoptg.jpg"><img style="cursor: pointer; width: 229px; height: 182px;" src="http://2.bp.blogspot.com/_lsgW26mWZnU/SJZ5ArDzBhI/AAAAAAAADMA/Qa6nxqshl7Y/s320/l111_sep05_rawcsoptg.jpg" alt="raw cso ptg" id="BLOGGER_PHOTO_ID_5230501069703022098" border="0" /></a><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_lsgW26mWZnU/SJZ5Avg041I/AAAAAAAADMI/flj9idr7F54/s1600-h/l111_sep05_ptgapplied.jpg"><img style="cursor: pointer; width: 224px; height: 176px;" src="http://3.bp.blogspot.com/_lsgW26mWZnU/SJZ5Avg041I/AAAAAAAADMI/flj9idr7F54/s320/l111_sep05_ptgapplied.jpg" alt="pointing model applied" id="BLOGGER_PHOTO_ID_5230501070898520914" border="0" /></a><br /><br /><br />In L111, the failures noted in the <a href="http://bolocam.blogspot.com/2008/08/pointing-model-failure.html">previous post</a> are specific to September 2005.  By comparing the pointing model images to the &#8220;raw cso pointing&#8221; and &#8220;no pointing model&#8221; (the latter still have FAZO/FZAO applied, all that has been done to them is aberration/nutation and precession correction) it appears that the Sep 05 model is simply wrong.<br /><br />I haven&#8217;t had time to check on W3/4/5 and L033, but presumably they have a similar issue.  W3/4/5 includes late July 07 and September 06.  L033 includes July 05, June 06, and July 07.  I will need to generate pointing plots for September 05 and 06, and probably regenerate June 06.  I have the rest and I think Meredith&#8217;s models are fine for those dates - they certainly don&#8217;t create recognizable errors in the maps.<br /><br />It is possible that my pointing_model.pro has some pointing models (the problematic ones) entered incorrectly.  It would be nice to get those double-checked.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/03/pointing-model-failure/">Pointing Model Failure</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-03T10:56:00-06:00" pubdate data-updated="true">Aug 3<span>rd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_lsgW26mWZnU/SJXjh0a_cRI/AAAAAAAADBM/J3qzKAdvAE8/s1600-h/l033_pointingmodel_failure.jpg"><img style="margin: 0pt 10px 10px 0pt; float: left; cursor: pointer; width: 677px; height: 407px;" src="http://2.bp.blogspot.com/_lsgW26mWZnU/SJXjh0a_cRI/AAAAAAAADBM/J3qzKAdvAE8/s320/l033_pointingmodel_failure.jpg" alt="l33" id="BLOGGER_PHOTO_ID_5230336712407740690" border="0" /></a><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_lsgW26mWZnU/SJXjiJuyDoI/AAAAAAAADBU/mVcnF0BNdFM/s1600-h/l111_pointingmodel_failure.jpeg"><img style="margin: 0pt 10px 10px 0pt; float: left; cursor: pointer; width: 679px; height: 411px;" src="http://2.bp.blogspot.com/_lsgW26mWZnU/SJXjiJuyDoI/AAAAAAAADBU/mVcnF0BNdFM/s320/l111_pointingmodel_failure.jpeg" alt="l111" id="BLOGGER_PHOTO_ID_5230336718127894146" border="0" /></a><br /><br /><br />I attempted to map L111, L033, and W3/4/5 with the pointing model corrections applied.  That was a failure.  Two images are attached to illustrate the problem - relative pointing is clearly not correct (middle of L33, bottom left of L111).<br /><br />So&#8230;. possibilities:<br /><ol><li>Pointing models are incorrect</li><li>Pointing model signs have been misinterpreted (don&#8217;t think this one is possible based on other graphs)</li><li>Uhh&#8230; ideas?</li></ol>Next step, I&#8217;ll use the individual maps with no ptg mdl and find out what the offsets should be&#8230;.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/03/news-modifications/">News, Modifications</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-03T01:13:00-06:00" pubdate data-updated="true">Aug 3<span>rd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
RA / Dec mapping did change centroid locations, but not really for the better.  A deeper analysis is probably necessary, but nevertheless I&#8217;m not convinced mapping type is the problem.  The list of possible answers to the question of why my pointing models don&#8217;t match Meredith&#8217;s:<br /><ol><li> The new mapping is shifting the centroid<br /><li> The centroiding method I&#8217;m using is different / incorrect<br /><li> There is still something in the pointing we haven&#8217;t caught<br /></ol><br /><br />The lack of systematics suggests that the third option is not correct.  The first seems the most likely, but also the most difficult to track down.  I don&#8217;t know where to go with #2.<br /><br /><br />I&#8217;ve updated the code so that the pointing model correction offsets in RA/Dec are written to the FITS header.  This will be the standard in all future runs for individual observations.  The calculation of this offset post-mapping is straightforward but it&#8217;s nice to have a redundant error check.<br /><br /><br />The report for Monday will be kind of empty, sadly.  However, I think I can say that I&#8217;ll now move on to testing the previous problems we faced, in particular that we could not match the pointing across whole fields (L111).  If THAT is fixed, then at least we know that whatever my pipeline is doing differently (e.g. PA at all times&#8230;) is useful if not 100% correct.<br /><br />I&#8217;ll need to be in the office to test the field mappings, though, because ds9 display doesn&#8217;t work well over wireless.  I&#8217;ll do a remote run of the individual L111 and W5 maps to compare to previous ones.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/08/01/pointing-update/">Pointing Update</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-01T16:18:00-06:00" pubdate data-updated="true">Aug 1<span>st</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
I believe I&#8217;ve completely dealt with the projection issues.  There are a lot of new plots available now, pretty much everything for Jun/Jul 05 and July 07.  Low on my to-do list is the rest of the pointing model tests.  <br /><br />My conclusion now is that I can&#8217;t match the 3-4&#8221; RMS in dAlt and dAz.  Even with aggressive sigma-rejection of outliers, I only get down to ~10&#8221; RMS (which adds to ~15&#8221; RMS).  My calculated pointing models differ significantly from Meredith&#8217;s, but not extremely so for 0707.<br /><br />The code I&#8217;ve used to generate the plots is centroid_plots.pro under plotting/.  Using that code, I am able to essentially reproduce each change made in do_the_pointing besides the distortion mapping.  Because of the weak dependence of the pointing model on altitude, even errors on the scale of precession won&#8217;t really hurt the pointing model calculations.  The only unanswered question I think may be responsible for some errors - but not enough, I think - is whether eq2hor/hor2eq could be double-correcting for aberration and nutation, but this wouldn&#8217;t affect the actual data reduction.  It WOULD affect my plotting!<br /><br />I think my next test is to try to coadd different epochal data for particular fields, e.g. l001, l033.  Not l000 because of the galactic coordinate issue.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/07/31/milkyway-scratch-disk-usage/">Milkyway /scratch Disk Usage</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-31T16:40:00-06:00" pubdate data-updated="true">Jul 31<span>st</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<pre><br />-bash-3.00$ du -h --max-depth=1 ../<br />16K     ../lost+found<br />80G     ../sliced<br />1.3G    ../elatov<br />70G     ../cleaned<br />58G     ../mapped<br />179G    ../sliced_polychrome<br />4.0K    ../ironsides<br />49G     ../coadd_mapped<br />2.1G    ../pca_coadd<br />2.8G    ../3pca_3iterations<br />11M     ../centroid<br />17M     ../lost<br />34M     ../ptg_maps<br />3.8G    ../montage<br />31G     ../maps_from_polychrome<br />93M     ../ptg_mmd<br />32G     ../backup_from_kilauea<br />31G     ../sharc<br />1.8M    ../distortion<br />6.9G    ../fake<br />138G    ../adam_work<br />136G    ../bgps_dir_from_polychrome<br />815G    ../<br /></pre></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/07/31/galactic-vs-ra-mapping/">Galactic vs. RA Mapping</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-31T14:30:00-06:00" pubdate data-updated="true">Jul 31<span>st</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
They don&#8217;t match up.  This is a serious problem.<br /><br />I think it&#8217;s only a problem for the GC: ad2xy refuses to map things right around that transition.  I think it&#8217;s OK elsewhere.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/07/31/update-pointing-model/">Update - Pointing Model</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-31T11:10:00-06:00" pubdate data-updated="true">Jul 31<span>st</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Update - Pointing Model  7/31/08<br />The pointing model application &#8220;works&#8221; now, but I have a problem with our model. We don&#8217;t get down to the <10" RMS offset we're looking for. The mean offsets are all zero, but the spread is more like 20".<br /><br />Example plots on milkyway:  [see attached PDFs too]<br />/scratch/adam_work/plots/models_ptgmdl_0506.ps<br />/scratch/adam_work/plots/models_ptgmdl_0707.ps<br />/scratch/adam_work/plots/models_rawcsoptg_0506.ps<br />/scratch/adam_work/plots/models_rawcsoptg_0707.ps<br /><br />On the left side are plotted &#8220;all&#8221; of the data points, on the right I&#8217;ve used a two-iteration 3-sigma rejection to eliminate outliers to a small degree.<br /><br />Top of these plots - as labeled - is altoff vs. alt, bottom is azoff vs. alt.<br /><br />The red lines are a 2nd order polynomial fit to the data.<br />The cyan lines are the pointing model corrections calculated by Meredith.<br /><br />The &#8216;ptgmdl&#8217; files have had the pointing model corrections applied. Note that they are centered around offsets of zero.<br />The &#8216;rawcsoptg&#8217; files DO NOT have pointing model corrections applied, and FZAO/FAZO have been REMOVED from the original pointing. Hence, these are RAW CSO TELESCOPE POINTING plots.<br /><br />Things to note:<br /><br />    * In the 0707 &#8216;ptgmdl&#8217; set, the az is not quite centered at zero<br />    * the 0506 &#8216;ptgmdl&#8217; set still has bulk offsets<br />    * the ALTOFF and AZOFF are in delta-coordinate: this means that azoff should be scaled by dividing by cos(alt) to put the y-axis in consistent units. In most cases, this means that the already large spread at higher altitudes is going to INCREASE. That means the problem is going to get worse&#8230;<br /><br />Questions:<br /><br />   1. What is the main difference between my plots and Meredith&#8217;s? i.e. why is my RMS ~an order of magnitude larger?<br />   2. Does more outlier rejection make sense? Is there any reason not to trust certain observations if they visible turn out right?<br /><br /><br /><br />PPSes are supposed to be &#8220;absolute references&#8221; for the 1x1, 3x1 maps<br />OLD PROBLEM: PPS and large maps mapped with same &#8216;pointing model&#8217; but ended up with different coordinates</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/07/30/defining-pointing-terminology/">Defining Pointing Terminology</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-30T15:38:00-06:00" pubdate data-updated="true">Jul 30<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
There has been a lot of confusion about pointing terminology.<br /><br /><ul><li>CSO pointing model: the telescope pointing model used and written as a black box </li><br /><ul><li> has already been corrected for aberration/nutation </li><br /><li> is in current epoch coordinates (e.g. J2007.34) </li></ul><br /><li> Instrument-specific correction to pointing model </li><br /><ul><li> ??? also referred to as &#8216;t terms&#8217; </li><br /><li> is offset between CSO pointing model and real locations </li><br /><li> should be a function of alt (and maybe az) </li><br /><li> is recorded in &#8220;RPC&#8221; files </li><br /><li> is in units of distance on the sky: delta-RA and delta-DEC, or delta-ALT and delta-AZ will be in the same units, while if they were in coordinate units delta-RA and delta-AZ would have to be scaled by 1/cos(DEC) or 1/cos(ALT) respectively<br /></li></ul><br /><li> FAZO and FZAO: Fixed Azimuth Offset and Fixed Zenith Angle Offset<br /><ul> <li> these are ambiguously defined in the pipeline code </li><br /><li> ???? FAZO/FZAO include both the functional instrument specific pointing offset and any manual changes made at the telescope [manual only relevant to 2007 observations] </li><br /><li> ???? or are these JUST fixed offsets, and the instrument specific corrections are not included?  Either way, how can I separate out manually-applied fixed offsets from fitted-model offsets? </li> </ul><br /></li></ul></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/07/30/new-pipeline-to-cvs/">New Pipeline to CVS</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-30T15:32:00-06:00" pubdate data-updated="true">Jul 30<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Open topic - what needs to be done to put the new pipeline on the CVS?<br /><br /><ol><li>Under the assumption that it will be used by others, the documentation needs to be complete.<br /></li><li>Needs to be compatible with current pipeline (no name overlap)<br /></li><li>Have to fix / update some Goddard astrolib routines that have short integer for loops and need long integer for loops<br />     -which ones?</li><li>Probably need to add instrument specific pointing model corrections for non-BGPS observations<br /></li></ol></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/07/30/bolocam-pipeline-blog/">BOLOCAM PIPELINE BLOG</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-30T15:29:00-06:00" pubdate data-updated="true">Jul 30<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Guy pointed out in the CU meeting today that we need a better way to keep track of changes / problems / etc.  The wiki&#8217;s kind of a pain, and this will serve as something of a replacement for the e-mail-only conversations that have been going on with the Software Power Team.</div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/12/26/bash-prompt/">Bash Prompt</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/25/triplespec-slit-mapping/">TripleSpec Slit Mapping</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/20/first/">Fourier Upsampling</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/12/installing-diffuse-or-meld-failure-cant/">Installing diffuse or meld - failure, can&#8217;t install pygtk</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/04/installing-qt-on-107/">Installing qt on 10.7</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/21/test/">test</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/08/ipython-notebooks-preserve-figure/">ipython notebooks - preserve figure status between cells</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/05/netpbm-install/">netpbm install</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/05/guider-pointing-blog-motion/">Guider Pointing & Blog Motion</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/19/imf-and-number-of-massive-stars-per/">IMF and number of massive stars per cluster</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/19/an-experiment-with-log-normal-density/">Lognormal Density / IPython Notebook</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/06/i-sent-poll-to-aps-grad-students-to/"></a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/04/research-idea-nir-variation/">Research idea:  NIR variation</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/02/research-idea-stacking-finders/">Research Idea: Stacking Finders</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/12/connecting-to-ipython-notebook-with-ssh/">Connecting to ipython notebook with SSH tunneling</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/29/orion-in-infrared-and-millimeter/">Orion in the Infrared and Millimeter</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/22/sync-fork-with-original-repository-on/">Sync a fork with the original repository on Git</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/22/nan-friendly-convolution/">NaN-friendly convolution</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/26/compiling-vim/">Compiling vim&#8230;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/12/latex-vim-skim/">LaTeX: VIM + Skim</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/08/api-documentation-on-agpy/">API documentation on agpy</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/10/12/latex-producing-bibliography-and-paper/">latex: producing a bibliography and paper independently</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/08/16/mercurial-merge/">mercurial merge</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/08/11/offset-symbols/">Offset symbols?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/07/13/my-scipy-install/">my scipy install&#8230;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/28/p-cygni/">P Cygni</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/26/finally-got-matplotlib-to-install/">finally got matplotlib to install&#8230;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/25/matplotlib-64-bit-installs-never-work/">matplotlib 64 bit installs never work</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/23/major-mac-problems/">Major mac problems</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/21/dying-dock/">Dying Dock</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/04/30/specanpy/">specanpy</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/03/29/why-cant-numpy-do-duplicate-index/">Why can&#8217;t numpy do duplicate index assignment</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/03/18/pyspeckit-astronomical-spectroscopic/">pyspeckit: an astronomical spectroscopic toolkit</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/02/02/pstopng/">pstopng</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/12/13/converting-gildas-class-data-cubes-lmv/">Converting GILDAS-CLASS data cubes (lmv files) to fits</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/11/27/idl-syntax-highlighting-in-vim/">IDL syntax highlighting in VIM</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/11/22/mercurial-behave-like-svn/">Mercurial - behave like SVN?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/11/03/repositories-for-observers/">Repositories for observers</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/11/03/bgps-data-paper-published/">BGPS data paper published</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/10/05/next-generation-astronomy/">Next Generation Astronomy</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/09/14/converting-a-class-created-fits-file-to-a-real-fits-compliant-fits-file/">Converting a CLASS-created .fits file to a real (FITS-compliant) FITS file</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/08/18/observing-gbt-signs-of-good-bad-data/">Observing @ GBT: Signs of good & bad data</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/08/17/galactic-formaldehyde-densitometry-project/">Galactic Formaldehyde Densitometry Project</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/08/16/neat-new-things/">Neat new things&#8230;.</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/08/13/filled-step-plots-in-matplotlib/">Filled step plots in matplotlib</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/08/05/my-starred-reader-articles/">My starred reader articles</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/08/05/first/">First!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/08/05/testing-trackbacks/">Testing trackbacks?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/07/28/histogram-in-google-spreadsheet/">Histogram in Google Spreadsheet</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/07/09/idl-to-python/">IDL-to-Python</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/keflavich">@keflavich</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'keflavich',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Adam Ginsburg -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
